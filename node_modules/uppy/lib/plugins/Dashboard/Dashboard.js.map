{"version":3,"sources":["../../../src/plugins/Dashboard/Dashboard.js"],"names":["FileList","require","Tabs","FileCard","UploadBtn","isTouchDevice","toArray","closeIcon","module","exports","Dashboard","props","handleInputChange","ev","preventDefault","files","target","forEach","file","addFile","source","id","name","type","data","handlePaste","clipboardData","items","kind","blob","getAsFile","log","updateDashboardElWidth","inline","modal","isHidden","i18n","semiTransparent","isWide","handleClickOutside","maxWidth","maxHeight","hideModal","acquirers","panelSelectorPrefix","showPanel","fileCardFor","done","fileCardDone","metaFields","showFileCard","showProgressDetails","totalProgress","totalFileCount","info","note","removeFile","pauseAll","resumeAll","pauseUpload","startUpload","cancelUpload","resumableUploads","hideUploadButton","autoProceed","newFiles","length","newFileCount","activePanel","hideAllPanels","render","state","progressindicators","map"],"mappings":"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","file":"Dashboard.js","sourcesContent":["const html = require('yo-yo')\nconst FileList = require('./FileList')\nconst Tabs = require('./Tabs')\nconst FileCard = require('./FileCard')\nconst UploadBtn = require('./UploadBtn')\nconst { isTouchDevice, toArray } = require('../../core/Utils')\nconst { closeIcon } = require('./icons')\n\n// http://dev.edenspiekermann.com/2016/02/11/introducing-accessible-modal-dialog\n\nmodule.exports = function Dashboard (props) {\n  function handleInputChange (ev) {\n    ev.preventDefault()\n    const files = toArray(ev.target.files)\n\n    files.forEach((file) => {\n      props.addFile({\n        source: props.id,\n        name: file.name,\n        type: file.type,\n        data: file\n      })\n    })\n  }\n\n  // @TODO Exprimental, work in progress\n  // no names, weird API, Chrome-only http://stackoverflow.com/a/22940020\n  function handlePaste (ev) {\n    ev.preventDefault()\n\n    const files = toArray(ev.clipboardData.items)\n    files.forEach((file) => {\n      if (file.kind !== 'file') return\n\n      const blob = file.getAsFile()\n      props.log('File pasted')\n      props.addFile({\n        source: props.id,\n        name: file.name,\n        type: file.type,\n        data: blob\n      })\n    })\n  }\n\n  return html`\n    <div class=\"Uppy UppyTheme--default UppyDashboard\n                          ${isTouchDevice() ? 'Uppy--isTouchDevice' : ''}\n                          ${props.semiTransparent ? 'UppyDashboard--semiTransparent' : ''}\n                          ${!props.inline ? 'UppyDashboard--modal' : ''}\n                          ${props.isWide ? 'UppyDashboard--wide' : ''}\"\n          aria-hidden=\"${props.inline ? 'false' : props.modal.isHidden}\"\n          aria-label=\"${!props.inline\n                       ? props.i18n('dashboardWindowTitle')\n                       : props.i18n('dashboardTitle')}\"\n          role=\"dialog\"\n          onpaste=${handlePaste}\n          onload=${() => props.updateDashboardElWidth()}>\n\n    <div class=\"UppyDashboard-overlay\" onclick=${props.handleClickOutside}></div>\n\n    <div class=\"UppyDashboard-inner\"\n         tabindex=\"0\"\n         style=\"\n          ${props.inline && props.maxWidth ? `max-width: ${props.maxWidth}px;` : ''}\n          ${props.inline && props.maxHeight ? `max-height: ${props.maxHeight}px;` : ''}\n         \">\n      <button class=\"UppyDashboard-close\"\n              type=\"button\"\n              aria-label=\"${props.i18n('closeModal')}\"\n              title=\"${props.i18n('closeModal')}\"\n              onclick=${props.hideModal}>${closeIcon()}</button>\n\n      <div class=\"UppyDashboard-innerWrap\">\n\n        ${Tabs({\n          files: props.files,\n          handleInputChange: handleInputChange,\n          acquirers: props.acquirers,\n          panelSelectorPrefix: props.panelSelectorPrefix,\n          showPanel: props.showPanel,\n          i18n: props.i18n\n        })}\n\n        ${FileCard({\n          files: props.files,\n          fileCardFor: props.fileCardFor,\n          done: props.fileCardDone,\n          metaFields: props.metaFields,\n          log: props.log,\n          i18n: props.i18n\n        })}\n\n        <div class=\"UppyDashboard-filesContainer\">\n\n          ${FileList({\n            acquirers: props.acquirers,\n            files: props.files,\n            handleInputChange: handleInputChange,\n            showFileCard: props.showFileCard,\n            showProgressDetails: props.showProgressDetails,\n            totalProgress: props.totalProgress,\n            totalFileCount: props.totalFileCount,\n            info: props.info,\n            note: props.note,\n            i18n: props.i18n,\n            log: props.log,\n            removeFile: props.removeFile,\n            pauseAll: props.pauseAll,\n            resumeAll: props.resumeAll,\n            pauseUpload: props.pauseUpload,\n            startUpload: props.startUpload,\n            cancelUpload: props.cancelUpload,\n            resumableUploads: props.resumableUploads,\n            isWide: props.isWide\n          })}\n\n          <div class=\"UppyDashboard-actions\">\n            ${!props.hideUploadButton && !props.autoProceed && props.newFiles.length > 0\n              ? UploadBtn({\n                i18n: props.i18n,\n                startUpload: props.startUpload,\n                newFileCount: props.newFiles.length\n              })\n              : null\n            }\n          </div>\n\n        </div>\n\n        <div class=\"UppyDashboardContent-panel\"\n             role=\"tabpanel\"\n             aria-hidden=\"${props.activePanel ? 'false' : 'true'}\">\n          <div class=\"UppyDashboardContent-bar\">\n            <h2 class=\"UppyDashboardContent-title\">\n              ${props.i18n('importFrom')} ${props.activePanel ? props.activePanel.name : null}\n            </h2>\n            <button class=\"UppyDashboardContent-back\"\n                    type=\"button\"\n                    onclick=${props.hideAllPanels}>${props.i18n('done')}</button>\n          </div>\n          ${props.activePanel ? props.activePanel.render(props.state) : ''}\n        </div>\n\n        <div class=\"UppyDashboard-progressindicators\">\n          ${props.progressindicators.map((target) => {\n            return target.render(props.state)\n          })}\n        </div>\n\n      </div>\n    </div>\n  </div>\n  `\n}\n"]}