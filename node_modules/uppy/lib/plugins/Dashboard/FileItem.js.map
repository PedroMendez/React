{"version":3,"sources":["../../../src/plugins/Dashboard/FileItem.js"],"names":["require","getETA","getSpeed","prettyETA","getFileNameAndExtension","truncateString","copyToClipboard","prettyBytes","FileItemProgress","getFileTypeIcon","iconEdit","iconCopy","module","exports","fileItem","props","file","acquirers","isUploaded","progress","uploadComplete","uploadInProgressOrComplete","uploadStarted","uploadInProgress","isPaused","fileName","meta","name","truncatedFileName","isWide","id","resumableUploads","type","general","specific","color","preview","icon","ev","pauseUpload","cancelUpload","percentage","fileID","showProgressDetails","i18n","uploadURL","extension","data","size","source","map","acquirer","e","showFileCard","then","log","info","catch","removeFile"],"mappings":"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","file":"FileItem.js","sourcesContent":["const html = require('yo-yo')\nconst { getETA,\n         getSpeed,\n         prettyETA,\n         getFileNameAndExtension,\n         truncateString,\n         copyToClipboard } = require('../../core/Utils')\nconst prettyBytes = require('prettier-bytes')\nconst FileItemProgress = require('./FileItemProgress')\nconst getFileTypeIcon = require('./getFileTypeIcon')\nconst { iconEdit, iconCopy } = require('./icons')\n\nmodule.exports = function fileItem (props) {\n  const file = props.file\n  const acquirers = props.acquirers\n\n  const isUploaded = file.progress.uploadComplete\n  const uploadInProgressOrComplete = file.progress.uploadStarted\n  const uploadInProgress = file.progress.uploadStarted && !file.progress.uploadComplete\n  const isPaused = file.isPaused || false\n\n  const fileName = getFileNameAndExtension(file.meta.name)[0]\n  const truncatedFileName = props.isWide ? truncateString(fileName, 15) : fileName\n\n  return html`<li class=\"UppyDashboardItem\n                        ${uploadInProgress ? 'is-inprogress' : ''}\n                        ${isUploaded ? 'is-complete' : ''}\n                        ${isPaused ? 'is-paused' : ''}\n                        ${props.resumableUploads ? 'is-resumable' : ''}\"\n                  id=\"uppy_${file.id}\"\n                  title=\"${file.meta.name}\">\n      <div class=\"UppyDashboardItem-preview\">\n        <div class=\"UppyDashboardItem-previewInnerWrap\" style=\"background-color: ${getFileTypeIcon(file.type.general, file.type.specific).color}\">\n          ${file.preview\n            ? html`<img alt=\"${file.name}\" src=\"${file.preview}\">`\n            : html`<div class=\"UppyDashboardItem-previewIconWrap\">\n                <span class=\"UppyDashboardItem-previewIcon\" style=\"color: ${getFileTypeIcon(file.type.general, file.type.specific).color}\">${getFileTypeIcon(file.type.general, file.type.specific).icon}</span>\n                <svg class=\"UppyDashboardItem-previewIconBg\" width=\"72\" height=\"93\" viewBox=\"0 0 72 93\"><g><path d=\"M24.08 5h38.922A2.997 2.997 0 0 1 66 8.003v74.994A2.997 2.997 0 0 1 63.004 86H8.996A2.998 2.998 0 0 1 6 83.01V22.234L24.08 5z\" fill=\"#FFF\"/><path d=\"M24 5L6 22.248h15.007A2.995 2.995 0 0 0 24 19.244V5z\" fill=\"#E4E4E4\"/></g></svg>\n              </div>`\n          }\n        </div>\n        <div class=\"UppyDashboardItem-progress\">\n          <button class=\"UppyDashboardItem-progressBtn\"\n                  type=\"button\"\n                  title=\"${isUploaded\n                          ? 'upload complete'\n                          : props.resumableUploads\n                            ? file.isPaused\n                              ? 'resume upload'\n                              : 'pause upload'\n                            : 'cancel upload'\n                        }\"\n                  onclick=${(ev) => {\n                    if (isUploaded) return\n                    if (props.resumableUploads) {\n                      props.pauseUpload(file.id)\n                    } else {\n                      props.cancelUpload(file.id)\n                    }\n                  }}>\n            ${FileItemProgress({\n              progress: file.progress.percentage,\n              fileID: file.id\n            })}\n          </button>\n          ${props.showProgressDetails\n            ? html`<div class=\"UppyDashboardItem-progressInfo\"\n                        title=\"${props.i18n('fileProgress')}\"\n                        aria-label=\"${props.i18n('fileProgress')}\">\n                ${!file.isPaused && !isUploaded\n                  ? html`<span>${prettyETA(getETA(file.progress))} ・ ↑ ${prettyBytes(getSpeed(file.progress))}/s</span>`\n                  : null\n                }\n              </div>`\n            : null\n          }\n        </div>\n      </div>\n    <div class=\"UppyDashboardItem-info\">\n      <h4 class=\"UppyDashboardItem-name\" title=\"${fileName}\">\n        ${file.uploadURL\n          ? html`<a href=\"${file.uploadURL}\" target=\"_blank\">\n              ${file.extension ? truncatedFileName + '.' + file.extension : truncatedFileName}\n            </a>`\n          : file.extension ? truncatedFileName + '.' + file.extension : truncatedFileName\n        }\n      </h4>\n      <div class=\"UppyDashboardItem-status\">\n        <div class=\"UppyDashboardItem-statusSize\">${file.data.size ? prettyBytes(file.data.size) : ''}</div>\n        ${file.source\n          ? html`<div class=\"UppyDashboardItem-sourceIcon\">\n            ${acquirers.map(acquirer => {\n              if (acquirer.id === file.source) return html`<span title=\"${acquirer.name}\">${acquirer.icon()}</span>`\n            })}\n          </div>`\n          : ''\n        }\n      </div>\n      ${!uploadInProgressOrComplete\n        ? html`<button class=\"UppyDashboardItem-edit\"\n                       type=\"button\"\n                       aria-label=\"Edit file\"\n                       title=\"Edit file\"\n                       onclick=${(e) => props.showFileCard(file.id)}>\n                        ${iconEdit()}</button>`\n        : null\n      }\n      ${file.uploadURL\n        ? html`<button class=\"UppyDashboardItem-copyLink\"\n                       type=\"button\"\n                       aria-label=\"Copy link\"\n                       title=\"Copy link\"\n                       onclick=${() => {\n                         copyToClipboard(file.uploadURL, props.i18n('copyLinkToClipboardFallback'))\n                          .then(() => {\n                            props.log('Link copied to clipboard.')\n                            props.info(props.i18n('copyLinkToClipboardSuccess'), 'info', 3000)\n                          })\n                          .catch(props.log)\n                       }}>${iconCopy()}</button>`\n        : null\n      }\n    </div>\n    <div class=\"UppyDashboardItem-action\">\n      ${!isUploaded\n        ? html`<button class=\"UppyDashboardItem-remove\"\n                       type=\"button\"\n                       aria-label=\"Remove file\"\n                       title=\"Remove file\"\n                       onclick=${() => props.removeFile(file.id)}>\n                 <svg class=\"UppyIcon\" width=\"22\" height=\"21\" viewBox=\"0 0 18 17\">\n                   <ellipse cx=\"8.62\" cy=\"8.383\" rx=\"8.62\" ry=\"8.383\"/>\n                   <path stroke=\"#FFF\" fill=\"#FFF\" d=\"M11 6.147L10.85 6 8.5 8.284 6.15 6 6 6.147 8.35 8.43 6 10.717l.15.146L8.5 8.578l2.35 2.284.15-.146L8.65 8.43z\"/>\n                 </svg>\n               </button>`\n        : null\n      }\n    </div>\n  </li>`\n}\n"]}