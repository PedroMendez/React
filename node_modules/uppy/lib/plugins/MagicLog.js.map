{"version":3,"sources":["../../src/plugins/MagicLog.js"],"names":["Plugin","require","module","exports","core","opts","type","id","title","defaultOptions","handleStateUpdate","bind","prev","state","patch","console","group","log","groupEnd","install","uppy","emitter","on","uninstall","off"],"mappings":";;;;;;;;;;AAAA,IAAMA,SAASC,QAAQ;AACvB;;AAEA;;;;;;AAHe,CAAf,CASAC,OAAOC,OAAP;AAAA;;AACE,oBAAaC,IAAb,EAAmBC,IAAnB,EAAyB;AAAA;;AAAA,iDACvB,mBAAMD,IAAN,EAAYC,IAAZ,CADuB;;AAEvB,UAAKC,IAAL,GAAY,UAAZ;AACA,UAAKC,EAAL,GAAU,UAAV;AACA,UAAKC,KAAL,GAAa,WAAb;;AAEA;AACA,QAAMC,iBAAiB,EAAvB;;AAEA;AACA,UAAKJ,IAAL,GAAY,SAAc,EAAd,EAAkBI,cAAlB,EAAkCJ,IAAlC,CAAZ;;AAEA,UAAKK,iBAAL,GAAyB,MAAKA,iBAAL,CAAuBC,IAAvB,OAAzB;AAZuB;AAaxB;;AAdH,qBAgBED,iBAhBF,8BAgBqBE,IAhBrB,EAgB2BC,KAhB3B,EAgBkCC,KAhBlC,EAgByC;AACrCC,YAAQC,KAAR,CAAc,OAAd;AACAD,YAAQE,GAAR,CAAY,MAAZ,EAAoBL,IAApB;AACAG,YAAQE,GAAR,CAAY,MAAZ,EAAoBJ,KAApB;AACAE,YAAQE,GAAR,CAAY,OAAZ,EAAqBH,KAArB;AACAC,YAAQG,QAAR;AACD,GAtBH;;AAAA,qBAwBEC,OAxBF,sBAwBa;AACT,QAAMC,OAAO,KAAKhB,IAAL,CAAUiB,OAAvB;AACAD,SAAKE,EAAL,CAAQ,cAAR,EAAwB,KAAKZ,iBAA7B;AACD,GA3BH;;AAAA,qBA6BEa,SA7BF,wBA6Be;AACX,SAAKnB,IAAL,CAAUiB,OAAV,CAAkBG,GAAlB,CAAsB,cAAtB,EAAsC,KAAKd,iBAA3C;AACD,GA/BH;;AAAA;AAAA,EAAwCV,MAAxC","file":"MagicLog.js","sourcesContent":["const Plugin = require('./Plugin')\n// import deepDiff from 'deep-diff'\n\n/**\n * Magic Log\n * Helps debug Uppy\n * inspired by https://github.com/yoshuawuyts/choo-log\n *\n */\nmodule.exports = class MagicLog extends Plugin {\n  constructor (core, opts) {\n    super(core, opts)\n    this.type = 'debugger'\n    this.id = 'MagicLog'\n    this.title = 'Magic Log'\n\n    // set default options\n    const defaultOptions = {}\n\n    // merge default options with the ones set by user\n    this.opts = Object.assign({}, defaultOptions, opts)\n\n    this.handleStateUpdate = this.handleStateUpdate.bind(this)\n  }\n\n  handleStateUpdate (prev, state, patch) {\n    console.group('State')\n    console.log('Prev', prev)\n    console.log('Next', state)\n    console.log('Patch', patch)\n    console.groupEnd()\n  }\n\n  install () {\n    const uppy = this.core.emitter\n    uppy.on('state-update', this.handleStateUpdate)\n  }\n\n  uninstall () {\n    this.core.emitter.off('state-update', this.handleStateUpdate)\n  }\n}\n"]}