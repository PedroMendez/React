(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.Uppy = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
function after(o,n,t){function r(o,e){if(r.count<=0)throw new Error("after called too many times");--r.count,o?(u=!0,n(o),n=t):0!==r.count||u||n(null,e)}var u=!1;return t=t||noop,r.count=o,0===o?n():r}function noop(){}module.exports=after;
},{}],2:[function(require,module,exports){
module.exports=function(r,e,n){var t=r.byteLength;if(e=e||0,n=n||t,r.slice)return r.slice(e,n);if(e<0&&(e+=t),n<0&&(n+=t),n>t&&(n=t),e>=t||e>=n||0===t)return new ArrayBuffer(0);for(var f=new Uint8Array(r),i=new Uint8Array(n-e),u=e,a=0;u<n;u++,a++)i[a]=f[u];return i.buffer};
},{}],3:[function(require,module,exports){
(function (global){
"use strict";function compare(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0}function isBuffer(e){return global.Buffer&&"function"==typeof global.Buffer.isBuffer?global.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}function pToString(e){return Object.prototype.toString.call(e)}function isView(e){return!isBuffer(e)&&("function"==typeof global.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}function getName(e){if(util.isFunction(e)){if(functionsHaveNames)return e.name;var t=e.toString(),r=t.match(regex);return r&&r[1]}}function truncate(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function inspect(e){if(functionsHaveNames||!util.isFunction(e))return util.inspect(e);var t=getName(e);return"[Function"+(t?": "+t:"")+"]"}function getMessage(e){return truncate(inspect(e.actual),128)+" "+e.operator+" "+truncate(inspect(e.expected),128)}function fail(e,t,r,n,i){throw new assert.AssertionError({message:r,actual:e,expected:t,operator:n,stackStartFunction:i})}function ok(e,t){e||fail(e,!0,t,"==",assert.ok)}function _deepEqual(e,t,r,n){if(e===t)return!0;if(isBuffer(e)&&isBuffer(t))return 0===compare(e,t);if(util.isDate(e)&&util.isDate(t))return e.getTime()===t.getTime();if(util.isRegExp(e)&&util.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(isView(e)&&isView(t)&&pToString(e)===pToString(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===compare(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(isBuffer(e)!==isBuffer(t))return!1;n=n||{actual:[],expected:[]};var i=n.actual.indexOf(e);return-1!==i&&i===n.expected.indexOf(t)||(n.actual.push(e),n.expected.push(t),objEquiv(e,t,r,n))}return r?e===t:e==t}function isArguments(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function objEquiv(e,t,r,n){if(null===e||void 0===e||null===t||void 0===t)return!1;if(util.isPrimitive(e)||util.isPrimitive(t))return e===t;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=isArguments(e),a=isArguments(t);if(i&&!a||!i&&a)return!1;if(i)return e=pSlice.call(e),t=pSlice.call(t),_deepEqual(e,t,r);var s,u,o=objectKeys(e),f=objectKeys(t);if(o.length!==f.length)return!1;for(o.sort(),f.sort(),u=o.length-1;u>=0;u--)if(o[u]!==f[u])return!1;for(u=o.length-1;u>=0;u--)if(s=o[u],!_deepEqual(e[s],t[s],r,n))return!1;return!0}function notDeepStrictEqual(e,t,r){_deepEqual(e,t,!0)&&fail(e,t,r,"notDeepStrictEqual",notDeepStrictEqual)}function expectedException(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function _tryBlock(e){var t;try{e()}catch(e){t=e}return t}function _throws(e,t,r,n){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),i=_tryBlock(t),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),e&&!i&&fail(i,r,"Missing expected exception"+n);var a="string"==typeof n,s=!e&&util.isError(i),u=!e&&i&&!r;if((s&&a&&expectedException(i,r)||u)&&fail(i,r,"Got unwanted exception"+n),e&&i&&r&&!expectedException(i,r)||!e&&i)throw i}var util=require("util/"),hasOwn=Object.prototype.hasOwnProperty,pSlice=Array.prototype.slice,functionsHaveNames=function(){return"foo"===function(){}.name}(),assert=module.exports=ok,regex=/\s*function\s+([^\(\s]*)\s*/;assert.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=getMessage(this),this.generatedMessage=!0);var t=e.stackStartFunction||fail;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var r=new Error;if(r.stack){var n=r.stack,i=getName(t),a=n.indexOf("\n"+i);if(a>=0){var s=n.indexOf("\n",a+1);n=n.substring(s+1)}this.stack=n}}},util.inherits(assert.AssertionError,Error),assert.fail=fail,assert.ok=ok,assert.equal=function(e,t,r){e!=t&&fail(e,t,r,"==",assert.equal)},assert.notEqual=function(e,t,r){e==t&&fail(e,t,r,"!=",assert.notEqual)},assert.deepEqual=function(e,t,r){_deepEqual(e,t,!1)||fail(e,t,r,"deepEqual",assert.deepEqual)},assert.deepStrictEqual=function(e,t,r){_deepEqual(e,t,!0)||fail(e,t,r,"deepStrictEqual",assert.deepStrictEqual)},assert.notDeepEqual=function(e,t,r){_deepEqual(e,t,!1)&&fail(e,t,r,"notDeepEqual",assert.notDeepEqual)},assert.notDeepStrictEqual=notDeepStrictEqual,assert.strictEqual=function(e,t,r){e!==t&&fail(e,t,r,"===",assert.strictEqual)},assert.notStrictEqual=function(e,t,r){e===t&&fail(e,t,r,"!==",assert.notStrictEqual)},assert.throws=function(e,t,r){_throws(!0,e,t,r)},assert.doesNotThrow=function(e,t,r){_throws(!1,e,t,r)},assert.ifError=function(e){if(e)throw e};var objectKeys=Object.keys||function(e){var t=[];for(var r in e)hasOwn.call(e,r)&&t.push(r);return t};
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"util/":77}],4:[function(require,module,exports){
function Backoff(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}module.exports=Backoff,Backoff.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var o=Math.random(),i=Math.floor(o*this.jitter*t);t=0==(1&Math.floor(10*o))?t-i:t+i}return 0|Math.min(t,this.max)},Backoff.prototype.reset=function(){this.attempts=0},Backoff.prototype.setMin=function(t){this.ms=t},Backoff.prototype.setMax=function(t){this.max=t},Backoff.prototype.setJitter=function(t){this.jitter=t};
},{}],5:[function(require,module,exports){
!function(){"use strict";for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=new Uint8Array(256),t=0;t<r.length;t++)e[r.charCodeAt(t)]=t;exports.encode=function(e){var t,n=new Uint8Array(e),o=n.length,a="";for(t=0;t<o;t+=3)a+=r[n[t]>>2],a+=r[(3&n[t])<<4|n[t+1]>>4],a+=r[(15&n[t+1])<<2|n[t+2]>>6],a+=r[63&n[t+2]];return o%3==2?a=a.substring(0,a.length-1)+"=":o%3==1&&(a=a.substring(0,a.length-2)+"=="),a},exports.decode=function(r){var t,n,o,a,h,c=.75*r.length,g=r.length,i=0;"="===r[r.length-1]&&(c--,"="===r[r.length-2]&&c--);var u=new ArrayBuffer(c),A=new Uint8Array(u);for(t=0;t<g;t+=4)n=e[r.charCodeAt(t)],o=e[r.charCodeAt(t+1)],a=e[r.charCodeAt(t+2)],h=e[r.charCodeAt(t+3)],A[i++]=n<<2|o>>4,A[i++]=(15&o)<<4|a>>2,A[i++]=(3&a)<<6|63&h;return u}}();
},{}],6:[function(require,module,exports){
function belCreateElement(e,t,n){function a(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var n=e[t];if(Array.isArray(n))a(n);else{if(("number"==typeof n||"boolean"==typeof n||"function"==typeof n||n instanceof Date||n instanceof RegExp)&&(n=n.toString()),"string"==typeof n){if(o.lastChild&&"#text"===o.lastChild.nodeName){o.lastChild.nodeValue+=n;continue}n=document.createTextNode(n)}n&&n.nodeType&&o.appendChild(n)}}}var o;-1!==SVG_TAGS.indexOf(e)&&(t.namespace=SVGNS);var l=!1;if(t.namespace&&(l=t.namespace,delete t.namespace),l)o=document.createElementNS(l,e);else{if(e===COMMENT_TAG)return document.createComment(t.comment);o=document.createElement(e)}if(t.onload||t.onunload){var r=t.onload||function(){},i=t.onunload||function(){};onload(o,function(){r(o)},function(){i(o)},belCreateElement.caller.caller.caller),delete t.onload,delete t.onunload}for(var f in t)if(t.hasOwnProperty(f)){var c=f.toLowerCase(),s=t[f];if("classname"===c&&(c="class",f="class"),"htmlFor"===f&&(f="for"),BOOL_PROPS[c])if("true"===s)s=c;else if("false"===s)continue;"on"===c.slice(0,2)?o[f]=s:l?"xlink:href"===f?o.setAttributeNS(XLINKNS,f,s):/^xmlns($|:)/i.test(f)||o.setAttributeNS(null,f,s):o.setAttribute(f,s)}return a(n),o}var document=require("global/document"),hyperx=require("hyperx"),onload=require("on-load"),SVGNS="http://www.w3.org/2000/svg",XLINKNS="http://www.w3.org/1999/xlink",BOOL_PROPS={autofocus:1,checked:1,defaultchecked:1,disabled:1,formnovalidate:1,indeterminate:1,readonly:1,required:1,selected:1,willvalidate:1},COMMENT_TAG="!--",SVG_TAGS=["svg","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"];module.exports=hyperx(belCreateElement,{comments:!0}),module.exports.default=module.exports,module.exports.createElement=belCreateElement;
},{"global/document":34,"hyperx":39,"on-load":48}],7:[function(require,module,exports){
(function (global){
function mapArrayBufferViews(r){for(var e=0;e<r.length;e++){var o=r[e];if(o.buffer instanceof ArrayBuffer){var t=o.buffer;if(o.byteLength!==t.byteLength){var l=new Uint8Array(o.byteLength);l.set(new Uint8Array(t,o.byteOffset,o.byteLength)),t=l.buffer}r[e]=t}}}function BlobBuilderConstructor(r,e){e=e||{};var o=new BlobBuilder;mapArrayBufferViews(r);for(var t=0;t<r.length;t++)o.append(r[t]);return e.type?o.getBlob(e.type):o.getBlob()}function BlobConstructor(r,e){return mapArrayBufferViews(r),new Blob(r,e||{})}var BlobBuilder=global.BlobBuilder||global.WebKitBlobBuilder||global.MSBlobBuilder||global.MozBlobBuilder,blobSupported=function(){try{return 2===new Blob(["hi"]).size}catch(r){return!1}}(),blobSupportsArrayBufferView=blobSupported&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(r){return!1}}(),blobBuilderSupported=BlobBuilder&&BlobBuilder.prototype.append&&BlobBuilder.prototype.getBlob;module.exports=function(){return blobSupported?blobSupportsArrayBufferView?global.Blob:BlobConstructor:blobBuilderSupported?BlobBuilderConstructor:void 0}();
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],8:[function(require,module,exports){

},{}],9:[function(require,module,exports){
function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}var process=module.exports={},cachedSetTimeout,cachedClearTimeout;!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var queue=[],draining=!1,currentQueue,queueIndex=-1;process.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(e){return[]},process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};
},{}],10:[function(require,module,exports){
var slice=[].slice;module.exports=function(n,r){if("string"==typeof r&&(r=n[r]),"function"!=typeof r)throw new Error("bind() requires a function");var e=slice.call(arguments,2);return function(){return r.apply(n,e.concat(slice.call(arguments)))}};
},{}],11:[function(require,module,exports){
function Emitter(t){if(t)return mixin(t)}function mixin(t){for(var e in Emitter.prototype)t[e]=Emitter.prototype[e];return t}"undefined"!=typeof module&&(module.exports=Emitter),Emitter.prototype.on=Emitter.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},Emitter.prototype.once=function(t,e){function i(){this.off(t,i),e.apply(this,arguments)}return i.fn=e,this.on(t,i),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks["$"+t];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r,s=0;s<i.length;s++)if((r=i[s])===e||r.fn===e){i.splice(s,1);break}return this},Emitter.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),i=this._callbacks["$"+t];if(i){i=i.slice(0);for(var r=0,s=i.length;r<s;++r)i[r].apply(this,e)}return this},Emitter.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},Emitter.prototype.hasListeners=function(t){return!!this.listeners(t).length};
},{}],12:[function(require,module,exports){
module.exports=function(o,t){var p=function(){};p.prototype=t.prototype,o.prototype=new p,o.prototype.constructor=o};
},{}],13:[function(require,module,exports){
!function(t){"use strict";var n=0,r=Math.pow(36,4),i=function(t,n){var r="000000000"+t;return r.substr(r.length-n)},e=function(){return i((Math.random()*r<<0).toString(36),4)},o=function(){return n=n<r?n:0,++n-1},u=function(){var t,n=(new Date).getTime().toString(36),r=u.fingerprint(),g=e()+e();return t=i(o().toString(36),4),"c"+n+t+r+g};u.slug=function(){var t,n=(new Date).getTime().toString(36),r=u.fingerprint().slice(0,1)+u.fingerprint().slice(-1),i=e().slice(-2);return t=o().toString(36).slice(-4),n.slice(-2)+t+r+i},u.globalCount=function(){var t=function(){var t,n=0;for(t in window)n++;return n}();return u.globalCount=function(){return t},t},u.fingerprint=function(){return i((navigator.mimeTypes.length+navigator.userAgent.length).toString(36)+u.globalCount().toString(36),4)},t.register?t.register("cuid",u):"undefined"!=typeof module?module.exports=u:t.cuid=u}(this.applitude||this);
},{}],14:[function(require,module,exports){
(function (process){
function useColors(){return!("undefined"==typeof window||!window||void 0===window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document&&"WebkitAppearance"in document.documentElement.style||"undefined"!=typeof window&&window&&window.console&&(console.firebug||console.exception&&console.table)||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function formatArgs(e){var o=this.useColors;if(e[0]=(o?"%c":"")+this.namespace+(o?" %c":" ")+e[0]+(o?"%c ":" ")+"+"+exports.humanize(this.diff),o){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var t=0,n=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(t++,"%c"===e&&(n=t))}),e.splice(n,0,r)}}function log(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(e){try{null==e?exports.storage.removeItem("debug"):exports.storage.debug=e}catch(e){}}function load(){var e;try{e=exports.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}function localstorage(){try{return window.localStorage}catch(e){}}exports=module.exports=require("./debug"),exports.log=log,exports.formatArgs=formatArgs,exports.save=save,exports.load=load,exports.useColors=useColors,exports.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:localstorage(),exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},exports.enable(load());
}).call(this,require('_process'))

},{"./debug":15,"_process":9}],15:[function(require,module,exports){
function selectColor(e){var r,t=0;for(r in e)t=(t<<5)-t+e.charCodeAt(r),t|=0;return exports.colors[Math.abs(t)%exports.colors.length]}function createDebug(e){function r(){if(r.enabled){var e=r,t=+new Date,o=t-(prevTime||t);e.diff=o,e.prev=prevTime,e.curr=t,prevTime=t;for(var s=new Array(arguments.length),n=0;n<s.length;n++)s[n]=arguments[n];s[0]=exports.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var p=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(r,t){if("%%"===r)return r;p++;var o=exports.formatters[t];if("function"==typeof o){var n=s[p];r=o.call(e,n),s.splice(p,1),p--}return r}),exports.formatArgs.call(e,s);(r.log||exports.log||console.log.bind(console)).apply(e,s)}}return r.namespace=e,r.enabled=exports.enabled(e),r.useColors=exports.useColors(),r.color=selectColor(e),"function"==typeof exports.init&&exports.init(r),r}function enable(e){exports.save(e),exports.names=[],exports.skips=[];for(var r=("string"==typeof e?e:"").split(/[\s,]+/),t=r.length,o=0;o<t;o++)r[o]&&(e=r[o].replace(/\*/g,".*?"),"-"===e[0]?exports.skips.push(new RegExp("^"+e.substr(1)+"$")):exports.names.push(new RegExp("^"+e+"$")))}function disable(){exports.enable("")}function enabled(e){var r,t;for(r=0,t=exports.skips.length;r<t;r++)if(exports.skips[r].test(e))return!1;for(r=0,t=exports.names.length;r<t;r++)if(exports.names[r].test(e))return!0;return!1}function coerce(e){return e instanceof Error?e.stack||e.message:e}exports=module.exports=createDebug.debug=createDebug.default=createDebug,exports.coerce=coerce,exports.disable=disable,exports.enable=enable,exports.enabled=enabled,exports.humanize=require("ms"),exports.names=[],exports.skips=[],exports.formatters={};var prevTime;
},{"ms":45}],16:[function(require,module,exports){
function dragDrop(e,r){function t(e){return r.onDragEnter&&r.onDragEnter(e),e.stopPropagation(),e.preventDefault(),!1}function n(t){if(t.stopPropagation(),t.preventDefault(),t.dataTransfer.items){var n=toArray(t.dataTransfer.items),a=n.filter(function(e){return"file"===e.kind}),o=n.filter(function(e){return"string"===e.kind});if(0===a.length&&!r.onDropText)return;if(0===o.length&&!r.onDrop)return;if(0===a.length&&0===o.length)return}return e.classList.add("drag"),clearTimeout(l),r.onDragOver&&r.onDragOver(t),t.dataTransfer.dropEffect="copy",!1}function a(e){return e.stopPropagation(),e.preventDefault(),r.onDragLeave&&r.onDragLeave(e),clearTimeout(l),l=setTimeout(i,50),!1}function o(e){e.stopPropagation(),e.preventDefault(),r.onDragLeave&&r.onDragLeave(e),clearTimeout(l),i();var t={x:e.clientX,y:e.clientY},n=e.dataTransfer.getData("text");if(n&&r.onDropText&&r.onDropText(n,t),e.dataTransfer.items){var a=toArray(e.dataTransfer.items).filter(function(e){return"file"===e.kind});if(0===a.length)return;parallel(a.map(function(e){return function(r){processEntry(e.webkitGetAsEntry(),r)}}),function(e,n){if(e)throw e;r.onDrop&&r.onDrop(flatten(n),t)})}else{var o=toArray(e.dataTransfer.files);if(0===o.length)return;o.forEach(function(e){e.fullPath="/"+e.name}),r.onDrop&&r.onDrop(o,t)}return!1}function i(){e.classList.remove("drag")}if("string"==typeof e){var f=e;if(!(e=window.document.querySelector(e)))throw new Error('"'+f+'" does not match any HTML elements')}if(!e)throw new Error('"'+e+'" is not a valid HTML element');"function"==typeof r&&(r={onDrop:r});var l;return e.addEventListener("dragenter",t,!1),e.addEventListener("dragover",n,!1),e.addEventListener("dragleave",a,!1),e.addEventListener("drop",o,!1),function(){i(),e.removeEventListener("dragenter",t,!1),e.removeEventListener("dragover",n,!1),e.removeEventListener("dragleave",a,!1),e.removeEventListener("drop",o,!1)}}function processEntry(e,r){function t(){o.readEntries(function(e){e.length>0?(a=a.concat(toArray(e)),t()):n()})}function n(){parallel(a.map(function(e){return function(r){processEntry(e,r)}}),r)}var a=[];if(e.isFile)e.file(function(t){t.fullPath=e.fullPath,r(null,t)},function(e){r(e)});else if(e.isDirectory){var o=e.createReader();t()}}function toArray(e){return Array.prototype.slice.call(e||[],0)}module.exports=dragDrop;var flatten=require("flatten"),parallel=require("run-parallel");
},{"flatten":32,"run-parallel":56}],17:[function(require,module,exports){
module.exports=require("./lib/index");
},{"./lib/index":18}],18:[function(require,module,exports){
module.exports=require("./socket"),module.exports.parser=require("engine.io-parser");
},{"./socket":19,"engine.io-parser":27}],19:[function(require,module,exports){
(function (global){
function Socket(e,t){if(!(this instanceof Socket))return new Socket(e,t);t=t||{},e&&"object"==typeof e&&(t=e,e=null),e?(e=parseuri(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=parseuri(t.host).host),this.secure=null!=t.secure?t.secure:global.location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||(global.location?location.hostname:"localhost"),this.port=t.port||(global.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=parseqs.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode;var r="object"==typeof global&&global;r.global===r&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}function clone(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}var transports=require("./transports/index"),Emitter=require("component-emitter"),debug=require("debug")("engine.io-client:socket"),index=require("indexof"),parser=require("engine.io-parser"),parseuri=require("parseuri"),parsejson=require("parsejson"),parseqs=require("parseqs");module.exports=Socket,Socket.priorWebsocketSuccess=!1,Emitter(Socket.prototype),Socket.protocol=parser.protocol,Socket.Socket=Socket,Socket.Transport=require("./transport"),Socket.transports=require("./transports/index"),Socket.parser=require("engine.io-parser"),Socket.prototype.createTransport=function(e){debug('creating transport "%s"',e);var t=clone(this.query);t.EIO=parser.protocol,t.transport=e;var r=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new transports[e]({query:t,socket:this,agent:r.agent||this.agent,hostname:r.hostname||this.hostname,port:r.port||this.port,secure:r.secure||this.secure,path:r.path||this.path,forceJSONP:r.forceJSONP||this.forceJSONP,jsonp:r.jsonp||this.jsonp,forceBase64:r.forceBase64||this.forceBase64,enablesXDR:r.enablesXDR||this.enablesXDR,timestampRequests:r.timestampRequests||this.timestampRequests,timestampParam:r.timestampParam||this.timestampParam,policyPort:r.policyPort||this.policyPort,pfx:r.pfx||this.pfx,key:r.key||this.key,passphrase:r.passphrase||this.passphrase,cert:r.cert||this.cert,ca:r.ca||this.ca,ciphers:r.ciphers||this.ciphers,rejectUnauthorized:r.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:r.perMessageDeflate||this.perMessageDeflate,extraHeaders:r.extraHeaders||this.extraHeaders,forceNode:r.forceNode||this.forceNode,localAddress:r.localAddress||this.localAddress,requestTimeout:r.requestTimeout||this.requestTimeout,protocols:r.protocols||void 0})},Socket.prototype.open=function(){var e;if(this.rememberUpgrade&&Socket.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},Socket.prototype.setTransport=function(e){debug("setting transport %s",e.name);var t=this;this.transport&&(debug("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},Socket.prototype.probe=function(e){function t(){if(h.onlyBinaryUpgrades){var t=!this.supportsBinary&&h.transport.supportsBinary;c=c||t}c||(debug('probe transport "%s" opened',e),p.send([{type:"ping",data:"probe"}]),p.once("packet",function(t){if(!c)if("pong"===t.type&&"probe"===t.data){if(debug('probe transport "%s" pong',e),h.upgrading=!0,h.emit("upgrading",p),!p)return;Socket.priorWebsocketSuccess="websocket"===p.name,debug('pausing current transport "%s"',h.transport.name),h.transport.pause(function(){c||"closed"!==h.readyState&&(debug("changing transport and sending upgrade packet"),a(),h.setTransport(p),p.send([{type:"upgrade"}]),h.emit("upgrade",p),p=null,h.upgrading=!1,h.flush())})}else{debug('probe transport "%s" failed',e);var r=new Error("probe error");r.transport=p.name,h.emit("upgradeError",r)}}))}function r(){c||(c=!0,a(),p.close(),p=null)}function s(t){var s=new Error("probe error: "+t);s.transport=p.name,r(),debug('probe transport "%s" failed because of error: %s',e,t),h.emit("upgradeError",s)}function o(){s("transport closed")}function i(){s("socket closed")}function n(e){p&&e.name!==p.name&&(debug('"%s" works - aborting "%s"',e.name,p.name),r())}function a(){p.removeListener("open",t),p.removeListener("error",s),p.removeListener("close",o),h.removeListener("close",i),h.removeListener("upgrading",n)}debug('probing transport "%s"',e);var p=this.createTransport(e,{probe:1}),c=!1,h=this;Socket.priorWebsocketSuccess=!1,p.once("open",t),p.once("error",s),p.once("close",o),this.once("close",i),this.once("upgrading",n),p.open()},Socket.prototype.onOpen=function(){if(debug("socket open"),this.readyState="open",Socket.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){debug("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},Socket.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(debug('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(parsejson(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else debug('packet received with socket readyState "%s"',this.readyState)},Socket.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},Socket.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!==t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},Socket.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){debug("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},Socket.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},Socket.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},Socket.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(debug("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},Socket.prototype.write=Socket.prototype.send=function(e,t,r){return this.sendPacket("message",e,t,r),this},Socket.prototype.sendPacket=function(e,t,r,s){if("function"==typeof t&&(s=t,t=void 0),"function"==typeof r&&(s=r,r=null),"closing"!==this.readyState&&"closed"!==this.readyState){r=r||{},r.compress=!1!==r.compress;var o={type:e,data:t,options:r};this.emit("packetCreate",o),this.writeBuffer.push(o),s&&this.once("flush",s),this.flush()}},Socket.prototype.close=function(){function e(){s.onClose("forced close"),debug("socket closing - telling transport to close"),s.transport.close()}function t(){s.removeListener("upgrade",t),s.removeListener("upgradeError",t),e()}function r(){s.once("upgrade",t),s.once("upgradeError",t)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var s=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?r():e()}):this.upgrading?r():e()}return this},Socket.prototype.onError=function(e){debug("socket error %j",e),Socket.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},Socket.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){debug('socket close with reason: "%s"',e);var r=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),r.writeBuffer=[],r.prevBufferLen=0}},Socket.prototype.filterUpgrades=function(e){for(var t=[],r=0,s=e.length;r<s;r++)~index(this.transports,e[r])&&t.push(e[r]);return t};
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./transport":20,"./transports/index":21,"component-emitter":11,"debug":14,"engine.io-parser":27,"indexof":40,"parsejson":49,"parseqs":50,"parseuri":51}],20:[function(require,module,exports){
function Transport(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}var parser=require("engine.io-parser"),Emitter=require("component-emitter");module.exports=Transport,Emitter(Transport.prototype),Transport.prototype.onError=function(t,e){var r=new Error(t);return r.type="TransportError",r.description=e,this.emit("error",r),this},Transport.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},Transport.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},Transport.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},Transport.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},Transport.prototype.onData=function(t){var e=parser.decodePacket(t,this.socket.binaryType);this.onPacket(e)},Transport.prototype.onPacket=function(t){this.emit("packet",t)},Transport.prototype.onClose=function(){this.readyState="closed",this.emit("close")};
},{"component-emitter":11,"engine.io-parser":27}],21:[function(require,module,exports){
(function (global){
function polling(e){var o=!1,t=!1,r=!1!==e.jsonp;if(global.location){var n="https:"===location.protocol,i=location.port;i||(i=n?443:80),o=e.hostname!==location.hostname||i!==e.port,t=e.secure!==n}if(e.xdomain=o,e.xscheme=t,"open"in new XMLHttpRequest(e)&&!e.forceJSONP)return new XHR(e);if(!r)throw new Error("JSONP disabled");return new JSONP(e)}var XMLHttpRequest=require("xmlhttprequest-ssl"),XHR=require("./polling-xhr"),JSONP=require("./polling-jsonp"),websocket=require("./websocket");exports.polling=polling,exports.websocket=websocket;
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./polling-jsonp":22,"./polling-xhr":23,"./websocket":25,"xmlhttprequest-ssl":26}],22:[function(require,module,exports){
(function (global){
function empty(){}function JSONPPolling(e){Polling.call(this,e),this.query=this.query||{},callbacks||(global.___eio||(global.___eio=[]),callbacks=global.___eio),this.index=callbacks.length;var t=this;callbacks.push(function(e){t.onData(e)}),this.query.j=this.index,global.document&&global.addEventListener&&global.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=empty)},!1)}var Polling=require("./polling"),inherit=require("component-inherit");module.exports=JSONPPolling;var rNewline=/\n/g,rEscapedNewline=/\\n/g,callbacks;inherit(JSONPPolling,Polling),JSONPPolling.prototype.supportsBinary=!1,JSONPPolling.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),Polling.prototype.doClose.call(this)},JSONPPolling.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var i=document.getElementsByTagName("script")[0];i?i.parentNode.insertBefore(t,i):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},JSONPPolling.prototype.doWrite=function(e,t){function i(){r(),t()}function r(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(e){o.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+o.iframeId+'">';n=document.createElement(e)}catch(e){n=document.createElement("iframe"),n.name=o.iframeId,n.src="javascript:0"}n.id=o.iframeId,o.form.appendChild(n),o.iframe=n}var o=this;if(!this.form){var n,a=document.createElement("form"),l=document.createElement("textarea"),s=this.iframeId="eio_iframe_"+this.index;a.className="socketio",a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px",a.target=s,a.method="POST",a.setAttribute("accept-charset","utf-8"),l.name="d",a.appendChild(l),document.body.appendChild(a),this.form=a,this.area=l}this.form.action=this.uri(),r(),e=e.replace(rEscapedNewline,"\\\n"),this.area.value=e.replace(rNewline,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===o.iframe.readyState&&i()}:this.iframe.onload=i};
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./polling":24,"component-inherit":12}],23:[function(require,module,exports){
(function (global){
function empty(){}function XHR(t){if(Polling.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,global.location){var e="https:"===location.protocol,s=location.port;s||(s=e?443:80),this.xd=t.hostname!==global.location.hostname||s!==t.port,this.xs=t.secure!==e}}function Request(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function unloadHandler(){for(var t in Request.requests)Request.requests.hasOwnProperty(t)&&Request.requests[t].abort()}var XMLHttpRequest=require("xmlhttprequest-ssl"),Polling=require("./polling"),Emitter=require("component-emitter"),inherit=require("component-inherit"),debug=require("debug")("engine.io-client:polling-xhr");module.exports=XHR,module.exports.Request=Request,inherit(XHR,Polling),XHR.prototype.supportsBinary=!0,XHR.prototype.request=function(t){return t=t||{},t.uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new Request(t)},XHR.prototype.doWrite=function(t,e){var s="string"!=typeof t&&void 0!==t,r=this.request({method:"POST",data:t,isBinary:s}),i=this;r.on("success",e),r.on("error",function(t){i.onError("xhr post error",t)}),this.sendXhr=r},XHR.prototype.doPoll=function(){debug("xhr poll");var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},Emitter(Request.prototype),Request.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var e=this.xhr=new XMLHttpRequest(t),s=this;try{debug("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async);try{if(this.extraHeaders){e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0);for(var r in this.extraHeaders)this.extraHeaders.hasOwnProperty(r)&&e.setRequestHeader(r,this.extraHeaders[r])}}catch(t){}if("POST"===this.method)try{this.isBinary?e.setRequestHeader("Content-type","application/octet-stream"):e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{e.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in e&&(e.withCredentials=!0),this.requestTimeout&&(e.timeout=this.requestTimeout),this.hasXDR()?(e.onload=function(){s.onLoad()},e.onerror=function(){s.onError(e.responseText)}):e.onreadystatechange=function(){if(2===e.readyState){var t;try{t=e.getResponseHeader("Content-Type")}catch(t){}"application/octet-stream"===t&&(e.responseType="arraybuffer")}4===e.readyState&&(200===e.status||1223===e.status?s.onLoad():setTimeout(function(){s.onError(e.status)},0))},debug("xhr data %s",this.data),e.send(this.data)}catch(t){return void setTimeout(function(){s.onError(t)},0)}global.document&&(this.index=Request.requestsCount++,Request.requests[this.index]=this)},Request.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},Request.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},Request.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},Request.prototype.cleanup=function(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=empty:this.xhr.onreadystatechange=empty,t)try{this.xhr.abort()}catch(t){}global.document&&delete Request.requests[this.index],this.xhr=null}},Request.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type")}catch(t){}t="application/octet-stream"===e?this.xhr.response||this.xhr.responseText:this.xhr.responseText}catch(t){this.onError(t)}null!=t&&this.onData(t)},Request.prototype.hasXDR=function(){return void 0!==global.XDomainRequest&&!this.xs&&this.enablesXDR},Request.prototype.abort=function(){this.cleanup()},Request.requestsCount=0,Request.requests={},global.document&&(global.attachEvent?global.attachEvent("onunload",unloadHandler):global.addEventListener&&global.addEventListener("beforeunload",unloadHandler,!1));
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./polling":24,"component-emitter":11,"component-inherit":12,"debug":14,"xmlhttprequest-ssl":26}],24:[function(require,module,exports){
function Polling(t){var e=t&&t.forceBase64;hasXHR2&&!e||(this.supportsBinary=!1),Transport.call(this,t)}var Transport=require("../transport"),parseqs=require("parseqs"),parser=require("engine.io-parser"),inherit=require("component-inherit"),yeast=require("yeast"),debug=require("debug")("engine.io-client:polling");module.exports=Polling;var hasXHR2=function(){return null!=new(require("xmlhttprequest-ssl"))({xdomain:!1}).responseType}();inherit(Polling,Transport),Polling.prototype.name="polling",Polling.prototype.doOpen=function(){this.poll()},Polling.prototype.pause=function(t){function e(){debug("paused"),i.readyState="paused",t()}var i=this;if(this.readyState="pausing",this.polling||!this.writable){var o=0;this.polling&&(debug("we are currently polling - waiting to pause"),o++,this.once("pollComplete",function(){debug("pre-pause polling complete"),--o||e()})),this.writable||(debug("we are currently writing - waiting to pause"),o++,this.once("drain",function(){debug("pre-pause writing complete"),--o||e()}))}else e()},Polling.prototype.poll=function(){debug("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},Polling.prototype.onData=function(t){var e=this;debug("polling got data %s",t);var i=function(t,i,o){if("opening"===e.readyState&&e.onOpen(),"close"===t.type)return e.onClose(),!1;e.onPacket(t)};parser.decodePayload(t,this.socket.binaryType,i),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():debug('ignoring poll - transport state "%s"',this.readyState))},Polling.prototype.doClose=function(){function t(){debug("writing close packet"),e.write([{type:"close"}])}var e=this;"open"===this.readyState?(debug("transport open - closing"),t()):(debug("transport not open - deferring close"),this.once("open",t))},Polling.prototype.write=function(t){var e=this;this.writable=!1;var i=function(){e.writable=!0,e.emit("drain")};parser.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,i)})},Polling.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",i="";return!1!==this.timestampRequests&&(t[this.timestampParam]=yeast()),this.supportsBinary||t.sid||(t.b64=1),t=parseqs.encode(t),this.port&&("https"===e&&443!==Number(this.port)||"http"===e&&80!==Number(this.port))&&(i=":"+this.port),t.length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+i+this.path+t};
},{"../transport":20,"component-inherit":12,"debug":14,"engine.io-parser":27,"parseqs":50,"xmlhttprequest-ssl":26,"yeast":80}],25:[function(require,module,exports){
(function (global){
function WS(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=BrowserWebSocket&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(WebSocket=NodeWebSocket),Transport.call(this,e)}var Transport=require("../transport"),parser=require("engine.io-parser"),parseqs=require("parseqs"),inherit=require("component-inherit"),yeast=require("yeast"),debug=require("debug")("engine.io-client:websocket"),BrowserWebSocket=global.WebSocket||global.MozWebSocket,NodeWebSocket;if("undefined"==typeof window)try{NodeWebSocket=require("ws")}catch(e){}var WebSocket=BrowserWebSocket;WebSocket||"undefined"!=typeof window||(WebSocket=NodeWebSocket),module.exports=WS,inherit(WS,Transport),WS.prototype.name="websocket",WS.prototype.supportsBinary=!0,WS.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,s={agent:this.agent,perMessageDeflate:this.perMessageDeflate};s.pfx=this.pfx,s.key=this.key,s.passphrase=this.passphrase,s.cert=this.cert,s.ca=this.ca,s.ciphers=this.ciphers,s.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(s.headers=this.extraHeaders),this.localAddress&&(s.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?t?new WebSocket(e,t):new WebSocket(e):new WebSocket(e,t,s)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},WS.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},WS.prototype.write=function(e){function t(){s.emit("flush"),setTimeout(function(){s.writable=!0,s.emit("drain")},0)}var s=this;this.writable=!1;for(var o=e.length,r=0,i=o;r<i;r++)!function(e){parser.encodePacket(e,s.supportsBinary,function(r){if(!s.usingBrowserWebSocket){var i={};if(e.options&&(i.compress=e.options.compress),s.perMessageDeflate){("string"==typeof r?global.Buffer.byteLength(r):r.length)<s.perMessageDeflate.threshold&&(i.compress=!1)}}try{s.usingBrowserWebSocket?s.ws.send(r):s.ws.send(r,i)}catch(e){debug("websocket closed before onclose event")}--o||t()})}(e[r])},WS.prototype.onClose=function(){Transport.prototype.onClose.call(this)},WS.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},WS.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",s="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(s=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=yeast()),this.supportsBinary||(e.b64=1),e=parseqs.encode(e),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+s+this.path+e},WS.prototype.check=function(){return!(!WebSocket||"__initialize"in WebSocket&&this.name===WS.prototype.name)};
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"../transport":20,"component-inherit":12,"debug":14,"engine.io-parser":27,"parseqs":50,"ws":8,"yeast":80}],26:[function(require,module,exports){
(function (global){
var hasCORS=require("has-cors");module.exports=function(e){var t=e.xdomain,n=e.xscheme,r=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||hasCORS))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&r)return new XDomainRequest}catch(e){}if(!t)try{return new(global[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}};
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"has-cors":37}],27:[function(require,module,exports){
(function (global){
function encodeBase64Object(e,r){return r("b"+exports.packets[e.type]+e.data.data)}function encodeArrayBuffer(e,r,t){if(!r)return exports.encodeBase64Packet(e,t);var n=e.data,a=new Uint8Array(n),o=new Uint8Array(1+n.byteLength);o[0]=packets[e.type];for(var f=0;f<a.length;f++)o[f+1]=a[f];return t(o.buffer)}function encodeBlobAsArrayBuffer(e,r,t){if(!r)return exports.encodeBase64Packet(e,t);var n=new FileReader;return n.onload=function(){e.data=n.result,exports.encodePacket(e,r,!0,t)},n.readAsArrayBuffer(e.data)}function encodeBlob(e,r,t){if(!r)return exports.encodeBase64Packet(e,t);if(dontSendBlobs)return encodeBlobAsArrayBuffer(e,r,t);var n=new Uint8Array(1);return n[0]=packets[e.type],t(new Blob([n.buffer,e.data]))}function tryDecode(e){try{e=utf8.decode(e,{strict:!1})}catch(e){return!1}return e}function map(e,r,t){for(var n=new Array(e.length),a=after(e.length,t),o=0;o<e.length;o++)!function(e,t,a){r(t,function(r,t){n[e]=t,a(r,n)})}(o,e[o],a)}var keys=require("./keys"),hasBinary=require("has-binary2"),sliceBuffer=require("arraybuffer.slice"),after=require("after"),utf8=require("./utf8"),base64encoder;global&&global.ArrayBuffer&&(base64encoder=require("base64-arraybuffer"));var isAndroid="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),isPhantomJS="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),dontSendBlobs=isAndroid||isPhantomJS;exports.protocol=3;var packets=exports.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},packetslist=keys(packets),err={type:"error",data:"parser error"},Blob=require("blob");exports.encodePacket=function(e,r,t,n){"function"==typeof r&&(n=r,r=!1),"function"==typeof t&&(n=t,t=null);var a=void 0===e.data?void 0:e.data.buffer||e.data;if(global.ArrayBuffer&&a instanceof ArrayBuffer)return encodeArrayBuffer(e,r,n);if(Blob&&a instanceof global.Blob)return encodeBlob(e,r,n);if(a&&a.base64)return encodeBase64Object(e,n);var o=packets[e.type];return void 0!==e.data&&(o+=t?utf8.encode(String(e.data),{strict:!1}):String(e.data)),n(""+o)},exports.encodeBase64Packet=function(e,r){var t="b"+exports.packets[e.type];if(Blob&&e.data instanceof global.Blob){var n=new FileReader;return n.onload=function(){var e=n.result.split(",")[1];r(t+e)},n.readAsDataURL(e.data)}var a;try{a=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(r){for(var o=new Uint8Array(e.data),f=new Array(o.length),i=0;i<o.length;i++)f[i]=o[i];a=String.fromCharCode.apply(null,f)}return t+=global.btoa(a),r(t)},exports.decodePacket=function(e,r,t){if(void 0===e)return err;if("string"==typeof e){if("b"===e.charAt(0))return exports.decodeBase64Packet(e.substr(1),r);if(t&&!1===(e=tryDecode(e)))return err;var n=e.charAt(0);return Number(n)==n&&packetslist[n]?e.length>1?{type:packetslist[n],data:e.substring(1)}:{type:packetslist[n]}:err}var a=new Uint8Array(e),n=a[0],o=sliceBuffer(e,1);return Blob&&"blob"===r&&(o=new Blob([o])),{type:packetslist[n],data:o}},exports.decodeBase64Packet=function(e,r){var t=packetslist[e.charAt(0)];if(!base64encoder)return{type:t,data:{base64:!0,data:e.substr(1)}};var n=base64encoder.decode(e.substr(1));return"blob"===r&&Blob&&(n=new Blob([n])),{type:t,data:n}},exports.encodePayload=function(e,r,t){function n(e){return e.length+":"+e}function a(e,t){exports.encodePacket(e,!!o&&r,!1,function(e){t(null,n(e))})}"function"==typeof r&&(t=r,r=null);var o=hasBinary(e);return r&&o?Blob&&!dontSendBlobs?exports.encodePayloadAsBlob(e,t):exports.encodePayloadAsArrayBuffer(e,t):e.length?void map(e,a,function(e,r){return t(r.join(""))}):t("0:")},exports.decodePayload=function(e,r,t){if("string"!=typeof e)return exports.decodePayloadAsBinary(e,r,t);"function"==typeof r&&(t=r,r=null);var n;if(""===e)return t(err,0,1);for(var a,o,f="",i=0,u=e.length;i<u;i++){var c=e.charAt(i);if(":"===c){if(""===f||f!=(a=Number(f)))return t(err,0,1);if(o=e.substr(i+1,a),f!=o.length)return t(err,0,1);if(o.length){if(n=exports.decodePacket(o,r,!1),err.type===n.type&&err.data===n.data)return t(err,0,1);if(!1===t(n,i+a,u))return}i+=a,f=""}else f+=c}return""!==f?t(err,0,1):void 0},exports.encodePayloadAsArrayBuffer=function(e,r){function t(e,r){exports.encodePacket(e,!0,!0,function(e){return r(null,e)})}if(!e.length)return r(new ArrayBuffer(0));map(e,t,function(e,t){var n=t.reduce(function(e,r){var t;return t="string"==typeof r?r.length:r.byteLength,e+t.toString().length+t+2},0),a=new Uint8Array(n),o=0;return t.forEach(function(e){var r="string"==typeof e,t=e;if(r){for(var n=new Uint8Array(e.length),f=0;f<e.length;f++)n[f]=e.charCodeAt(f);t=n.buffer}a[o++]=r?0:1;for(var i=t.byteLength.toString(),f=0;f<i.length;f++)a[o++]=parseInt(i[f]);a[o++]=255;for(var n=new Uint8Array(t),f=0;f<n.length;f++)a[o++]=n[f]}),r(a.buffer)})},exports.encodePayloadAsBlob=function(e,r){function t(e,r){exports.encodePacket(e,!0,!0,function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var n=new Uint8Array(e.length),a=0;a<e.length;a++)n[a]=e.charCodeAt(a);e=n.buffer,t[0]=0}for(var o=e instanceof ArrayBuffer?e.byteLength:e.size,f=o.toString(),i=new Uint8Array(f.length+1),a=0;a<f.length;a++)i[a]=parseInt(f[a]);if(i[f.length]=255,Blob){var u=new Blob([t.buffer,i.buffer,e]);r(null,u)}})}map(e,t,function(e,t){return r(new Blob(t))})},exports.decodePayloadAsBinary=function(e,r,t){"function"==typeof r&&(t=r,r=null);for(var n=e,a=[];n.byteLength>0;){for(var o=new Uint8Array(n),f=0===o[0],i="",u=1;255!==o[u];u++){if(i.length>310)return t(err,0,1);i+=o[u]}n=sliceBuffer(n,2+i.length),i=parseInt(i);var c=sliceBuffer(n,0,i);if(f)try{c=String.fromCharCode.apply(null,new Uint8Array(c))}catch(e){var s=new Uint8Array(c);c="";for(var u=0;u<s.length;u++)c+=String.fromCharCode(s[u])}a.push(c),n=sliceBuffer(n,i)}var l=a.length;a.forEach(function(e,n){t(exports.decodePacket(e,r,!0),n,l)})};
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./keys":28,"./utf8":29,"after":1,"arraybuffer.slice":2,"base64-arraybuffer":5,"blob":7,"has-binary2":36}],28:[function(require,module,exports){
module.exports=Object.keys||function(r){var e=[],t=Object.prototype.hasOwnProperty;for(var o in r)t.call(r,o)&&e.push(o);return e};
},{}],29:[function(require,module,exports){
(function (global){
!function(r){function t(r){for(var t,e,n=[],o=0,i=r.length;o<i;)t=r.charCodeAt(o++),t>=55296&&t<=56319&&o<i?(e=r.charCodeAt(o++),56320==(64512&e)?n.push(((1023&t)<<10)+(1023&e)+65536):(n.push(t),o--)):n.push(t);return n}function e(r){for(var t,e=r.length,n=-1,o="";++n<e;)t=r[n],t>65535&&(t-=65536,o+=b(t>>>10&1023|55296),t=56320|1023&t),o+=b(t);return o}function n(r,t){if(r>=55296&&r<=57343){if(t)throw Error("Lone surrogate U+"+r.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function o(r,t){return b(r>>t&63|128)}function i(r,t){if(0==(4294967168&r))return b(r);var e="";return 0==(4294965248&r)?e=b(r>>6&31|192):0==(4294901760&r)?(n(r,t)||(r=65533),e=b(r>>12&15|224),e+=o(r,6)):0==(4292870144&r)&&(e=b(r>>18&7|240),e+=o(r,12),e+=o(r,6)),e+=b(63&r|128)}function f(r,e){e=e||{};for(var n,o=!1!==e.strict,f=t(r),u=f.length,a=-1,c="";++a<u;)n=f[a],c+=i(n,o);return c}function u(){if(p>=v)throw Error("Invalid byte index");var r=255&s[p];if(p++,128==(192&r))return 63&r;throw Error("Invalid continuation byte")}function a(r){var t,e,o,i,f;if(p>v)throw Error("Invalid byte index");if(p==v)return!1;if(t=255&s[p],p++,0==(128&t))return t;if(192==(224&t)){if(e=u(),(f=(31&t)<<6|e)>=128)return f;throw Error("Invalid continuation byte")}if(224==(240&t)){if(e=u(),o=u(),(f=(15&t)<<12|e<<6|o)>=2048)return n(f,r)?f:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&(e=u(),o=u(),i=u(),(f=(7&t)<<18|e<<12|o<<6|i)>=65536&&f<=1114111))return f;throw Error("Invalid UTF-8 detected")}function c(r,n){n=n||{};var o=!1!==n.strict;s=t(r),v=s.length,p=0;for(var i,f=[];!1!==(i=a(o));)f.push(i);return e(f)}var d="object"==typeof exports&&exports,l="object"==typeof module&&module&&module.exports==d&&module,h="object"==typeof global&&global;h.global!==h&&h.window!==h||(r=h);var s,v,p,b=String.fromCharCode,y={version:"2.1.2",encode:f,decode:c};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return y});else if(d&&!d.nodeType)if(l)l.exports=y;else{var g={},w=g.hasOwnProperty;for(var m in y)w.call(y,m)&&(d[m]=y[m])}else r.utf8=y}(this);
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],30:[function(require,module,exports){
(function (process,global){
(function(){"use strict";function t(t){return"function"==typeof t||"object"==typeof t&&null!==t}function e(t){return"function"==typeof t}function n(t){U=t}function r(t){G=t}function o(){return function(){N(s)}}function i(){return function(){setTimeout(s,1)}}function s(){for(var t=0;t<B;t+=2){(0,V[t])(V[t+1]),V[t]=void 0,V[t+1]=void 0}B=0}function u(t,e){var n=this,r=new this.constructor(a);void 0===r[$]&&P(r);var o=n._state;if(o){var i=arguments[o-1];G(function(){E(o,r,i,n._result)})}else g(n,r,t,e);return r}function c(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(a);return y(n,t),n}function a(){}function f(){return new TypeError("You cannot resolve a promise with itself")}function l(){return new TypeError("A promises callback cannot return that same promise.")}function h(t){try{return t.then}catch(t){return rt.error=t,rt}}function p(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}function _(t,e,n){G(function(t){var r=!1,o=p(n,e,function(n){r||(r=!0,e!==n?y(t,n):b(t,n))},function(e){r||(r=!0,w(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,w(t,o))},t)}function v(t,e){e._state===et?b(t,e._result):e._state===nt?w(t,e._result):g(e,void 0,function(e){y(t,e)},function(e){w(t,e)})}function d(t,n,r){n.constructor===t.constructor&&r===X&&constructor.resolve===Z?v(t,n):r===rt?w(t,rt.error):void 0===r?b(t,n):e(r)?_(t,n,r):b(t,n)}function y(e,n){e===n?w(e,f()):t(n)?d(e,n,h(n)):b(e,n)}function m(t){t._onerror&&t._onerror(t._result),A(t)}function b(t,e){t._state===tt&&(t._result=e,t._state=et,0!==t._subscribers.length&&G(A,t))}function w(t,e){t._state===tt&&(t._state=nt,t._result=e,G(m,t))}function g(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+et]=n,o[i+nt]=r,0===i&&t._state&&G(A,t)}function A(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r,o,i=t._result,s=0;s<e.length;s+=3)r=e[s],o=e[s+n],r?E(n,r,o,i):o(i);t._subscribers.length=0}}function S(){this.error=null}function j(t,e){try{return t(e)}catch(t){return ot.error=t,ot}}function E(t,n,r,o){var i,s,u,c,a=e(r);if(a){if(i=j(r,o),i===ot?(c=!0,s=i.error,i=null):u=!0,n===i)return void w(n,l())}else i=o,u=!0;n._state!==tt||(a&&u?y(n,i):c?w(n,s):t===et?b(n,i):t===nt&&w(n,i))}function T(t,e){try{e(function(e){y(t,e)},function(e){w(t,e)})}catch(e){w(t,e)}}function M(){return it++}function P(t){t[$]=it++,t._state=void 0,t._result=void 0,t._subscribers=[]}function x(t){return new ft(this,t).promise}function C(t){var e=this;return new e(z(t)?function(n,r){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(n,r)}:function(t,e){e(new TypeError("You must pass an array to race."))})}function O(t){var e=this,n=new e(a);return w(n,t),n}function k(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function Y(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function q(t){this[$]=M(),this._result=this._state=void 0,this._subscribers=[],a!==t&&("function"!=typeof t&&k(),this instanceof q?T(this,t):Y())}function F(t,e){this._instanceConstructor=t,this.promise=new t(a),this.promise[$]||P(this.promise),z(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?b(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&b(this.promise,this._result))):w(this.promise,D())}function D(){return new Error("Array Methods must be provided an Array")}function K(){var t;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;e&&"[object Promise]"===Object.prototype.toString.call(e.resolve())&&!e.cast||(t.Promise=at)}var L;L=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var N,U,W,z=L,B=0,G=function(t,e){V[B]=t,V[B+1]=e,2===(B+=2)&&(U?U(s):W())},H="undefined"!=typeof window?window:void 0,I=H||{},J=I.MutationObserver||I.WebKitMutationObserver,Q="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),R="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,V=new Array(1e3);W=Q?function(){return function(){process.nextTick(s)}}():J?function(){var t=0,e=new J(s),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}():R?function(){var t=new MessageChannel;return t.port1.onmessage=s,function(){t.port2.postMessage(0)}}():void 0===H&&"function"==typeof require?function(){try{var t=require,e=t("vertx");return N=e.runOnLoop||e.runOnContext,o()}catch(t){return i()}}():i();var X=u,Z=c,$=Math.random().toString(36).substring(16),tt=void 0,et=1,nt=2,rt=new S,ot=new S,it=0,st=x,ut=C,ct=O,at=q;q.all=st,q.race=ut,q.resolve=Z,q.reject=ct,q._setScheduler=n,q._setAsap=r,q._asap=G,q.prototype={constructor:q,then:X,catch:function(t){return this.then(null,t)}};var ft=F;F.prototype._enumerate=function(){for(var t=this.length,e=this._input,n=0;this._state===tt&&n<t;n++)this._eachEntry(e[n],n)},F.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===Z){var o=h(t);if(o===X&&t._state!==tt)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===at){var i=new n(a);d(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n(function(e){e(t)}),e)}else this._willSettleAt(r(t),e)},F.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===tt&&(this._remaining--,t===nt?w(r,n):this._result[e]=n),0===this._remaining&&b(r,this._result)},F.prototype._willSettleAt=function(t,e){var n=this;g(t,void 0,function(t){n._settledAt(et,e,t)},function(t){n._settledAt(nt,e,t)})};var lt=K,ht={Promise:at,polyfill:lt};"function"==typeof define&&define.amd?define(function(){return ht}):"undefined"!=typeof module&&module.exports?module.exports=ht:void 0!==this&&(this.ES6Promise=ht),lt()}).call(this);
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"_process":9}],31:[function(require,module,exports){
"use strict";var hasOwn=Object.prototype.hasOwnProperty,toStr=Object.prototype.toString,isArray=function(r){return"function"==typeof Array.isArray?Array.isArray(r):"[object Array]"===toStr.call(r)},isPlainObject=function(r){if(!r||"[object Object]"!==toStr.call(r))return!1;var t=hasOwn.call(r,"constructor"),o=r.constructor&&r.constructor.prototype&&hasOwn.call(r.constructor.prototype,"isPrototypeOf");if(r.constructor&&!t&&!o)return!1;var n;for(n in r);return void 0===n||hasOwn.call(r,n)};module.exports=function r(){var t,o,n,c,e,a,i=arguments[0],s=1,l=arguments.length,u=!1;for("boolean"==typeof i&&(u=i,i=arguments[1]||{},s=2),(null==i||"object"!=typeof i&&"function"!=typeof i)&&(i={});s<l;++s)if(null!=(t=arguments[s]))for(o in t)n=i[o],c=t[o],i!==c&&(u&&c&&(isPlainObject(c)||(e=isArray(c)))?(e?(e=!1,a=n&&isArray(n)?n:[]):a=n&&isPlainObject(n)?n:{},i[o]=r(u,a,c)):void 0!==c&&(i[o]=c));return i};
},{}],32:[function(require,module,exports){
module.exports=function(r,n){function t(r,u){return r.reduce(function(r,e){return Array.isArray(e)&&u<n?r.concat(t(e,u+1)):r.concat(e)},[])}return n="number"==typeof n?n:1/0,n?t(r,1):Array.isArray(r)?r.map(function(r){return r}):r};
},{}],33:[function(require,module,exports){
"use strict";function getFormData(e){var t=arguments.length<=1||void 0===arguments[1]?{trim:!1}:arguments[1];if(!e)throw new Error("A form is required by getFormData, was given form="+e);for(var r={},l=void 0,o=[],n={},a=0,i=e.elements.length;a<i;a++){var m=e.elements[a];IGNORED_ELEMENT_TYPES[m.type]||m.disabled||(l=m.name||m.id)&&!n[l]&&(o.push(l),n[l]=!0)}for(var a=0,i=o.length;a<i;a++){l=o[a];var s=getNamedFormElementData(e,l,t);null!=s&&(r[l]=s)}return r}function getNamedFormElementData(e,t){var r=arguments.length<=2||void 0===arguments[2]?{trim:!1}:arguments[2];if(!e)throw new Error("A form is required by getNamedFormElementData, was given form="+e);if(!t&&"[object String]"!==toString.call(t))throw new Error("A form element name is required by getNamedFormElementData, was given elementName="+t);var l=e.elements[t];if(!l||l.disabled)return null;if(!NODE_LIST_CLASSES[toString.call(l)])return getFormElementValue(l,r.trim);for(var o=[],n=!0,a=0,i=l.length;a<i;a++)if(!l[a].disabled){n&&"radio"!==l[a].type&&(n=!1);var m=getFormElementValue(l[a],r.trim);null!=m&&(o=o.concat(m))}return n&&1===o.length?o[0]:o.length>0?o:null}function getFormElementValue(e,t){var r=null,l=e.type;if("select-one"===l)return e.options.length&&(r=e.options[e.selectedIndex].value),r;if("select-multiple"===l){r=[];for(var o=0,n=e.options.length;o<n;o++)e.options[o].selected&&r.push(e.options[o].value);return 0===r.length&&(r=null),r}return"file"===l&&"files"in e?(e.multiple?(r=slice.call(e.files),0===r.length&&(r=null)):r=e.files[0],r):(CHECKED_INPUT_TYPES[l]?e.checked&&(r=e.value):r=t?e.value.replace(TRIM_RE,""):e.value,r)}exports.__esModule=!0;var NODE_LIST_CLASSES={"[object HTMLCollection]":!0,"[object NodeList]":!0,"[object RadioNodeList]":!0},IGNORED_ELEMENT_TYPES={button:!0,fieldset:!0,reset:!0,submit:!0},CHECKED_INPUT_TYPES={checkbox:!0,radio:!0},TRIM_RE=/^\s+|\s+$/g,slice=Array.prototype.slice,toString=Object.prototype.toString;getFormData.getNamedFormElementData=getNamedFormElementData,exports.default=getFormData,module.exports=exports.default;
},{}],34:[function(require,module,exports){
(function (global){
var topLevel="undefined"!=typeof global?global:"undefined"!=typeof window?window:{},minDoc=require("min-document"),doccy;"undefined"!=typeof document?doccy=document:(doccy=topLevel["__GLOBAL_DOCUMENT_CACHE@4"])||(doccy=topLevel["__GLOBAL_DOCUMENT_CACHE@4"]=minDoc),module.exports=doccy;
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"min-document":8}],35:[function(require,module,exports){
(function (global){
var win;win="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},module.exports=win;
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],36:[function(require,module,exports){
(function (global){
function hasBinary(t){if(!t||"object"!=typeof t)return!1;if(isArray(t)){for(var r=0,o=t.length;r<o;r++)if(hasBinary(t[r]))return!0;return!1}if("function"==typeof global.Buffer&&global.Buffer.isBuffer&&global.Buffer.isBuffer(t)||"function"==typeof global.ArrayBuffer&&t instanceof ArrayBuffer||withNativeBlob&&t instanceof Blob||withNativeFile&&t instanceof File)return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return hasBinary(t.toJSON(),!0);for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&hasBinary(t[e]))return!0;return!1}var isArray=require("isarray"),toString=Object.prototype.toString,withNativeBlob="function"==typeof global.Blob||"[object BlobConstructor]"===toString.call(global.Blob),withNativeFile="function"==typeof global.File||"[object FileConstructor]"===toString.call(global.File);module.exports=hasBinary;
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"isarray":41}],37:[function(require,module,exports){
try{module.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){module.exports=!1}
},{}],38:[function(require,module,exports){
function attributeToProperty(r){return function(t,o,e){for(var n in o)n in transform&&(o[transform[n]]=o[n],delete o[n]);return r(t,o,e)}}module.exports=attributeToProperty;var transform={class:"className",for:"htmlFor","http-equiv":"httpEquiv"};
},{}],39:[function(require,module,exports){
function quot(T){return T===ATTR_VALUE_SQ||T===ATTR_VALUE_DQ}function has(T,e){return hasOwn.call(T,e)}function selfClosing(T){return closeRE.test(T)}var attrToProp=require("hyperscript-attribute-to-property"),VAR=0,TEXT=1,OPEN=2,CLOSE=3,ATTR=4,ATTR_KEY=5,ATTR_KEY_W=6,ATTR_VALUE_W=7,ATTR_VALUE=8,ATTR_VALUE_SQ=9,ATTR_VALUE_DQ=10,ATTR_EQ=11,ATTR_BREAK=12,COMMENT=13;module.exports=function(T,e){function A(T){return"function"==typeof T?T:"string"==typeof T?T:T&&"object"==typeof T?T:t("",T)}e||(e={});var t=e.concat||function(T,e){return String(T)+String(e)};return!1!==e.attrToProp&&(T=attrToProp(T)),function(E){function n(T){var A=[];r===ATTR_VALUE_W&&(r=ATTR);for(var t=0;t<T.length;t++){var E=T.charAt(t);r===TEXT&&"<"===E?(R.length&&A.push([TEXT,R]),R="",r=OPEN):">"!==E||quot(r)||r===COMMENT?r===COMMENT&&/-$/.test(R)&&"-"===E?(e.comments&&A.push([ATTR_VALUE,R.substr(0,R.length-1)],[CLOSE]),R="",r=TEXT):r===OPEN&&/^!--$/.test(R)?(e.comments&&A.push([OPEN,R],[ATTR_KEY,"comment"],[ATTR_EQ]),R=E,r=COMMENT):r===TEXT||r===COMMENT?R+=E:r===OPEN&&/\s/.test(E)?(A.push([OPEN,R]),R="",r=ATTR):r===OPEN?R+=E:r===ATTR&&/[^\s"'=\/]/.test(E)?(r=ATTR_KEY,R=E):r===ATTR&&/\s/.test(E)?(R.length&&A.push([ATTR_KEY,R]),A.push([ATTR_BREAK])):r===ATTR_KEY&&/\s/.test(E)?(A.push([ATTR_KEY,R]),R="",r=ATTR_KEY_W):r===ATTR_KEY&&"="===E?(A.push([ATTR_KEY,R],[ATTR_EQ]),R="",r=ATTR_VALUE_W):r===ATTR_KEY?R+=E:r!==ATTR_KEY_W&&r!==ATTR||"="!==E?r!==ATTR_KEY_W&&r!==ATTR||/\s/.test(E)?r===ATTR_VALUE_W&&'"'===E?r=ATTR_VALUE_DQ:r===ATTR_VALUE_W&&"'"===E?r=ATTR_VALUE_SQ:r===ATTR_VALUE_DQ&&'"'===E?(A.push([ATTR_VALUE,R],[ATTR_BREAK]),R="",r=ATTR):r===ATTR_VALUE_SQ&&"'"===E?(A.push([ATTR_VALUE,R],[ATTR_BREAK]),R="",r=ATTR):r!==ATTR_VALUE_W||/\s/.test(E)?r===ATTR_VALUE&&/\s/.test(E)?(A.push([ATTR_VALUE,R],[ATTR_BREAK]),R="",r=ATTR):r!==ATTR_VALUE&&r!==ATTR_VALUE_SQ&&r!==ATTR_VALUE_DQ||(R+=E):(r=ATTR_VALUE,t--):(A.push([ATTR_BREAK]),/[\w-]/.test(E)?(R+=E,r=ATTR_KEY):r=ATTR):(A.push([ATTR_EQ]),r=ATTR_VALUE_W):(r===OPEN?A.push([OPEN,R]):r===ATTR_KEY?A.push([ATTR_KEY,R]):r===ATTR_VALUE&&R.length&&A.push([ATTR_VALUE,R]),A.push([CLOSE]),R="",r=TEXT)}return r===TEXT&&R.length?(A.push([TEXT,R]),R=""):r===ATTR_VALUE&&R.length?(A.push([ATTR_VALUE,R]),R=""):r===ATTR_VALUE_DQ&&R.length?(A.push([ATTR_VALUE,R]),R=""):r===ATTR_VALUE_SQ&&R.length?(A.push([ATTR_VALUE,R]),R=""):r===ATTR_KEY&&(A.push([ATTR_KEY,R]),R=""),A}for(var r=TEXT,R="",s=arguments.length,_=[],o=0;o<E.length;o++)if(o<s-1){var l=arguments[o+1],h=n(E[o]),i=r;i===ATTR_VALUE_DQ&&(i=ATTR_VALUE),i===ATTR_VALUE_SQ&&(i=ATTR_VALUE),i===ATTR_VALUE_W&&(i=ATTR_VALUE),i===ATTR&&(i=ATTR_KEY),h.push([VAR,i,l]),_.push.apply(_,h)}else _.push.apply(_,n(E[o]));for(var f=[null,{},[]],p=[[f,-1]],o=0;o<_.length;o++){var a=p[p.length-1][0],h=_[o],u=h[0];if(u===OPEN&&/^\//.test(h[1])){var g=p[p.length-1][1];p.length>1&&(p.pop(),p[p.length-1][0][2][g]=T(a[0],a[1],a[2].length?a[2]:void 0))}else if(u===OPEN){var L=[h[1],{},[]];a[2].push(L),p.push([L,a[2].length-1])}else if(u===ATTR_KEY||u===VAR&&h[1]===ATTR_KEY){for(var V,c="";o<_.length;o++)if(_[o][0]===ATTR_KEY)c=t(c,_[o][1]);else{if(_[o][0]!==VAR||_[o][1]!==ATTR_KEY)break;if("object"!=typeof _[o][2]||c)c=t(c,_[o][2]);else for(V in _[o][2])_[o][2].hasOwnProperty(V)&&!a[1][V]&&(a[1][V]=_[o][2][V])}_[o][0]===ATTR_EQ&&o++;for(var U=o;o<_.length;o++)if(_[o][0]===ATTR_VALUE||_[o][0]===ATTR_KEY)a[1][c]?a[1][c]=t(a[1][c],_[o][1]):a[1][c]=A(_[o][1]);else{if(_[o][0]!==VAR||_[o][1]!==ATTR_VALUE&&_[o][1]!==ATTR_KEY){!c.length||a[1][c]||o!==U||_[o][0]!==CLOSE&&_[o][0]!==ATTR_BREAK||(a[1][c]=c.toLowerCase());break}a[1][c]?a[1][c]=t(a[1][c],_[o][2]):a[1][c]=A(_[o][2])}}else if(u===ATTR_KEY)a[1][h[1]]=!0;else if(u===VAR&&h[1]===ATTR_KEY)a[1][h[2]]=!0;else if(u===CLOSE){if(selfClosing(a[0])&&p.length){var g=p[p.length-1][1];p.pop(),p[p.length-1][0][2][g]=T(a[0],a[1],a[2].length?a[2]:void 0)}}else if(u===VAR&&h[1]===TEXT)void 0===h[2]||null===h[2]?h[2]="":h[2]||(h[2]=t("",h[2])),Array.isArray(h[2][0])?a[2].push.apply(a[2],h[2]):a[2].push(h[2]);else if(u===TEXT)a[2].push(h[1]);else if(u!==ATTR_EQ&&u!==ATTR_BREAK)throw new Error("unhandled: "+u)}if(f[2].length>1&&/^\s*$/.test(f[2][0])&&f[2].shift(),f[2].length>2||2===f[2].length&&/\S/.test(f[2][1]))throw new Error("multiple root elements must be wrapped in an enclosing tag");return Array.isArray(f[2][0])&&"string"==typeof f[2][0][0]&&Array.isArray(f[2][0][2])&&(f[2][0]=T(f[2][0][0],f[2][0][1],f[2][0][2])),f[2][0]}};var hasOwn=Object.prototype.hasOwnProperty,closeRE=RegExp("^("+["area","base","basefont","bgsound","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr","!--","animate","animateTransform","circle","cursor","desc","ellipse","feBlend","feColorMatrix","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","font-face-format","font-face-name","font-face-uri","glyph","glyphRef","hkern","image","line","missing-glyph","mpath","path","polygon","polyline","rect","set","stop","tref","use","view","vkern"].join("|")+")(?:[.#][a-zA-Z0-9-￿_:-]+)*$");
},{"hyperscript-attribute-to-property":38}],40:[function(require,module,exports){
var indexOf=[].indexOf;module.exports=function(e,n){if(indexOf)return e.indexOf(n);for(var r=0;r<e.length;++r)if(e[r]===n)return r;return-1};
},{}],41:[function(require,module,exports){
var toString={}.toString;module.exports=Array.isArray||function(r){return"[object Array]"==toString.call(r)};
},{}],42:[function(require,module,exports){
(function (global){
function debounce(t,e,n){function r(e){var n=s,r=v;return s=v=void 0,p=e,y=t.apply(r,n)}function i(t){return p=t,j=setTimeout(u,e),d?r(t):y}function o(t){var n=t-g,r=t-p,i=e-n;return O?nativeMin(i,m-r):i}function a(t){var n=t-g,r=t-p;return void 0===g||n>=e||n<0||O&&r>=m}function u(){var t=now();if(a(t))return f(t);j=setTimeout(u,o(t))}function f(t){return j=void 0,T&&s?r(t):(s=v=void 0,y)}function c(){void 0!==j&&clearTimeout(j),p=0,s=g=v=j=void 0}function l(){return void 0===j?y:f(now())}function b(){var t=now(),n=a(t);if(s=arguments,v=this,g=t,n){if(void 0===j)return i(g);if(O)return j=setTimeout(u,e),r(g)}return void 0===j&&(j=setTimeout(u,e)),y}var s,v,m,y,j,g,p=0,d=!1,O=!1,T=!0;if("function"!=typeof t)throw new TypeError(FUNC_ERROR_TEXT);return e=toNumber(e)||0,isObject(n)&&(d=!!n.leading,O="maxWait"in n,m=O?nativeMax(toNumber(n.maxWait)||0,e):m,T="trailing"in n?!!n.trailing:T),b.cancel=c,b.flush=l,b}function throttle(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new TypeError(FUNC_ERROR_TEXT);return isObject(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),debounce(t,e,{leading:r,maxWait:e,trailing:i})}function isObject(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function isObjectLike(t){return!!t&&"object"==typeof t}function isSymbol(t){return"symbol"==typeof t||isObjectLike(t)&&objectToString.call(t)==symbolTag}function toNumber(t){if("number"==typeof t)return t;if(isSymbol(t))return NAN;if(isObject(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=isObject(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(reTrim,"");var n=reIsBinary.test(t);return n||reIsOctal.test(t)?freeParseInt(t.slice(2),n?2:8):reIsBadHex.test(t)?NAN:+t}var FUNC_ERROR_TEXT="Expected a function",NAN=NaN,symbolTag="[object Symbol]",reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),objectProto=Object.prototype,objectToString=objectProto.toString,nativeMax=Math.max,nativeMin=Math.min,now=function(){return root.Date.now()};module.exports=throttle;
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],43:[function(require,module,exports){
var wildcard=require("wildcard"),reMimePartSplit=/[\/\+\.]/;module.exports=function(r,e){function i(e){var i=wildcard(e,r,reMimePartSplit);return i&&i.length>=2}return e?i(e.split(";")[0]):i};
},{"wildcard":79}],44:[function(require,module,exports){
"use strict";function toElement(e){!range&&doc.createRange&&(range=doc.createRange(),range.selectNode(doc.body));var t;return range&&range.createContextualFragment?t=range.createContextualFragment(e):(t=doc.createElement("body"),t.innerHTML=e),t.childNodes[0]}function compareNodeNames(e,t){var n=e.nodeName,o=t.nodeName;return n===o||!!(t.actualize&&n.charCodeAt(0)<91&&o.charCodeAt(0)>90)&&n===o.toUpperCase()}function createElementNS(e,t){return t&&t!==NS_XHTML?doc.createElementNS(t,e):doc.createElement(e)}function moveChildren(e,t){for(var n=e.firstChild;n;){var o=n.nextSibling;t.appendChild(n),n=o}return t}function morphAttrs(e,t){var n,o,r,a,i,d=t.attributes;for(n=d.length-1;n>=0;--n)o=d[n],r=o.name,a=o.namespaceURI,i=o.value,a?(r=o.localName||r,e.getAttributeNS(a,r)!==i&&e.setAttributeNS(a,r,i)):e.getAttribute(r)!==i&&e.setAttribute(r,i);for(d=e.attributes,n=d.length-1;n>=0;--n)o=d[n],!1!==o.specified&&(r=o.name,a=o.namespaceURI,a?(r=o.localName||r,hasAttributeNS(t,a,r)||e.removeAttributeNS(a,r)):hasAttributeNS(t,null,r)||e.removeAttribute(r))}function syncBooleanAttrProp(e,t,n){e[n]!==t[n]&&(e[n]=t[n],e[n]?e.setAttribute(n,""):e.removeAttribute(n,""))}function noop(){}function defaultGetNodeKey(e){return e.id}function morphdomFactory(e){return function(t,n,o){function r(e){N?N.push(e):N=[e]}function a(e,t){if(e.nodeType===ELEMENT_NODE)for(var n=e.firstChild;n;){var o=void 0;t&&(o=f(n))?r(o):(h(n),n.firstChild&&a(n,t)),n=n.nextSibling}}function i(e,t,n){!1!==v(e)&&(t&&t.removeChild(e),h(e),a(e,n))}function d(e){if(e.nodeType===ELEMENT_NODE)for(var t=e.firstChild;t;){var n=f(t);n&&(S[n]=t),d(t),t=t.nextSibling}}function l(e){m(e);for(var t=e.firstChild;t;){var n=t.nextSibling,o=f(t);if(o){var r=S[o];r&&compareNodeNames(t,r)&&(t.parentNode.replaceChild(r,t),u(r,t))}l(t),t=n}}function u(o,a,d){var c,N=f(a);if(N&&delete S[N],!n.isSameNode||!n.isSameNode(t)){if(!d){if(!1===p(o,a))return;if(e(o,a),E(o),!1===b(o,a))return}if("TEXTAREA"!==o.nodeName){var m,v,h,A,T=a.firstChild,g=o.firstChild;e:for(;T;){for(h=T.nextSibling,m=f(T);g;){if(v=g.nextSibling,T.isSameNode&&T.isSameNode(g)){T=h,g=v;continue e}c=f(g);var C=g.nodeType,y=void 0;if(C===T.nodeType&&(C===ELEMENT_NODE?(m?m!==c&&((A=S[m])?g.nextSibling===A?y=!1:(o.insertBefore(A,g),v=g.nextSibling,c?r(c):i(g,o,!0),g=A):y=!1):c&&(y=!1),(y=!1!==y&&compareNodeNames(g,T))&&u(g,T)):C!==TEXT_NODE&&C!=COMMENT_NODE||(y=!0,g.nodeValue=T.nodeValue)),y){T=h,g=v;continue e}c?r(c):i(g,o,!0),g=v}if(m&&(A=S[m])&&compareNodeNames(A,T))o.appendChild(A),u(A,T);else{var O=s(T);!1!==O&&(O&&(T=O),T.actualize&&(T=T.actualize(o.ownerDocument||doc)),o.appendChild(T),l(T))}T=h,g=v}for(;g;)v=g.nextSibling,(c=f(g))?r(c):i(g,o,!0),g=v}var M=specialElHandlers[o.nodeName];M&&M(o,a)}}if(o||(o={}),"string"==typeof n)if("#document"===t.nodeName||"HTML"===t.nodeName){var c=n;n=doc.createElement("html"),n.innerHTML=c}else n=toElement(n);var N,f=o.getNodeKey||defaultGetNodeKey,s=o.onBeforeNodeAdded||noop,m=o.onNodeAdded||noop,p=o.onBeforeElUpdated||noop,E=o.onElUpdated||noop,v=o.onBeforeNodeDiscarded||noop,h=o.onNodeDiscarded||noop,b=o.onBeforeElChildrenUpdated||noop,A=!0===o.childrenOnly,S={};d(t);var T=t,g=T.nodeType,C=n.nodeType;if(!A)if(g===ELEMENT_NODE)C===ELEMENT_NODE?compareNodeNames(t,n)||(h(t),T=moveChildren(t,createElementNS(n.nodeName,n.namespaceURI))):T=n;else if(g===TEXT_NODE||g===COMMENT_NODE){if(C===g)return T.nodeValue=n.nodeValue,T;T=n}if(T===n)h(t);else if(u(T,n,A),N)for(var y=0,O=N.length;y<O;y++){var M=S[N[y]];M&&i(M,M.parentNode,!1)}return!A&&T!==t&&t.parentNode&&(T.actualize&&(T=T.actualize(t.ownerDocument||doc)),t.parentNode.replaceChild(T,t)),T}}var range,NS_XHTML="http://www.w3.org/1999/xhtml",doc="undefined"==typeof document?void 0:document,testEl=doc?doc.body||doc.createElement("div"):{},actualHasAttributeNS;actualHasAttributeNS=testEl.hasAttributeNS?function(e,t,n){return e.hasAttributeNS(t,n)}:testEl.hasAttribute?function(e,t,n){return e.hasAttribute(n)}:function(e,t,n){return null!=e.getAttributeNode(t,n)};var hasAttributeNS=actualHasAttributeNS,specialElHandlers={OPTION:function(e,t){syncBooleanAttrProp(e,t,"selected")},INPUT:function(e,t){syncBooleanAttrProp(e,t,"checked"),syncBooleanAttrProp(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),hasAttributeNS(t,null,"value")||e.removeAttribute("value")},TEXTAREA:function(e,t){var n=t.value;e.value!==n&&(e.value=n);var o=e.firstChild;if(o){var r=o.nodeValue;if(r==n||!n&&r==e.placeholder)return;o.nodeValue=n}},SELECT:function(e,t){if(!hasAttributeNS(t,null,"multiple")){for(var n=0,o=t.firstChild;o;){var r=o.nodeName;if(r&&"OPTION"===r.toUpperCase()){if(hasAttributeNS(o,null,"selected")){n;break}n++}o=o.nextSibling}e.selectedIndex=n}}},ELEMENT_NODE=1,TEXT_NODE=3,COMMENT_NODE=8,morphdom=morphdomFactory(morphAttrs);module.exports=morphdom;
},{}],45:[function(require,module,exports){
function parse(e){if(e=String(e),!(e.length>1e4)){var r=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(r){var a=parseFloat(r[1]);switch((r[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return a*y;case"days":case"day":case"d":return a*d;case"hours":case"hour":case"hrs":case"hr":case"h":return a*h;case"minutes":case"minute":case"mins":case"min":case"m":return a*m;case"seconds":case"second":case"secs":case"sec":case"s":return a*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}function fmtShort(e){return e>=d?Math.round(e/d)+"d":e>=h?Math.round(e/h)+"h":e>=m?Math.round(e/m)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function fmtLong(e){return plural(e,d,"day")||plural(e,h,"hour")||plural(e,m,"minute")||plural(e,s,"second")||e+" ms"}function plural(s,e,r){if(!(s<e))return s<1.5*e?Math.floor(s/e)+" "+r:Math.ceil(s/e)+" "+r+"s"}var s=1e3,m=60*s,h=60*m,d=24*h,y=365.25*d;module.exports=function(s,e){e=e||{};var r=typeof s;if("string"===r&&s.length>0)return parse(s);if("number"===r&&!1===isNaN(s))return e.long?fmtLong(s):fmtShort(s);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(s))};
},{}],46:[function(require,module,exports){
module.exports=function(){function n(n){var t=e[n]?e[n]:[],f=n.indexOf(":"),o=-1===f?[n]:[n.substring(0,f),n.substring(f+1)],i=Object.keys(e),r=0,s=i.length;for(r;r<s;r++){var u=i[r];if("*"===u&&(t=t.concat(e[u])),2===o.length&&o[0]===u){t=t.concat(e[u]);break}}return t}function t(n,t,f){var e=0,o=t.length;for(e;e<o&&t[e];e++)t[e].event=n,t[e].apply(t[e],f)}var f={},e=f._fns={};return f.emit=function(f,e,o,i,r,s,u){var c=n(f);c.length&&t(f,c,[e,o,i,r,s,u])},f.on=function(n,t){e[n]||(e[n]=[]),e[n].push(t)},f.once=function(n,t){function e(){t.apply(this,arguments),f.off(n,e)}this.on(n,e)},f.off=function(n,t){var f=[];if(n&&t){var e=this._fns[n],o=0,i=e.length;for(o;o<i;o++)e[o]!==t&&f.push(e[o])}f.length?this._fns[n]=f:delete this._fns[n]},f};
},{}],47:[function(require,module,exports){
"use strict";function nanoraf(n,r){assert.equal(typeof n,"function","nanoraf: render should be a function"),assert.ok("function"==typeof r||void 0===r,"nanoraf: raf should be a function or undefined"),r||(r=window.requestAnimationFrame);var e=!1,a=null;return function(){null!==a||e||(e=!0,r(function(){e=!1;for(var r=a.length,o=new Array(r),t=0;t<r;t++)o[t]=a[t];n.apply(n,o),a=null})),a=arguments}}var assert=require("assert");module.exports=nanoraf;
},{"assert":3}],48:[function(require,module,exports){
function turnon(t,e){watch[t][0]&&0===watch[t][2]&&(watch[t][0](e),watch[t][2]=1)}function turnoff(t,e){watch[t][1]&&1===watch[t][2]&&(watch[t][1](e),watch[t][2]=0)}function eachAttr(t,e,a){var r=t.target.getAttribute(KEY_ATTR);if(sameOrigin(t.oldValue,r))return void(watch[r]=watch[t.oldValue]);watch[t.oldValue]&&a(t.oldValue,t.target),watch[r]&&e(r,t.target)}function sameOrigin(t,e){return!(!t||!e)&&watch[t][3]===watch[e][3]}function eachMutation(t,e){for(var a=Object.keys(watch),r=0;r<t.length;r++){if(t[r]&&t[r].getAttribute&&t[r].getAttribute(KEY_ATTR)){var n=t[r].getAttribute(KEY_ATTR);a.forEach(function(a){n===a&&e(a,t[r])})}t[r].childNodes.length>0&&eachMutation(t[r].childNodes,e)}}var document=require("global/document"),window=require("global/window"),watch=Object.create(null),KEY_ID="onloadid"+(new Date%9e6).toString(36),KEY_ATTR="data-"+KEY_ID,INDEX=0;if(window&&window.MutationObserver){var observer=new MutationObserver(function(t){if(!(Object.keys(watch).length<1))for(var e=0;e<t.length;e++)t[e].attributeName!==KEY_ATTR?(eachMutation(t[e].removedNodes,turnoff),eachMutation(t[e].addedNodes,turnon)):eachAttr(t[e],turnon,turnoff)});observer.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0,attributeFilter:[KEY_ATTR]})}module.exports=function t(e,a,r,n){return a=a||function(){},r=r||function(){},e.setAttribute(KEY_ATTR,"o"+INDEX),watch["o"+INDEX]=[a,r,0,n||t.caller],INDEX+=1,e};
},{"global/document":34,"global/window":35}],49:[function(require,module,exports){
(function (global){
var rvalidchars=/^[\],:{}\s]*$/,rvalidescape=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rvalidtokens=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rtrimLeft=/^\s+/,rtrimRight=/\s+$/;module.exports=function(r){return"string"==typeof r&&r?(r=r.replace(rtrimLeft,"").replace(rtrimRight,""),global.JSON&&JSON.parse?JSON.parse(r):rvalidchars.test(r.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,""))?new Function("return "+r)():void 0):null};
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],50:[function(require,module,exports){
exports.encode=function(e){var n="";for(var o in e)e.hasOwnProperty(o)&&(n.length&&(n+="&"),n+=encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return n},exports.decode=function(e){for(var n={},o=e.split("&"),t=0,r=o.length;t<r;t++){var d=o[t].split("=");n[decodeURIComponent(d[0])]=decodeURIComponent(d[1])}return n};
},{}],51:[function(require,module,exports){
var re=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];module.exports=function(r){var e=r,t=r.indexOf("["),s=r.indexOf("]");-1!=t&&-1!=s&&(r=r.substring(0,t)+r.substring(t,s).replace(/:/g,";")+r.substring(s,r.length));for(var o=re.exec(r||""),a={},u=14;u--;)a[parts[u]]=o[u]||"";return-1!=t&&-1!=s&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a};
},{}],52:[function(require,module,exports){
function prettierBytes(e){if("number"!=typeof e||isNaN(e))throw new TypeError("Expected a number, got "+typeof e);var t=e<0,r=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(t&&(e=-e),e<1)return(t?"-":"")+e+" B";var o=Math.min(Math.floor(Math.log(e)/Math.log(1e3)),r.length-1);e=Number(e/Math.pow(1e3,o));var B=r[o];return e>=10||e%1==0?(t?"-":"")+e.toFixed(0)+" "+B:(t?"-":"")+e.toFixed(1)+" "+B}module.exports=prettierBytes;
},{}],53:[function(require,module,exports){
"use strict";function decode(e){return decodeURIComponent(e.replace(/\+/g," "))}function querystring(e){for(var r,n=/([^=?&]+)=?([^&]*)/g,t={};r=n.exec(e);t[decode(r[1])]=decode(r[2]));return t}function querystringify(e,r){r=r||"";var n=[];"string"!=typeof r&&(r="?");for(var t in e)has.call(e,t)&&n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n.length?r+n.join("&"):""}var has=Object.prototype.hasOwnProperty;exports.stringify=querystringify,exports.parse=querystring;
},{}],54:[function(require,module,exports){
"use strict";module.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e};
},{}],55:[function(require,module,exports){
!function(e,r){"function"==typeof define&&define.amd?define(r):"object"==typeof exports?module.exports=r():e.resolveUrl=r()}(this,function(){function e(){var e=arguments.length;if(0===e)throw new Error("resolveUrl requires at least one argument; got none.");var r=document.createElement("base");if(r.href=arguments[0],1===e)return r.href;var t=document.getElementsByTagName("head")[0];t.insertBefore(r,t.firstChild);for(var n,o=document.createElement("a"),f=1;f<e;f++)o.href=arguments[f],n=o.href,r.href=n;return t.removeChild(r),n}return e});
},{}],56:[function(require,module,exports){
(function (process){
module.exports=function(n,c){function o(n){function o(){c&&c(n,u),c=null}r?process.nextTick(o):o()}function t(n,c,t){u[n]=t,(0==--f||c)&&o(c)}var u,f,i,r=!0;Array.isArray(n)?(u=[],f=n.length):(i=Object.keys(n),u={},f=i.length),f?i?i.forEach(function(c){n[c](function(n,o){t(c,n,o)})}):n.forEach(function(n,c){n(function(n,o){t(c,n,o)})}):o(null),r=!1};
}).call(this,require('_process'))

},{"_process":9}],57:[function(require,module,exports){
function lookup(e,r){"object"==typeof e&&(r=e,e=void 0),r=r||{};var o,n=url(e),c=n.source,t=n.id,a=n.path,u=cache[t]&&a in cache[t].nsps,p=r.forceNew||r["force new connection"]||!1===r.multiplex||u;return p?(debug("ignoring socket cache for %s",c),o=Manager(c,r)):(cache[t]||(debug("new io instance for %s",c),cache[t]=Manager(c,r)),o=cache[t]),n.query&&!r.query?r.query=n.query:r&&"object"==typeof r.query&&(r.query=encodeQueryString(r.query)),o.socket(n.path,r)}function encodeQueryString(e){var r=[];for(var o in e)e.hasOwnProperty(o)&&r.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return r.join("&")}var url=require("./url"),parser=require("socket.io-parser"),Manager=require("./manager"),debug=require("debug")("socket.io-client");module.exports=exports=lookup;var cache=exports.managers={};exports.protocol=parser.protocol,exports.connect=lookup,exports.Manager=require("./manager"),exports.Socket=require("./socket");
},{"./manager":58,"./socket":60,"./url":61,"debug":14,"socket.io-parser":63}],58:[function(require,module,exports){
function Manager(t,e){if(!(this instanceof Manager))return new Manager(t,e);t&&"object"==typeof t&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=e.parser||parser;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==e.autoConnect,this.autoConnect&&this.open()}var eio=require("engine.io-client"),Socket=require("./socket"),Emitter=require("component-emitter"),parser=require("socket.io-parser"),on=require("./on"),bind=require("component-bind"),debug=require("debug")("socket.io-client:manager"),indexOf=require("indexof"),Backoff=require("backo2"),has=Object.prototype.hasOwnProperty;module.exports=Manager,Manager.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var t in this.nsps)has.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},Manager.prototype.updateSocketIds=function(){for(var t in this.nsps)has.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))},Manager.prototype.generateId=function(t){return("/"===t?"":t+"#")+this.engine.id},Emitter(Manager.prototype),Manager.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},Manager.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},Manager.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},Manager.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},Manager.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},Manager.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},Manager.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},Manager.prototype.open=Manager.prototype.connect=function(t,e){if(debug("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;debug("opening %s",this.uri),this.engine=eio(this.uri,this.opts);var n=this.engine,o=this;this.readyState="opening",this.skipReconnect=!1;var i=on(n,"open",function(){o.onopen(),t&&t()}),s=on(n,"error",function(e){if(debug("connect_error"),o.cleanup(),o.readyState="closed",o.emitAll("connect_error",e),t){var n=new Error("Connection error");n.data=e,t(n)}else o.maybeReconnectOnOpen()});if(!1!==this._timeout){var r=this._timeout;debug("connect attempt will timeout after %d",r);var c=setTimeout(function(){debug("connect attempt timed out after %d",r),i.destroy(),n.close(),n.emit("error","timeout"),o.emitAll("connect_timeout",r)},r);this.subs.push({destroy:function(){clearTimeout(c)}})}return this.subs.push(i),this.subs.push(s),this},Manager.prototype.onopen=function(){debug("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(on(t,"data",bind(this,"ondata"))),this.subs.push(on(t,"ping",bind(this,"onping"))),this.subs.push(on(t,"pong",bind(this,"onpong"))),this.subs.push(on(t,"error",bind(this,"onerror"))),this.subs.push(on(t,"close",bind(this,"onclose"))),this.subs.push(on(this.decoder,"decoded",bind(this,"ondecoded")))},Manager.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},Manager.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},Manager.prototype.ondata=function(t){this.decoder.add(t)},Manager.prototype.ondecoded=function(t){this.emit("packet",t)},Manager.prototype.onerror=function(t){debug("error",t),this.emitAll("error",t)},Manager.prototype.socket=function(t,e){function n(){~indexOf(i.connecting,o)||i.connecting.push(o)}var o=this.nsps[t];if(!o){o=new Socket(this,t,e),this.nsps[t]=o;var i=this;o.on("connecting",n),o.on("connect",function(){o.id=i.generateId(t)}),this.autoConnect&&n()}return o},Manager.prototype.destroy=function(t){var e=indexOf(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},Manager.prototype.packet=function(t){debug("writing packet %j",t);var e=this;t.query&&0===t.type&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(n){for(var o=0;o<n.length;o++)e.engine.write(n[o],t.options);e.encoding=!1,e.processPacketQueue()}))},Manager.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},Manager.prototype.cleanup=function(){debug("cleanup");for(var t=this.subs.length,e=0;e<t;e++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},Manager.prototype.close=Manager.prototype.disconnect=function(){debug("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},Manager.prototype.onclose=function(t){debug("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},Manager.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)debug("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();debug("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var n=setTimeout(function(){t.skipReconnect||(debug("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open(function(e){e?(debug("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(debug("reconnect success"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(n)}})}},Manager.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)};
},{"./on":59,"./socket":60,"backo2":4,"component-bind":10,"component-emitter":11,"debug":14,"engine.io-client":17,"indexof":40,"socket.io-parser":63}],59:[function(require,module,exports){
function on(n,o,e){return n.on(o,e),{destroy:function(){n.removeListener(o,e)}}}module.exports=on;
},{}],60:[function(require,module,exports){
function Socket(t,e,s){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,s&&s.query&&(this.query=s.query),this.io.autoConnect&&this.open()}var parser=require("socket.io-parser"),Emitter=require("component-emitter"),toArray=require("to-array"),on=require("./on"),bind=require("component-bind"),debug=require("debug")("socket.io-client:socket");module.exports=exports=Socket;var events={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},emit=Emitter.prototype.emit;Emitter(Socket.prototype),Socket.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[on(t,"open",bind(this,"onopen")),on(t,"packet",bind(this,"onpacket")),on(t,"close",bind(this,"onclose"))]}},Socket.prototype.open=Socket.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},Socket.prototype.send=function(){var t=toArray(arguments);return t.unshift("message"),this.emit.apply(this,t),this},Socket.prototype.emit=function(t){if(events.hasOwnProperty(t))return emit.apply(this,arguments),this;var e=toArray(arguments),s={type:parser.EVENT,data:e};return s.options={},s.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(debug("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),s.id=this.ids++),this.connected?this.packet(s):this.sendBuffer.push(s),delete this.flags,this},Socket.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},Socket.prototype.onopen=function(){debug("transport is open - connecting"),"/"!==this.nsp&&(this.query?this.packet({type:parser.CONNECT,query:this.query}):this.packet({type:parser.CONNECT}))},Socket.prototype.onclose=function(t){debug("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},Socket.prototype.onpacket=function(t){if(t.nsp===this.nsp)switch(t.type){case parser.CONNECT:this.onconnect();break;case parser.EVENT:case parser.BINARY_EVENT:this.onevent(t);break;case parser.ACK:case parser.BINARY_ACK:this.onack(t);break;case parser.DISCONNECT:this.ondisconnect();break;case parser.ERROR:this.emit("error",t.data)}},Socket.prototype.onevent=function(t){var e=t.data||[];debug("emitting event %j",e),null!=t.id&&(debug("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?emit.apply(this,e):this.receiveBuffer.push(e)},Socket.prototype.ack=function(t){var e=this,s=!1;return function(){if(!s){s=!0;var i=toArray(arguments);debug("sending ack %j",i),e.packet({type:parser.ACK,id:t,data:i})}}},Socket.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(debug("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):debug("bad ack %s",t.id)},Socket.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},Socket.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)emit.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},Socket.prototype.ondisconnect=function(){debug("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},Socket.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},Socket.prototype.close=Socket.prototype.disconnect=function(){return this.connected&&(debug("performing disconnect (%s)",this.nsp),this.packet({type:parser.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},Socket.prototype.compress=function(t){return this.flags=this.flags||{},this.flags.compress=t,this};
},{"./on":59,"component-bind":10,"component-emitter":11,"debug":14,"socket.io-parser":63,"to-array":65}],61:[function(require,module,exports){
(function (global){
function url(o,t){var r=o;t=t||global.location,null==o&&(o=t.protocol+"//"+t.host),"string"==typeof o&&("/"===o.charAt(0)&&(o="/"===o.charAt(1)?t.protocol+o:t.host+o),/^(https?|wss?):\/\//.test(o)||(debug("protocol-less url %s",o),o=void 0!==t?t.protocol+"//"+o:"https://"+o),debug("parse %s",o),r=parseuri(o)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var p=-1!==r.host.indexOf(":"),s=p?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port,r.href=r.protocol+"://"+s+(t&&t.port===r.port?"":":"+r.port),r}var parseuri=require("parseuri"),debug=require("debug")("socket.io-client:url");module.exports=url;
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"debug":14,"parseuri":51}],62:[function(require,module,exports){
(function (global){
function _deconstructPacket(t,e){if(!t)return t;if(isBuf(t)){var r={_placeholder:!0,num:e.length};return e.push(t),r}if(isArray(t)){for(var o=new Array(t.length),n=0;n<t.length;n++)o[n]=_deconstructPacket(t[n],e);return o}if("object"==typeof t&&!(t instanceof Date)){var o={};for(var a in t)o[a]=_deconstructPacket(t[a],e);return o}return t}function _reconstructPacket(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(isArray(t))for(var r=0;r<t.length;r++)t[r]=_reconstructPacket(t[r],e);else if("object"==typeof t)for(var o in t)t[o]=_reconstructPacket(t[o],e);return t}var isArray=require("isarray"),isBuf=require("./is-buffer"),toString=Object.prototype.toString,withNativeBlob="function"==typeof global.Blob||"[object BlobConstructor]"===toString.call(global.Blob),withNativeFile="function"==typeof global.File||"[object FileConstructor]"===toString.call(global.File);exports.deconstructPacket=function(t){var e=[],r=t.data,o=t;return o.data=_deconstructPacket(r,e),o.attachments=e.length,{packet:o,buffers:e}},exports.reconstructPacket=function(t,e){return t.data=_reconstructPacket(t.data,e),t.attachments=void 0,t},exports.removeBlobs=function(t,e){function r(t,a,i){if(!t)return t;if(withNativeBlob&&t instanceof Blob||withNativeFile&&t instanceof File){o++;var c=new FileReader;c.onload=function(){i?i[a]=this.result:n=this.result,--o||e(n)},c.readAsArrayBuffer(t)}else if(isArray(t))for(var u=0;u<t.length;u++)r(t[u],u,t);else if("object"==typeof t&&!isBuf(t))for(var f in t)r(t[f],f,t)}var o=0,n=t;r(n),o||e(n)};
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./is-buffer":64,"isarray":41}],63:[function(require,module,exports){
function Encoder(){}function encodeAsString(r){var t=""+r.type;return exports.BINARY_EVENT!==r.type&&exports.BINARY_ACK!==r.type||(t+=r.attachments+"-"),r.nsp&&"/"!==r.nsp&&(t+=r.nsp+","),null!=r.id&&(t+=r.id),null!=r.data&&(t+=JSON.stringify(r.data)),debug("encoded %j as %s",r,t),t}function encodeAsBinary(r,t){function e(r){var e=binary.deconstructPacket(r),o=encodeAsString(e.packet),n=e.buffers;n.unshift(o),t(n)}binary.removeBlobs(r,e)}function Decoder(){this.reconstructor=null}function decodeString(r){var t=0,e={type:Number(r.charAt(0))};if(null==exports.types[e.type])return error();if(exports.BINARY_EVENT===e.type||exports.BINARY_ACK===e.type){for(var o="";"-"!==r.charAt(++t)&&(o+=r.charAt(t),t!=r.length););if(o!=Number(o)||"-"!==r.charAt(t))throw new Error("Illegal attachments");e.attachments=Number(o)}if("/"===r.charAt(t+1))for(e.nsp="";++t;){var n=r.charAt(t);if(","===n)break;if(e.nsp+=n,t===r.length)break}else e.nsp="/";var s=r.charAt(t+1);if(""!==s&&Number(s)==s){for(e.id="";++t;){var n=r.charAt(t);if(null==n||Number(n)!=n){--t;break}if(e.id+=r.charAt(t),t===r.length)break}e.id=Number(e.id)}return r.charAt(++t)&&(e=tryParse(e,r.substr(t))),debug("decoded %s as %j",r,e),e}function tryParse(r,t){try{r.data=JSON.parse(t)}catch(r){return error()}return r}function BinaryReconstructor(r){this.reconPack=r,this.buffers=[]}function error(){return{type:exports.ERROR,data:"parser error"}}var debug=require("debug")("socket.io-parser"),Emitter=require("component-emitter"),hasBin=require("has-binary2"),binary=require("./binary"),isBuf=require("./is-buffer");exports.protocol=4,exports.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],exports.CONNECT=0,exports.DISCONNECT=1,exports.EVENT=2,exports.ACK=3,exports.ERROR=4,exports.BINARY_EVENT=5,exports.BINARY_ACK=6,exports.Encoder=Encoder,exports.Decoder=Decoder,Encoder.prototype.encode=function(r,t){if(r.type!==exports.EVENT&&r.type!==exports.ACK||!hasBin(r.data)||(r.type=r.type===exports.EVENT?exports.BINARY_EVENT:exports.BINARY_ACK),debug("encoding packet %j",r),exports.BINARY_EVENT===r.type||exports.BINARY_ACK===r.type)encodeAsBinary(r,t);else{t([encodeAsString(r)])}},Emitter(Decoder.prototype),Decoder.prototype.add=function(r){var t;if("string"==typeof r)t=decodeString(r),exports.BINARY_EVENT===t.type||exports.BINARY_ACK===t.type?(this.reconstructor=new BinaryReconstructor(t),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!isBuf(r)&&!r.base64)throw new Error("Unknown type: "+r);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(r))&&(this.reconstructor=null,this.emit("decoded",t))}},Decoder.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},BinaryReconstructor.prototype.takeBinaryData=function(r){if(this.buffers.push(r),this.buffers.length===this.reconPack.attachments){var t=binary.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},BinaryReconstructor.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]};
},{"./binary":62,"./is-buffer":64,"component-emitter":11,"debug":14,"has-binary2":36}],64:[function(require,module,exports){
(function (global){
function isBuf(f){return global.Buffer&&global.Buffer.isBuffer(f)||global.ArrayBuffer&&f instanceof ArrayBuffer}module.exports=isBuf;
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],65:[function(require,module,exports){
function toArray(r,o){var t=[];o=o||0;for(var a=o||0;a<r.length;a++)t[a-o]=r[a];return t}module.exports=toArray;
},{}],66:[function(require,module,exports){
"use strict";function encode(e){return btoa(unescape(encodeURIComponent(e)))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.encode=encode;var _window=window,btoa=_window.btoa,isSupported=exports.isSupported="btoa"in window;
},{}],67:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function newRequest(){return new window.XMLHttpRequest}function resolveUrl(e,r){return(0,_resolveUrl2.default)(e,r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.newRequest=newRequest,exports.resolveUrl=resolveUrl;var _resolveUrl=require("resolve-url"),_resolveUrl2=_interopRequireDefault(_resolveUrl);
},{"resolve-url":55}],68:[function(require,module,exports){
"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function getSource(e){if("function"==typeof e.slice&&void 0!==e.size)return new FileSource(e);throw new Error("source object may only be an instance of File or Blob in this environment")}var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSource=getSource;var FileSource=function(){function e(n){_classCallCheck(this,e),this._file=n,this.size=n.size}return _createClass(e,[{key:"slice",value:function(e,n){return this._file.slice(e,n)}},{key:"close",value:function(){}}]),e}();
},{}],69:[function(require,module,exports){
"use strict";function setItem(e,t){if(hasStorage)return localStorage.setItem(e,t)}function getItem(e){if(hasStorage)return localStorage.getItem(e)}function removeItem(e){if(hasStorage)return localStorage.removeItem(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.setItem=setItem,exports.getItem=getItem,exports.removeItem=removeItem;var hasStorage=!1;try{hasStorage="localStorage"in window;var key="tusSupport";localStorage.setItem(key,localStorage.getItem(key))}catch(e){if(e.code!==e.SECURITY_ERR&&e.code!==e.QUOTA_EXCEEDED_ERR)throw e;hasStorage=!1}var canStoreURLs=exports.canStoreURLs=hasStorage;
},{}],70:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var DetailedError=function(e){function t(e){var r=arguments.length<=1||void 0===arguments[1]?null:arguments[1],o=arguments.length<=2||void 0===arguments[2]?null:arguments[2];_classCallCheck(this,t);var n=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,e.message));n.originalRequest=o,n.causingError=r;var s=e.message;return null!=r&&(s+=", caused by "+r.toString()),null!=o&&(s+=", originated from request (response code: "+o.status+", response text: "+o.responseText+")"),n.message=s,n}return _inherits(t,e),t}(Error);exports.default=DetailedError;
},{}],71:[function(require,module,exports){
"use strict";function fingerprint(e){return["tus",e.name,e.type,e.size,e.lastModified].join("-")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=fingerprint;
},{}],72:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _upload=require("./upload"),_upload2=_interopRequireDefault(_upload),_storage=require("./node/storage"),defaultOptions=_upload2.default.defaultOptions;if("undefined"!=typeof window)var _window=window,XMLHttpRequest=_window.XMLHttpRequest,Blob=_window.Blob,isSupported=XMLHttpRequest&&Blob&&"function"==typeof Blob.prototype.slice;else var isSupported=!0;module.exports={Upload:_upload2.default,isSupported:isSupported,canStoreURLs:_storage.canStoreURLs,defaultOptions:defaultOptions};
},{"./node/storage":69,"./upload":73}],73:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function encodeMetadata(e){if(!Base64.isSupported)return"";var t=[];for(var r in e)t.push(r+" "+Base64.encode(e[r]));return t.join(",")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}();Object.defineProperty(exports,"__esModule",{value:!0});var _fingerprint=require("./fingerprint"),_fingerprint2=_interopRequireDefault(_fingerprint),_error=require("./error"),_error2=_interopRequireDefault(_error),_extend=require("extend"),_extend2=_interopRequireDefault(_extend),_request=require("./node/request"),_source=require("./node/source"),_base=require("./node/base64"),Base64=_interopRequireWildcard(_base),_storage=require("./node/storage"),Storage=_interopRequireWildcard(_storage),defaultOptions={endpoint:"",fingerprint:_fingerprint2.default,resume:!0,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,headers:{},chunkSize:1/0,withCredentials:!1,uploadUrl:null,uploadSize:null,overridePatchMethod:!1,retryDelays:null},Upload=function(){function e(t,r){_classCallCheck(this,e),this.options=(0,_extend2.default)(!0,{},defaultOptions,r),this.file=t,this.url=null,this._xhr=null,this._fingerprint=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0}return _createClass(e,[{key:"start",value:function(){var e=this,t=this.file;if(!t)return void this._emitError(new Error("tus: no file or stream to upload provided"));if(!this.options.endpoint)return void this._emitError(new Error("tus: no endpoint provided"));var r=this._source=(0,_source.getSource)(t,this.options.chunkSize);if(null!=this.options.uploadSize){var o=+this.options.uploadSize;if(isNaN(o))throw new Error("tus: cannot convert `uploadSize` option into a number");this._size=o}else{var o=r.size;if(null==o)throw new Error("tus: cannot automatically derive upload's size from input and must be specified manually using the `uploadSize` option");this._size=o}var i=this.options.retryDelays;if(null!=i){if("[object Array]"!==Object.prototype.toString.call(i))throw new Error("tus: the `retryDelays` option must either be an array or null");!function(){var t=e.options.onError;e.options.onError=function(r){e.options.onError=t,null!=e._offset&&e._offset>e._offsetBeforeRetry&&(e._retryAttempt=0);var o=!0;if("undefined"!=typeof window&&"navigator"in window&&!1===window.navigator.onLine&&(o=!1),!(e._retryAttempt<i.length&&null!=r.originalRequest&&o))return void e._emitError(r);var n=i[e._retryAttempt++];e._offsetBeforeRetry=e._offset,e.options.uploadUrl=e.url,e._retryTimeout=setTimeout(function(){e.start()},n)}}()}if(this._aborted=!1,null!=this.options.uploadUrl)return this.url=this.options.uploadUrl,void this._resumeUpload();if(this.options.resume){this._fingerprint=this.options.fingerprint(t);var n=Storage.getItem(this._fingerprint);if(null!=n)return this.url=n,void this._resumeUpload()}this._createUpload()}},{key:"abort",value:function(){null!==this._xhr&&(this._xhr.abort(),this._source.close(),this._aborted=!0),null!=this._retryTimeout&&(clearTimeout(this._retryTimeout),this._retryTimeout=null)}},{key:"_emitXhrError",value:function(e,t,r){this._emitError(new _error2.default(t,r,e))}},{key:"_emitError",value:function(e){if("function"!=typeof this.options.onError)throw e;this.options.onError(e)}},{key:"_emitSuccess",value:function(){"function"==typeof this.options.onSuccess&&this.options.onSuccess()}},{key:"_emitProgress",value:function(e,t){"function"==typeof this.options.onProgress&&this.options.onProgress(e,t)}},{key:"_emitChunkComplete",value:function(e,t,r){"function"==typeof this.options.onChunkComplete&&this.options.onChunkComplete(e,t,r)}},{key:"_setupXHR",value:function(e){e.setRequestHeader("Tus-Resumable","1.0.0");var t=this.options.headers;for(var r in t)e.setRequestHeader(r,t[r]);e.withCredentials=this.options.withCredentials}},{key:"_createUpload",value:function(){var e=this,t=(0,_request.newRequest)();t.open("POST",this.options.endpoint,!0),t.onload=function(){if(!(t.status>=200&&t.status<300))return void e._emitXhrError(t,new Error("tus: unexpected response while creating upload"));e.url=(0,_request.resolveUrl)(e.options.endpoint,t.getResponseHeader("Location")),e.options.resume&&Storage.setItem(e._fingerprint,e.url),e._offset=0,e._startUpload()},t.onerror=function(r){e._emitXhrError(t,new Error("tus: failed to create upload"),r)},this._setupXHR(t),t.setRequestHeader("Upload-Length",this._size);var r=encodeMetadata(this.options.metadata);""!==r&&t.setRequestHeader("Upload-Metadata",r),t.send(null)}},{key:"_resumeUpload",value:function(){var e=this,t=(0,_request.newRequest)();t.open("HEAD",this.url,!0),t.onload=function(){if(!(t.status>=200&&t.status<300))return e.options.resume&&Storage.removeItem(e._fingerprint),423===t.status?void e._emitXhrError(t,new Error("tus: upload is currently locked; retry later")):(e.url=null,void e._createUpload());var r=parseInt(t.getResponseHeader("Upload-Offset"),10);if(isNaN(r))return void e._emitXhrError(t,new Error("tus: invalid or missing offset value"));var o=parseInt(t.getResponseHeader("Upload-Length"),10);return isNaN(o)?void e._emitXhrError(t,new Error("tus: invalid or missing length value")):r===o?(e._emitProgress(o,o),void e._emitSuccess()):(e._offset=r,void e._startUpload())},t.onerror=function(r){e._emitXhrError(t,new Error("tus: failed to resume upload"),r)},this._setupXHR(t),t.send(null)}},{key:"_startUpload",value:function(){var e=this;if(!this._aborted){var t=this._xhr=(0,_request.newRequest)();this.options.overridePatchMethod?(t.open("POST",this.url,!0),t.setRequestHeader("X-HTTP-Method-Override","PATCH")):t.open("PATCH",this.url,!0),t.onload=function(){if(!(t.status>=200&&t.status<300))return void e._emitXhrError(t,new Error("tus: unexpected response while uploading chunk"));var r=parseInt(t.getResponseHeader("Upload-Offset"),10);return isNaN(r)?void e._emitXhrError(t,new Error("tus: invalid or missing offset value")):(e._emitProgress(r,e._size),e._emitChunkComplete(r-e._offset,r,e._size),e._offset=r,r==e._size?(e._emitSuccess(),void e._source.close()):void e._startUpload())},t.onerror=function(r){e._aborted||e._emitXhrError(t,new Error("tus: failed to upload chunk at offset "+e._offset),r)},"upload"in t&&(t.upload.onprogress=function(t){t.lengthComputable&&e._emitProgress(r+t.loaded,e._size)}),this._setupXHR(t),t.setRequestHeader("Upload-Offset",this._offset),t.setRequestHeader("Content-Type","application/offset+octet-stream");var r=this._offset,o=this._offset+this.options.chunkSize;(o===1/0||o>this._size)&&(o=this._size),t.send(this._source.slice(r,o))}}}]),e}();Upload.defaultOptions=defaultOptions,exports.default=Upload;
},{"./error":70,"./fingerprint":71,"./node/base64":66,"./node/request":67,"./node/source":68,"./node/storage":69,"extend":31}],74:[function(require,module,exports){
(function (global){
"use strict";function lolcation(e){e=e||global.location||{};var o,t={},r=typeof e;if("blob:"===e.protocol)t=new URL(unescape(e.pathname),{});else if("string"===r){t=new URL(e,{});for(o in ignore)delete t[o]}else if("object"===r){for(o in e)o in ignore||(t[o]=e[o]);void 0===t.slashes&&(t.slashes=slashes.test(e.href))}return t}function extractProtocol(e){var o=protocolre.exec(e);return{protocol:o[1]?o[1].toLowerCase():"",slashes:!!o[2],rest:o[3]}}function resolve(e,o){for(var t=(o||"/").split("/").slice(0,-1).concat(e.split("/")),r=t.length,s=t[r-1],a=!1,n=0;r--;)"."===t[r]?t.splice(r,1):".."===t[r]?(t.splice(r,1),n++):n&&(0===r&&(a=!0),t.splice(r,1),n--);return a&&t.unshift(""),"."!==s&&".."!==s||t.push(""),t.join("/")}function URL(e,o,t){if(!(this instanceof URL))return new URL(e,o,t);var r,s,a,n,l,i,h=rules.slice(),c=typeof o,p=this,u=0;for("object"!==c&&"string"!==c&&(t=o,o=null),t&&"function"!=typeof t&&(t=qs.parse),o=lolcation(o),s=extractProtocol(e||""),r=!s.protocol&&!s.slashes,p.slashes=s.slashes||r&&o.slashes,p.protocol=s.protocol||o.protocol||"",e=s.rest,s.slashes||(h[2]=[/(.*)/,"pathname"]);u<h.length;u++)n=h[u],a=n[0],i=n[1],a!==a?p[i]=e:"string"==typeof a?~(l=e.indexOf(a))&&("number"==typeof n[2]?(p[i]=e.slice(0,l),e=e.slice(l+n[2])):(p[i]=e.slice(l),e=e.slice(0,l))):(l=a.exec(e))&&(p[i]=l[1],e=e.slice(0,l.index)),p[i]=p[i]||(r&&n[3]?o[i]||"":""),n[4]&&(p[i]=p[i].toLowerCase());t&&(p.query=t(p.query)),r&&o.slashes&&"/"!==p.pathname.charAt(0)&&(""!==p.pathname||""!==o.pathname)&&(p.pathname=resolve(p.pathname,o.pathname)),required(p.port,p.protocol)||(p.host=p.hostname,p.port=""),p.username=p.password="",p.auth&&(n=p.auth.split(":"),p.username=n[0]||"",p.password=n[1]||""),p.origin=p.protocol&&p.host&&"file:"!==p.protocol?p.protocol+"//"+p.host:"null",p.href=p.toString()}function set(e,o,t){var r=this;switch(e){case"query":"string"==typeof o&&o.length&&(o=(t||qs.parse)(o)),r[e]=o;break;case"port":r[e]=o,required(o,r.protocol)?o&&(r.host=r.hostname+":"+o):(r.host=r.hostname,r[e]="");break;case"hostname":r[e]=o,r.port&&(o+=":"+r.port),r.host=o;break;case"host":r[e]=o,/:\d+$/.test(o)?(o=o.split(":"),r.port=o.pop(),r.hostname=o.join(":")):(r.hostname=o,r.port="");break;case"protocol":r.protocol=o.toLowerCase(),r.slashes=!t;break;case"pathname":r.pathname=o.length&&"/"!==o.charAt(0)?"/"+o:o;break;default:r[e]=o}for(var s=0;s<rules.length;s++){var a=rules[s];a[4]&&(r[a[1]]=r[a[1]].toLowerCase())}return r.origin=r.protocol&&r.host&&"file:"!==r.protocol?r.protocol+"//"+r.host:"null",r.href=r.toString(),r}function toString(e){e&&"function"==typeof e||(e=qs.stringify);var o,t=this,r=t.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var s=r+(t.slashes?"//":"");return t.username&&(s+=t.username,t.password&&(s+=":"+t.password),s+="@"),s+=t.host+t.pathname,o="object"==typeof t.query?e(t.query):t.query,o&&(s+="?"!==o.charAt(0)?"?"+o:o),t.hash&&(s+=t.hash),s}var required=require("requires-port"),qs=require("querystringify"),protocolre=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,slashes=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,rules=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],ignore={hash:1,query:1};URL.prototype={set:set,toString:toString},URL.extractProtocol=extractProtocol,URL.location=lolcation,URL.qs=qs,module.exports=URL;
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"querystringify":53,"requires-port":54}],75:[function(require,module,exports){
"function"==typeof Object.create?module.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t};
},{}],76:[function(require,module,exports){
module.exports=function(o){return o&&"object"==typeof o&&"function"==typeof o.copy&&"function"==typeof o.fill&&"function"==typeof o.readUInt8};
},{}],77:[function(require,module,exports){
(function (process,global){
function inspect(e,r){var t={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),isBoolean(r)?t.showHidden=r:r&&exports._extend(t,r),isUndefined(t.showHidden)&&(t.showHidden=!1),isUndefined(t.depth)&&(t.depth=2),isUndefined(t.colors)&&(t.colors=!1),isUndefined(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=stylizeWithColor),formatValue(t,e,t.depth)}function stylizeWithColor(e,r){var t=inspect.styles[r];return t?"["+inspect.colors[t][0]+"m"+e+"["+inspect.colors[t][1]+"m":e}function stylizeNoColor(e,r){return e}function arrayToHash(e){var r={};return e.forEach(function(e,t){r[e]=!0}),r}function formatValue(e,r,t){if(e.customInspect&&r&&isFunction(r.inspect)&&r.inspect!==exports.inspect&&(!r.constructor||r.constructor.prototype!==r)){var n=r.inspect(t,e);return isString(n)||(n=formatValue(e,n,t)),n}var i=formatPrimitive(e,r);if(i)return i;var o=Object.keys(r),s=arrayToHash(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(r)),isError(r)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return formatError(r);if(0===o.length){if(isFunction(r)){var u=r.name?": "+r.name:"";return e.stylize("[Function"+u+"]","special")}if(isRegExp(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(isDate(r))return e.stylize(Date.prototype.toString.call(r),"date");if(isError(r))return formatError(r)}var c="",a=!1,l=["{","}"];if(isArray(r)&&(a=!0,l=["[","]"]),isFunction(r)){c=" [Function"+(r.name?": "+r.name:"")+"]"}if(isRegExp(r)&&(c=" "+RegExp.prototype.toString.call(r)),isDate(r)&&(c=" "+Date.prototype.toUTCString.call(r)),isError(r)&&(c=" "+formatError(r)),0===o.length&&(!a||0==r.length))return l[0]+c+l[1];if(t<0)return isRegExp(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special");e.seen.push(r);var p;return p=a?formatArray(e,r,t,s,o):o.map(function(n){return formatProperty(e,r,t,s,n,a)}),e.seen.pop(),reduceToSingleString(p,c,l)}function formatPrimitive(e,r){if(isUndefined(r))return e.stylize("undefined","undefined");if(isString(r)){var t="'"+JSON.stringify(r).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(t,"string")}return isNumber(r)?e.stylize(""+r,"number"):isBoolean(r)?e.stylize(""+r,"boolean"):isNull(r)?e.stylize("null","null"):void 0}function formatError(e){return"["+Error.prototype.toString.call(e)+"]"}function formatArray(e,r,t,n,i){for(var o=[],s=0,u=r.length;s<u;++s)hasOwnProperty(r,String(s))?o.push(formatProperty(e,r,t,n,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(formatProperty(e,r,t,n,i,!0))}),o}function formatProperty(e,r,t,n,i,o){var s,u,c;if(c=Object.getOwnPropertyDescriptor(r,i)||{value:r[i]},c.get?u=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(u=e.stylize("[Setter]","special")),hasOwnProperty(n,i)||(s="["+i+"]"),u||(e.seen.indexOf(c.value)<0?(u=isNull(t)?formatValue(e,c.value,null):formatValue(e,c.value,t-1),u.indexOf("\n")>-1&&(u=o?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n"))):u=e.stylize("[Circular]","special")),isUndefined(s)){if(o&&i.match(/^\d+$/))return u;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+u}function reduceToSingleString(e,r,t){var n=0;return e.reduce(function(e,r){return n++,r.indexOf("\n")>=0&&n++,e+r.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?t[0]+(""===r?"":r+"\n ")+" "+e.join(",\n  ")+" "+t[1]:t[0]+r+" "+e.join(", ")+" "+t[1]}function isArray(e){return Array.isArray(e)}function isBoolean(e){return"boolean"==typeof e}function isNull(e){return null===e}function isNullOrUndefined(e){return null==e}function isNumber(e){return"number"==typeof e}function isString(e){return"string"==typeof e}function isSymbol(e){return"symbol"==typeof e}function isUndefined(e){return void 0===e}function isRegExp(e){return isObject(e)&&"[object RegExp]"===objectToString(e)}function isObject(e){return"object"==typeof e&&null!==e}function isDate(e){return isObject(e)&&"[object Date]"===objectToString(e)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(e){return"function"==typeof e}function isPrimitive(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function objectToString(e){return Object.prototype.toString.call(e)}function pad(e){return e<10?"0"+e.toString(10):e.toString(10)}function timestamp(){var e=new Date,r=[pad(e.getHours()),pad(e.getMinutes()),pad(e.getSeconds())].join(":");return[e.getDate(),months[e.getMonth()],r].join(" ")}function hasOwnProperty(e,r){return Object.prototype.hasOwnProperty.call(e,r)}var formatRegExp=/%[sdj%]/g;exports.format=function(e){if(!isString(e)){for(var r=[],t=0;t<arguments.length;t++)r.push(inspect(arguments[t]));return r.join(" ")}for(var t=1,n=arguments,i=n.length,o=String(e).replace(formatRegExp,function(e){if("%%"===e)return"%";if(t>=i)return e;switch(e){case"%s":return String(n[t++]);case"%d":return Number(n[t++]);case"%j":try{return JSON.stringify(n[t++])}catch(e){return"[Circular]"}default:return e}}),s=n[t];t<i;s=n[++t])isNull(s)||!isObject(s)?o+=" "+s:o+=" "+inspect(s);return o},exports.deprecate=function(e,r){function t(){if(!n){if(process.throwDeprecation)throw new Error(r);process.traceDeprecation?console.trace(r):console.error(r),n=!0}return e.apply(this,arguments)}if(isUndefined(global.process))return function(){return exports.deprecate(e,r).apply(this,arguments)};if(!0===process.noDeprecation)return e;var n=!1;return t};var debugs={},debugEnviron;exports.debuglog=function(e){if(isUndefined(debugEnviron)&&(debugEnviron=process.env.NODE_DEBUG||""),e=e.toUpperCase(),!debugs[e])if(new RegExp("\\b"+e+"\\b","i").test(debugEnviron)){var r=process.pid;debugs[e]=function(){var t=exports.format.apply(exports,arguments);console.error("%s %d: %s",e,r,t)}}else debugs[e]=function(){};return debugs[e]},exports.inspect=inspect,inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=isSymbol,exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=isPrimitive,exports.isBuffer=require("./support/isBuffer");var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];exports.log=function(){console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))},exports.inherits=require("inherits"),exports._extend=function(e,r){if(!r||!isObject(r))return e;for(var t=Object.keys(r),n=t.length;n--;)e[t[n]]=r[t[n]];return e};
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./support/isBuffer":76,"_process":9,"inherits":75}],78:[function(require,module,exports){
!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function r(t){return"string"!=typeof t&&(t=String(t)),t}function o(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return m.iterable&&(e[Symbol.iterator]=function(){return e}),e}function n(t){this.map={},t instanceof n?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function i(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function s(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function a(t){var e=new FileReader,r=s(e);return e.readAsArrayBuffer(t),r}function u(t){var e=new FileReader,r=s(e);return e.readAsText(t),r}function h(t){for(var e=new Uint8Array(t),r=new Array(e.length),o=0;o<e.length;o++)r[o]=String.fromCharCode(e[o]);return r.join("")}function f(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function d(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(m.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(m.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(m.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(m.arrayBuffer&&m.blob&&v(t))this._bodyArrayBuffer=f(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!m.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!B(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=f(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):m.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},m.blob&&(this.blob=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(a)}),this.text=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(h(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},m.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function y(t){var e=t.toUpperCase();return _.indexOf(e)>-1?e:t}function l(t,e){e=e||{};var r=e.body;if(t instanceof l){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new n(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new n(e.headers)),this.method=y(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function p(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),o=r.shift().replace(/\+/g," "),n=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(o),decodeURIComponent(n))}}),e}function c(t){var e=new n;return t.split(/\r?\n/).forEach(function(t){var r=t.split(":"),o=r.shift().trim();if(o){var n=r.join(":").trim();e.append(o,n)}}),e}function b(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new n(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var m={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(m.arrayBuffer)var w=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],v=function(t){return t&&DataView.prototype.isPrototypeOf(t)},B=ArrayBuffer.isView||function(t){return t&&w.indexOf(Object.prototype.toString.call(t))>-1};n.prototype.append=function(t,o){t=e(t),o=r(o);var n=this.map[t];this.map[t]=n?n+","+o:o},n.prototype.delete=function(t){delete this.map[e(t)]},n.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},n.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},n.prototype.set=function(t,o){this.map[e(t)]=r(o)},n.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},n.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),o(t)},n.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),o(t)},n.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),o(t)},m.iterable&&(n.prototype[Symbol.iterator]=n.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];l.prototype.clone=function(){return new l(this,{body:this._bodyInit})},d.call(l.prototype),d.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new n(this.headers),url:this.url})},b.error=function(){var t=new b(null,{status:0,statusText:""});return t.type="error",t};var A=[301,302,303,307,308];b.redirect=function(t,e){if(-1===A.indexOf(e))throw new RangeError("Invalid status code");return new b(null,{status:e,headers:{location:t}})},t.Headers=n,t.Request=l,t.Response=b,t.fetch=function(t,e){return new Promise(function(r,o){var n=new l(t,e),i=new XMLHttpRequest;i.onload=function(){var t={status:i.status,statusText:i.statusText,headers:c(i.getAllResponseHeaders()||"")};t.url="responseURL"in i?i.responseURL:t.headers.get("X-Request-URL");var e="response"in i?i.response:i.responseText;r(new b(e,t))},i.onerror=function(){o(new TypeError("Network request failed"))},i.ontimeout=function(){o(new TypeError("Network request failed"))},i.open(n.method,n.url,!0),"include"===n.credentials&&(i.withCredentials=!0),"responseType"in i&&m.blob&&(i.responseType="blob"),n.headers.forEach(function(t,e){i.setRequestHeader(e,t)}),i.send(void 0===n._bodyInit?null:n._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this);
},{}],79:[function(require,module,exports){
"use strict";function WildcardMatcher(t,i){this.text=t=t||"",this.hasWild=~t.indexOf("*"),this.separator=i,this.parts=t.split(i)}WildcardMatcher.prototype.match=function(t){var i,e,r=!0,s=this.parts,h=s.length;if("string"==typeof t||t instanceof String)if(this.hasWild||this.text==t){for(e=(t||"").split(this.separator),i=0;r&&i<h;i++)"*"!==s[i]&&(r=i<e.length&&s[i]===e[i]);r=r&&e}else r=!1;else if("function"==typeof t.splice)for(r=[],i=t.length;i--;)this.match(t[i])&&(r[r.length]=t[i]);else if("object"==typeof t){r={};for(var a in t)this.match(a)&&(r[a]=t[a])}return r},module.exports=function(t,i,e){var r=new WildcardMatcher(t,e||/[\/\.]/);return void 0!==i?r.match(i):r};
},{}],80:[function(require,module,exports){
"use strict";function encode(e){var t="";do{t=alphabet[e%length]+t,e=Math.floor(e/length)}while(e>0);return t}function decode(e){var t=0;for(i=0;i<e.length;i++)t=t*length+map[e.charAt(i)];return t}function yeast(){var e=encode(+new Date);return e!==prev?(seed=0,prev=e):e+"."+encode(seed++)}for(var alphabet="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),length=64,map={},seed=0,i=0,prev;i<length;i++)map[alphabet[i]]=i;yeast.encode=encode,yeast.decode=decode,module.exports=yeast;
},{}],81:[function(require,module,exports){
var bel=require("bel"),morphdom=require("morphdom"),defaultEvents=require("./update-events.js");module.exports=bel,module.exports.update=function(e,t,u){function a(e,t){for(var a=u.events||defaultEvents,l=0;l<a.length;l++){var o=a[l];t[o]?e[o]=t[o]:e[o]&&(e[o]=void 0)}var r=e.value,v=t.value;"INPUT"===e.nodeName&&"file"!==e.type||"SELECT"===e.nodeName?v?v!==r&&(e.value=v):t.value=e.value:"TEXTAREA"===e.nodeName&&null===t.getAttribute("value")&&(e.value=t.value)}return u||(u={}),!1!==u.events&&(u.onBeforeElUpdated||(u.onBeforeElUpdated=a)),morphdom(e,t,u)};
},{"./update-events.js":82,"bel":6,"morphdom":44}],82:[function(require,module,exports){
module.exports=["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","ondragstart","ondrag","ondragenter","ondragleave","ondragover","ondrop","ondragend","onkeydown","onkeypress","onkeyup","onunload","onabort","onerror","onresize","onscroll","onselect","onchange","onsubmit","onreset","onfocus","onblur","oninput","oncontextmenu","onfocusin","onfocusout"];
},{}],83:[function(require,module,exports){
module.exports=function e(t,n){for(var o=0;o<n.length;o++){var a=n[o];if(Array.isArray(a))e(t,a);else{if(("number"==typeof a||"boolean"==typeof a||a instanceof Date||a instanceof RegExp)&&(a=a.toString()),"string"==typeof a){if(t.lastChild&&"#text"===t.lastChild.nodeName){t.lastChild.nodeValue+=a;continue}a=document.createTextNode(a)}a&&a.nodeType&&t.appendChild(a)}}};
},{}],84:[function(require,module,exports){
(function (global){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o])}return e},Utils=require("../core/Utils"),Translator=require("../core/Translator"),UppySocket=require("./UppySocket"),ee=require("namespace-emitter"),cuid=require("cuid"),throttle=require("lodash.throttle"),prettyBytes=require("prettier-bytes"),match=require("mime-match"),Uppy=function(){function e(t){_classCallCheck(this,e);var s={strings:{youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},exceedsSize:"This file exceeds maximum allowed size of",youCanOnlyUploadFileTypes:"You can only upload:",uppyServerError:"Connection with Uppy Server failed"}},o={autoProceed:!0,debug:!1,restrictions:{maxFileSize:!1,maxNumberOfFiles:!1,minNumberOfFiles:!1,allowedFileTypes:!1},onBeforeFileAdded:function(e,t){return Promise.resolve()},onBeforeUpload:function(e,t){return Promise.resolve()},locale:s};this.opts=_extends({},o,t),this.locale=_extends({},s,this.opts.locale),this.locale.strings=_extends({},s.strings,this.opts.locale.strings),this.translator=new Translator({locale:this.locale}),this.i18n=this.translator.translate.bind(this.translator),this.plugins={},this.translator=new Translator({locale:this.opts.locale}),this.i18n=this.translator.translate.bind(this.translator),this.getState=this.getState.bind(this),this.updateMeta=this.updateMeta.bind(this),this.initSocket=this.initSocket.bind(this),this.log=this.log.bind(this),this.addFile=this.addFile.bind(this),this.removeFile=this.removeFile.bind(this),this.calculateProgress=this.calculateProgress.bind(this),this.resetProgress=this.resetProgress.bind(this),this.emitter=ee(),this.on=this.emitter.on.bind(this.emitter),this.off=this.emitter.off.bind(this.emitter),this.once=this.emitter.once.bind(this.emitter),this.emit=this.emitter.emit.bind(this.emitter),this.preProcessors=[],this.uploaders=[],this.postProcessors=[],this.state={files:{},capabilities:{resumableUploads:!1},totalProgress:0,meta:_extends({},this.opts.meta),info:{isHidden:!0,type:"info",message:""}},this.updateNum=0,this.opts.debug&&(global.UppyState=this.state,global.uppyLog="",global._uppy=this)}return e.prototype.updateAll=function(e){this.iteratePlugins(function(t){t.update(e)})},e.prototype.setState=function(e){var t=_extends({},this.state,e);this.emit("core:state-update",this.state,t,e),this.state=t,this.updateAll(this.state)},e.prototype.getState=function(){return this.state},e.prototype.reset=function(){this.emit("core:pause-all"),this.emit("core:cancel-all"),this.setState({totalProgress:0})},e.prototype.resetProgress=function(){var e={percentage:0,bytesUploaded:0,uploadComplete:!1,uploadStarted:!1},t=_extends({},this.state.files),s={};Object.keys(t).forEach(function(o){var i=_extends({},t[o]);i.progress=_extends({},i.progress,e),s[o]=i}),this.setState({files:s,totalProgress:0}),this.emit("core:reset-progress")},e.prototype.addPreProcessor=function(e){this.preProcessors.push(e)},e.prototype.removePreProcessor=function(e){var t=this.preProcessors.indexOf(e);-1!==t&&this.preProcessors.splice(t,1)},e.prototype.addPostProcessor=function(e){this.postProcessors.push(e)},e.prototype.removePostProcessor=function(e){var t=this.postProcessors.indexOf(e);-1!==t&&this.postProcessors.splice(t,1)},e.prototype.addUploader=function(e){this.uploaders.push(e)},e.prototype.removeUploader=function(e){var t=this.uploaders.indexOf(e);-1!==t&&this.uploaders.splice(t,1)},e.prototype.setMeta=function(e){var t=_extends({},this.getState().meta,e);this.log("Adding metadata:"),this.log(e),this.setState({meta:t})},e.prototype.updateMeta=function(e,t){var s=_extends({},this.getState().files),o=_extends({},s[t].meta,e);s[t]=_extends({},s[t],{meta:o}),this.setState({files:s})},e.prototype.checkRestrictions=function(e,t,s){var o=this.opts.restrictions,i=o.maxFileSize,r=o.maxNumberOfFiles,n=o.minNumberOfFiles,a=o.allowedFileTypes;if(e&&n)return!(Object.keys(this.state.files).length<n)||(this.info(""+this.i18n("youHaveToAtLeastSelectX",{smart_count:n}),"error",5e3),!1);if(r&&Object.keys(this.state.files).length+1>r)return this.info(""+this.i18n("youCanOnlyUploadX",{smart_count:r}),"error",5e3),!1;if(a){if(!(a.filter(match(s.join("/"))).length>0)){var l=a.join(", ");return this.info(this.i18n("youCanOnlyUploadFileTypes")+" "+l,"error",5e3),!1}}return!(i&&t.data.size>i)||(this.info(this.i18n("exceedsSize")+" "+prettyBytes(i),"error",5e3),!1)},e.prototype.addFile=function(e){var t=this;return this.opts.onBeforeFileAdded(e,this.getState().files).catch(function(e){return t.info(e,"error",5e3),Promise.reject("onBeforeFileAdded: "+e)}).then(function(){return Utils.getFileType(e).then(function(s){var o=_extends({},t.state.files),i=e.name||"noname",r=Utils.getFileNameAndExtension(i)[1],n=e.isRemote||!1,a=Utils.generateFileID(e),l=s[0],c=s[1],p={source:e.source||"",id:a,name:i,extension:r||"",meta:_extends({},{name:i},t.getState().meta),type:{general:l,specific:c},data:e.data,progress:{percentage:0,bytesUploaded:0,bytesTotal:e.data.size||0,uploadComplete:!1,uploadStarted:!1},size:e.data.size||"N/A",isRemote:n,remote:e.remote||"",preview:e.preview};if(!t.checkRestrictions(!1,p,s))return Promise.reject("File not allowed");o[a]=p,t.setState({files:o}),t.emit("core:file-added",p),t.log("Added file: "+i+", "+a+", mime type: "+s),t.opts.autoProceed&&!t.scheduledAutoProceed&&(t.scheduledAutoProceed=setTimeout(function(){t.scheduledAutoProceed=null,t.upload().catch(function(e){console.error(e.stack||e.message||e)})},4))})})},e.prototype.getFile=function(e){return this.getState().files[e]},e.prototype.generatePreview=function(e){var t=this;Utils.isPreviewSupported(e.type.specific)&&!e.isRemote&&Utils.createThumbnail(e,200).then(function(s){t.setPreviewURL(e.id,s)}).catch(function(e){console.warn(e.stack||e.message)})},e.prototype.setPreviewURL=function(e,t){var s,o=this.state.files;this.setState({files:_extends({},o,(s={},s[e]=_extends({},o[e],{preview:t}),s))})},e.prototype.removeFile=function(e){var t=_extends({},this.getState().files),s=t[e];delete t[e],this.setState({files:t}),this.calculateTotalProgress(),this.emit("core:file-removed",e),s.preview&&Utils.isObjectURL(s.preview)&&URL.revokeObjectURL(s.preview),this.log("Removed file: "+e)},e.prototype.calculateProgress=function(e){var t=e.id,s=_extends({},this.getState().files);if(!s[t])return void this.log("Trying to set progress for a file that’s not with us anymore: ",t);var o=_extends({},s[t],_extends({},{progress:_extends({},s[t].progress,{bytesUploaded:e.bytesUploaded,bytesTotal:e.bytesTotal,percentage:Math.floor((e.bytesUploaded/e.bytesTotal*100).toFixed(2))})}));s[e.id]=o,this.setState({files:s}),this.calculateTotalProgress()},e.prototype.calculateTotalProgress=function(){var e=_extends({},this.getState().files),t=Object.keys(e).filter(function(t){return e[t].progress.uploadStarted}),s=100*t.length,o=0;t.forEach(function(t){o+=e[t].progress.percentage});var i=Math.floor((100*o/s).toFixed(2));this.setState({totalProgress:i})},e.prototype.actions=function(){var e=this;this.on("core:error",function(t){e.setState({error:t})}),this.on("core:upload-error",function(t,s){var o=e.state.files[t].name,i="Failed to upload "+o;"object"===(void 0===s?"undefined":_typeof(s))&&s.message&&(i=i+": "+s.message),e.info(i,"error",5e3)}),this.on("core:upload",function(){e.setState({error:null})}),this.on("core:file-add",function(t){e.addFile(t)}),this.on("core:file-added",function(t){e.generatePreview(t)}),this.on("core:file-remove",function(t){e.removeFile(t)}),this.on("core:cancel-all",function(){e.setState({files:{}})}),this.on("core:upload-started",function(t,s){var o=_extends({},e.getState().files),i=_extends({},o[t],_extends({},{progress:_extends({},o[t].progress,{uploadStarted:Date.now()})}));o[t]=i,e.setState({files:o})});var t=throttle(this.calculateProgress,100,{leading:!0,trailing:!1});this.on("core:upload-progress",function(e){t(e)}),this.on("core:upload-success",function(t,s,o){var i=_extends({},e.getState().files),r=_extends({},i[t],{progress:_extends({},i[t].progress,{uploadComplete:!0,percentage:100}),uploadURL:o});if(i[t]=r,e.setState({files:i}),e.calculateTotalProgress(),100===e.getState().totalProgress){var n=Object.keys(i).filter(function(e){return i[e].progress.uploadComplete});e.emit("core:upload-complete",n.length)}}),this.on("core:update-meta",function(t,s){e.updateMeta(t,s)}),this.on("core:preprocess-progress",function(t,s){var o=_extends({},e.getState().files);o[t]=_extends({},o[t],{progress:_extends({},o[t].progress,{preprocess:s})}),e.setState({files:o})}),this.on("core:preprocess-complete",function(t){var s=_extends({},e.getState().files);s[t]=_extends({},s[t],{progress:_extends({},s[t].progress)}),delete s[t].progress.preprocess,e.setState({files:s})}),this.on("core:postprocess-progress",function(t,s){var o=_extends({},e.getState().files);o[t]=_extends({},o[t],{progress:_extends({},o[t].progress,{postprocess:s})}),e.setState({files:o})}),this.on("core:postprocess-complete",function(t){var s=_extends({},e.getState().files);s[t]=_extends({},s[t],{progress:_extends({},s[t].progress)}),delete s[t].progress.postprocess,e.setState({files:s})}),"undefined"!=typeof window&&(window.addEventListener("online",function(){return e.isOnline(!0)}),window.addEventListener("offline",function(){return e.isOnline(!1)}),setTimeout(function(){return e.isOnline()},3e3))},e.prototype.isOnline=function(e){e||window.navigator.onLine?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info("Connected!","success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info("No internet connection","error",0),this.wasOffline=!0)},e.prototype.use=function(e,t){if("function"!=typeof e){var s="Expected a plugin class, but got "+(null===e?"null":void 0===e?"undefined":_typeof(e))+". Please verify that the plugin was imported and spelled correctly.";throw new TypeError(s)}var o=new e(this,t),i=o.id;if(this.plugins[o.type]=this.plugins[o.type]||[],!i)throw new Error("Your plugin must have an id");if(!o.type)throw new Error("Your plugin must have a type");var r=this.getPlugin(i);if(r){var n="Already found a plugin named '"+r.id+"'.\n        Tried to use: '"+i+"'.\n        Uppy is currently limited to running one of every plugin.\n        Share your use case with us over at\n        https://github.com/transloadit/uppy/issues/\n        if you want us to reconsider.";throw new Error(n)}return this.plugins[o.type].push(o),o.install(),this},e.prototype.getPlugin=function(e){var t=!1;return this.iteratePlugins(function(s){if(s.id===e)return t=s,!1}),t},e.prototype.iteratePlugins=function(e){var t=this;Object.keys(this.plugins).forEach(function(s){t.plugins[s].forEach(e)})},e.prototype.removePlugin=function(e){var t=this.plugins[e.type];e.uninstall&&e.uninstall();var s=t.indexOf(e);-1!==s&&t.splice(s,1)},e.prototype.close=function(){this.reset(),this.iteratePlugins(function(e){e.uninstall()}),this.socket&&this.socket.close()},e.prototype.info=function(e,t,s){var o=this,i="object"===(void 0===e?"undefined":_typeof(e));if(this.setState({info:{isHidden:!1,type:t||"info",message:i?e.message:e,details:i?e.details:null}}),this.emit("core:info-visible"),window.clearTimeout(this.infoTimeoutID),0===s)return void(this.infoTimeoutID=void 0);this.infoTimeoutID=setTimeout(function(){var e=_extends({},o.state.info,{isHidden:!0});o.setState({info:e}),o.emit("core:info-hidden")},s)},e.prototype.hideInfo=function(){var e=_extends({},this.core.state.info,{isHidden:!0});this.setState({info:e}),this.emit("core:info-hidden")},e.prototype.log=function(e,t){if(this.opts.debug){if("error"===t)return void console.error("LOG: "+e);e===""+e?console.log("LOG: "+e):console.dir(e),global.uppyLog=global.uppyLog+"\nDEBUG LOG: "+e}},e.prototype.initSocket=function(e){return this.socket||(this.socket=new UppySocket(e)),this.socket},e.prototype.run=function(){return this.log("Core is run, initializing actions..."),this.actions(),this},e.prototype.restore=function(e){return this.log('Core: attempting to restore upload "'+e+'"'),this.state.currentUploads[e]?this.runUpload(e):(this.removeUpload(e),Promise.reject(new Error("Nonexistent upload")))},e.prototype.createUpload=function(e){var t,s=cuid();return this.emit("core:upload",{id:s,fileIDs:e}),this.setState({currentUploads:_extends({},this.state.currentUploads,(t={},t[s]={fileIDs:e,step:0},t))}),s},e.prototype.removeUpload=function(e){var t=_extends({},this.state.currentUploads);delete t[e],this.setState({currentUploads:t})},e.prototype.runUpload=function(e){var t=this,s=this.state.currentUploads[e],o=s.fileIDs,i=s.step,r=[].concat(this.preProcessors,this.uploaders,this.postProcessors),n=Promise.resolve();return r.forEach(function(s,r){r<i||(n=n.then(function(){var i,n=_extends({},t.state.currentUploads[e],{step:r});return t.setState({currentUploads:_extends({},t.state.currentUploads,(i={},i[e]=n,i))}),s(o,e)}))}),n.catch(function(s){t.emit("core:error",s),t.removeUpload(e)}),n.then(function(){t.emit("core:success",o),t.removeUpload(e)})},e.prototype.upload=function(e){var t=this;return this.checkRestrictions(!0)?this.opts.onBeforeUpload(this.state.files).catch(function(e){return t.info(e,"error",5e3),Promise.reject("onBeforeUpload: "+e)}).then(function(){var s=[];Object.keys(t.state.files).forEach(function(o){var i=t.getFile(o);e?(t.resetProgress(),s.push(i.id)):i.progress.uploadStarted&&!i.isRemote||s.push(i.id)});var o=t.createUpload(s);return t.runUpload(o)}):Promise.reject("Minimum number of files has not been reached")},e}();module.exports=function(e){if(!(this instanceof Uppy))return new Uppy(e)};
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"../core/Translator":85,"../core/Utils":87,"./UppySocket":86,"cuid":13,"lodash.throttle":42,"mime-match":43,"namespace-emitter":46,"prettier-bytes":52}],85:[function(require,module,exports){
"use strict";function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var _extends=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t};module.exports=function(){function t(r){_classCallCheck(this,t);var e={locale:{strings:{},pluralize:function(t){return 1===t?0:1}}};this.opts=_extends({},e,r),this.locale=_extends({},e.locale,r.locale)}return t.prototype.interpolate=function(t,r){var e=String.prototype.replace,n=/\$/g;for(var a in r)if("_"!==a&&r.hasOwnProperty(a)){var o=r[a];"string"==typeof o&&(o=e.call(r[a],n,"$$$$")),t=e.call(t,new RegExp("%\\{"+a+"\\}","g"),o)}return t},t.prototype.translate=function(t,r){if(r&&r.smart_count){var e=this.locale.pluralize(r.smart_count);return this.interpolate(this.opts.locale.strings[t][e],r)}return this.interpolate(this.opts.locale.strings[t],r)},t}();
},{}],86:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ee=require("namespace-emitter");module.exports=function(){function e(t){var s=this;_classCallCheck(this,e),this.queued=[],this.isOpen=!1,this.socket=new WebSocket(t.target),this.emitter=ee(),this.socket.onopen=function(e){for(s.isOpen=!0;s.queued.length>0&&s.isOpen;){var t=s.queued[0];s.send(t.action,t.payload),s.queued=s.queued.slice(1)}},this.socket.onclose=function(e){s.isOpen=!1},this._handleMessage=this._handleMessage.bind(this),this.socket.onmessage=this._handleMessage,this.close=this.close.bind(this),this.emit=this.emit.bind(this),this.on=this.on.bind(this),this.once=this.once.bind(this),this.send=this.send.bind(this)}return e.prototype.close=function(){return this.socket.close()},e.prototype.send=function(e,t){if(!this.isOpen)return void this.queued.push({action:e,payload:t});this.socket.send(JSON.stringify({action:e,payload:t}))},e.prototype.on=function(e,t){console.log(e),this.emitter.on(e,t)},e.prototype.emit=function(e,t){console.log(e),this.emitter.emit(e,t)},e.prototype.once=function(e,t){this.emitter.once(e,t)},e.prototype._handleMessage=function(e){try{var t=JSON.parse(e.data);console.log(t),this.emit(t.action,t.payload)}catch(e){console.log(e)}},e}();
},{"namespace-emitter":46}],87:[function(require,module,exports){
"use strict";function flatten(e){return[].concat.apply([],e)}function isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints}function truncateString(e,t){return e.length>t?e.substr(0,t/2)+"..."+e.substr(e.length-t/4,e.length):e}function secondsToTime(e){return{hours:Math.floor(e/3600)%24,minutes:Math.floor(e/60)%60,seconds:Math.floor(e%60)}}function groupBy(e,t){return e.reduce(function(e,o){var r=t(o),n=e.get(r)||[];return n.push(o),e.set(r,n),e},new Map)}function every(e,t){return e.reduce(function(e,o){return!!e&&t(o)},!0)}function toArray(e){return Array.prototype.slice.call(e||[],0)}function generateFileID(e){var t=e.name.toLowerCase();return t=t.replace(/[^A-Z0-9]/gi,""),t+=e.data.lastModified}function extend(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return Object.assign.apply(this,[{}].concat(t))}function runPromiseSequence(e){for(var t=arguments.length,o=Array(t>1?t-1:0),r=1;r<t;r++)o[r-1]=arguments[r];var n=Promise.resolve();return e.forEach(function(e){n=n.then(function(){return e.apply(void 0,o)})}),n}function isPreviewSupported(e){return!!/^(jpeg|gif|png|svg|svg\+xml|bmp)$/.test(e)}function getArrayBuffer(e){return new _Promise(function(t,o){var r=new FileReader;r.addEventListener("load",function(e){t(e.target.result)}),r.addEventListener("error",function(e){console.error("FileReader error"+e),o(e)}),r.readAsArrayBuffer(e)})}function getFileType(e){var t=["",""],o={md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3"};if(e.isRemote)return Promise.resolve(e.type.split("/"));var r=getFileNameAndExtension(e.name)[1];return getArrayBuffer(e.data.slice(0,4100)).then(function(n){var i=fileType(n);return i&&i.mime?i.mime.split("/"):e.type?e.type.split("/"):o[r]?o[r].split("/"):t}).catch(function(){return t})}function getFileTypeExtension(e){return mimeToExtensions[e]||null}function getFileNameAndExtension(e){var t=/(?:\.([^.]+))?$/,o=t.exec(e)[1];return[e.replace("."+o,""),o]}function supportsMediaRecorder(){return"function"==typeof MediaRecorder&&!!MediaRecorder.prototype&&"function"==typeof MediaRecorder.prototype.start}function isObjectURL(e){return 0===e.indexOf("blob:")}function getProportionalHeight(e,t){var o=e.width/e.height;return Math.round(t/o)}function createThumbnail(e,t){var o=URL.createObjectURL(e.data);return new _Promise(function(e,t){var r=new Image;r.src=o,r.onload=function(){URL.revokeObjectURL(o),e(r)},r.onerror=function(){URL.revokeObjectURL(o),t(new Error("Could not create thumbnail"))}}).then(function(e){var o=getProportionalHeight(e,t);return canvasToBlob(resizeImage(e,t,o),"image/jpeg")}).then(function(e){return URL.createObjectURL(e)})}function resizeImage(e,t,o){var r=e.width,n=e.height;if(o<e.height/2){var i=Math.floor(Math.log(e.width/t)/Math.log(2)),a=downScaleInSteps(e,i);e=a.image,r=a.sourceWidth,n=a.sourceHeight}var u=document.createElement("canvas");return u.width=t,u.height=o,u.getContext("2d").drawImage(e,0,0,r,n,0,0,t,o),u}function downScaleInSteps(e,t){var o=e,r=o.width,n=o.height,i=document.createElement("canvas"),a=i.getContext("2d");i.width=r/2,i.height=n/2;for(var u=0;u<t;u+=1)a.drawImage(o,0,0,r,n,0,0,r/2,n/2),r/=2,n/=2,o=i;return{image:i,sourceWidth:r,sourceHeight:n}}function canvasToBlob(e,t,o){return e.toBlob?new _Promise(function(r){e.toBlob(r,t,o)}):Promise.resolve().then(function(){return dataURItoBlob(e.toDataURL(t,o),{})})}function dataURItoBlob(e,t,o){var r=e.split(",")[1],n=t.mimeType||e.split(",")[0].split(":")[1].split(";")[0];null==n&&(n="plain/text");for(var i=atob(r),a=[],u=0;u<i.length;u++)a.push(i.charCodeAt(u));return o?new File([new Uint8Array(a)],t.name||"",{type:n}):new Blob([new Uint8Array(a)],{type:n})}function dataURItoFile(e,t){return dataURItoBlob(e,t,!0)}function copyToClipboard(e,t){return t=t||"Copy the URL below",new _Promise(function(o,r){var n=document.createElement("textarea");n.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),n.value=e,document.body.appendChild(n),n.select();var i=function(o){return document.body.removeChild(n),window.prompt(t,e),r("Oops, unable to copy displayed fallback prompt: "+o)};try{return document.execCommand("copy")?(document.body.removeChild(n),o()):i("copy command unavailable")}catch(e){return document.body.removeChild(n),i(e)}})}function getSpeed(e){if(!e.bytesUploaded)return 0;var t=new Date-e.uploadStarted;return e.bytesUploaded/(t/1e3)}function getBytesRemaining(e){return e.bytesTotal-e.bytesUploaded}function getETA(e){if(!e.bytesUploaded)return 0;var t=getSpeed(e),o=getBytesRemaining(e);return Math.round(o/t*10)/10}function prettyETA(e){var t=secondsToTime(e),o=t.hours?t.hours+"h ":"",r=t.hours?("0"+t.minutes).substr(-2):t.minutes;return o+(r?r+"m ":"")+(r?("0"+t.seconds).substr(-2):t.seconds)+"s"}function isDOMElement(e){return e&&"object"===(void 0===e?"undefined":_typeof(e))&&e.nodeType===Node.ELEMENT_NODE}function findDOMElement(e){return"string"==typeof e?document.querySelector(e):"object"===(void 0===e?"undefined":_typeof(e))&&isDOMElement(e)?e:void 0}function getSocketHost(e){var t=/^(?:https?:\/\/|\/\/)?(?:[^@\n]+@)?(?:www\.)?([^\n]+)/,o=t.exec(e)[1];return("https:"===location.protocol?"wss":"ws")+"://"+o}function _emitSocketProgress(e,t,o){var r=t.progress,n=t.bytesUploaded,i=t.bytesTotal;r&&(e.core.log("Upload progress: "+r),e.core.emitter.emit("core:upload-progress",{uploader:e,id:o.id,bytesUploaded:n,bytesTotal:i}))}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_Promise="undefined"==typeof Promise?require("es6-promise").Promise:Promise,throttle=require("lodash.throttle"),fileType=require("../vendor/file-type"),mimeToExtensions={"video/ogg":"ogv","audio/ogg":"ogg","video/webm":"webm","audio/webm":"webm","video/mp4":"mp4","audio/mp3":"mp3"},emitSocketProgress=throttle(_emitSocketProgress,300,{leading:!0,trailing:!0});module.exports={generateFileID:generateFileID,toArray:toArray,every:every,flatten:flatten,groupBy:groupBy,extend:extend,runPromiseSequence:runPromiseSequence,supportsMediaRecorder:supportsMediaRecorder,isTouchDevice:isTouchDevice,getFileNameAndExtension:getFileNameAndExtension,truncateString:truncateString,getFileTypeExtension:getFileTypeExtension,getFileType:getFileType,getArrayBuffer:getArrayBuffer,isPreviewSupported:isPreviewSupported,isObjectURL:isObjectURL,createThumbnail:createThumbnail,secondsToTime:secondsToTime,dataURItoBlob:dataURItoBlob,dataURItoFile:dataURItoFile,getSpeed:getSpeed,getBytesRemaining:getBytesRemaining,getETA:getETA,copyToClipboard:copyToClipboard,prettyETA:prettyETA,findDOMElement:findDOMElement,getSocketHost:getSocketHost,emitSocketProgress:emitSocketProgress};
},{"../vendor/file-type":144,"es6-promise":30,"lodash.throttle":42}],88:[function(require,module,exports){
"use strict";var Core=require("./Core");module.exports=Core;
},{"./Core":84}],89:[function(require,module,exports){
"use strict";var _appendChild=require("yo-yoify/lib/appendChild"),onload=require("on-load"),LoaderView=require("./Loader");module.exports=function(e){var t,n,r=e.demo?(t=document.createElement("button"),t.onclick=e.handleDemoAuth,t.setAttribute("class","UppyProvider-authBtnDemo"),t.textContent="Proceed with Demo Account",t):null;return onload((n=document.createElement("div"),n.setAttribute("style","height: 100%;"),_appendChild(n,[" ",e.checkAuthInProgress?LoaderView():function(){var t,n,a,u;return u=document.createElement("div"),u.setAttribute("class","UppyProvider-auth"),_appendChild(u,[" ",(n=document.createElement("h1"),n.setAttribute("class","UppyProvider-authTitle"),_appendChild(n,["Please authenticate with ",(t=document.createElement("span"),t.setAttribute("class","UppyProvider-authTitleName"),_appendChild(t,[e.pluginName]),t),document.createElement("br")," to select files"]),n)," ",(a=document.createElement("button"),a.setAttribute("type","button"),a.onclick=e.handleAuth,a.setAttribute("class","UppyProvider-authBtn"),a.textContent="Authenticate",a)," ",r," "]),u}()," "]),n),e.checkAuth,null,"auth"+e.pluginName)};
},{"./Loader":93,"on-load":48,"yo-yoify/lib/appendChild":83}],90:[function(require,module,exports){
"use strict";var _appendChild=require("yo-yoify/lib/appendChild");module.exports=function(e){var t,n;return n=document.createElement("li"),_appendChild(n,[" ",(t=document.createElement("button"),t.setAttribute("type","button"),t.onclick=e.getFolder,_appendChild(t,[e.title]),t)," "]),n};
},{"yo-yoify/lib/appendChild":83}],91:[function(require,module,exports){
"use strict";var _appendChild=require("yo-yoify/lib/appendChild"),Breadcrumb=require("./Breadcrumb");module.exports=function(e){var r;return r=document.createElement("ul"),r.setAttribute("class","UppyProvider-breadcrumbs"),_appendChild(r,[" ",e.directories.map(function(r,t){return Breadcrumb({getFolder:function(){return e.getFolder(r.id)},title:0===t?e.title:r.title})})," "]),r};
},{"./Breadcrumb":90,"yo-yoify/lib/appendChild":83}],92:[function(require,module,exports){
"use strict";var _svgNamespace="http://www.w3.org/2000/svg",_appendChild=require("yo-yoify/lib/appendChild"),Breadcrumbs=require("./Breadcrumbs"),Table=require("./Table");module.exports=function(e){var t,r,s,l,a,i,c,o,n,d,u,p,m,b=e.folders,h=e.files;return""!==e.filterInput&&(b=e.filterItems(e.folders),h=e.filterItems(e.files)),m=document.createElement("div"),m.setAttribute("class","Browser Browser-viewType--"+String(e.viewType)),_appendChild(m,[" ",(u=document.createElement("header"),u.setAttribute("class","Browser-header"),_appendChild(u,[" ",(a=document.createElement("div"),a.setAttribute("aria-hidden",""+String(!e.isSearchVisible)),a.setAttribute("class","Browser-search"),_appendChild(a,[" ",(t=document.createElement("input"),t.setAttribute("type","text"),t.setAttribute("placeholder","Search"),t.onkeyup=e.filterQuery,t.setAttribute("value",""+String(e.filterInput)),t.setAttribute("class","Browser-searchInput"),t)," ",(l=document.createElement("button"),l.setAttribute("type","button"),l.onclick=e.toggleSearch,l.setAttribute("class","Browser-searchClose"),_appendChild(l,[" ",(s=document.createElementNS(_svgNamespace,"svg"),s.setAttribute("viewBox","0 0 19 19"),s.setAttribute("class","UppyIcon"),_appendChild(s,[" ",(r=document.createElementNS(_svgNamespace,"path"),r.setAttribute("d","M17.318 17.232L9.94 9.854 9.586 9.5l-.354.354-7.378 7.378h.707l-.62-.62v.706L9.318 9.94l.354-.354-.354-.354L1.94 1.854v.707l.62-.62h-.706l7.378 7.378.354.354.354-.354 7.378-7.378h-.707l.622.62v-.706L9.854 9.232l-.354.354.354.354 7.378 7.378.708-.707-7.38-7.378v.708l7.38-7.38.353-.353-.353-.353-.622-.622-.353-.353-.354.352-7.378 7.38h.708L2.56 1.23 2.208.88l-.353.353-.622.62-.353.355.352.353 7.38 7.38v-.708l-7.38 7.38-.353.353.352.353.622.622.353.353.354-.353 7.38-7.38h-.708l7.38 7.38z"),r)," "]),s)," "]),l)," "]),a)," ",(d=document.createElement("div"),d.setAttribute("class","Browser-headerBar"),_appendChild(d,[" ",(o=document.createElement("button"),o.setAttribute("type","button"),o.onclick=e.toggleSearch,o.setAttribute("class","Browser-searchToggle"),_appendChild(o,[" ",(c=document.createElementNS(_svgNamespace,"svg"),c.setAttribute("viewBox","0 0 100 100"),c.setAttribute("class","UppyIcon"),_appendChild(c,[" ",(i=document.createElementNS(_svgNamespace,"path"),i.setAttribute("d","M87.533 80.03L62.942 55.439c3.324-4.587 5.312-10.207 5.312-16.295 0-.312-.043-.611-.092-.908.05-.301.093-.605.093-.922 0-15.36-12.497-27.857-27.857-27.857-.273 0-.536.043-.799.08-.265-.037-.526-.08-.799-.08-15.361 0-27.858 12.497-27.858 27.857 0 .312.042.611.092.909a5.466 5.466 0 0 0-.093.921c0 15.36 12.496 27.858 27.857 27.858.273 0 .535-.043.8-.081.263.038.524.081.798.081 5.208 0 10.071-1.464 14.245-3.963L79.582 87.98a5.603 5.603 0 0 0 3.976 1.647 5.621 5.621 0 0 0 3.975-9.597zM39.598 55.838c-.265-.038-.526-.081-.8-.081-9.16 0-16.612-7.452-16.612-16.612 0-.312-.042-.611-.092-.908.051-.301.093-.605.093-.922 0-9.16 7.453-16.612 16.613-16.612.272 0 .534-.042.799-.079.263.037.525.079.799.079 9.16 0 16.612 7.452 16.612 16.612 0 .312.043.611.092.909-.05.301-.094.604-.094.921 0 9.16-7.452 16.612-16.612 16.612-.274 0-.536.043-.798.081z"),i)," "]),c)," "]),o)," ",Breadcrumbs({getFolder:e.getFolder,directories:e.directories,title:e.title})," ",(n=document.createElement("button"),n.setAttribute("type","button"),n.onclick=e.logout,n.setAttribute("class","Browser-userLogout"),n.textContent="Log out",n)," "]),d)," "]),u)," ",(p=document.createElement("div"),p.setAttribute("class","Browser-body"),_appendChild(p,[" ",Table({columns:[{name:"Name",key:"title"}],folders:b,files:h,activeRow:e.isActiveRow,sortByTitle:e.sortByTitle,sortByDate:e.sortByDate,handleFileClick:e.addFile,handleFolderClick:e.getNextFolder,getItemName:e.getItemName,getItemIcon:e.getItemIcon,handleScroll:e.handleScroll})," "]),p)," "]),m};
},{"./Breadcrumbs":91,"./Table":94,"yo-yoify/lib/appendChild":83}],93:[function(require,module,exports){
"use strict";var _appendChild=require("yo-yoify/lib/appendChild");module.exports=function(e){var t,n;return n=document.createElement("div"),n.setAttribute("class","UppyProvider-loading"),_appendChild(n,[" ",(t=document.createElement("span"),t.textContent="Loading...",t)," "]),n};
},{"yo-yoify/lib/appendChild":83}],94:[function(require,module,exports){
"use strict";var _appendChild=require("yo-yoify/lib/appendChild"),Row=require("./TableRow");module.exports=function(e){var t,n;return n=document.createElement("table"),n.onscroll=e.handleScroll,n.setAttribute("class","BrowserTable"),_appendChild(n,[" ",(t=document.createElement("tbody"),_appendChild(t,[" ",e.folders.map(function(t){return Row({title:e.getItemName(t),active:e.activeRow(t),getItemIcon:function(){return e.getItemIcon(t)},handleClick:function(){return e.handleFolderClick(t)},columns:e.columns})})," ",e.files.map(function(t){return Row({title:e.getItemName(t),active:e.activeRow(t),getItemIcon:function(){return e.getItemIcon(t)},handleClick:function(){return e.handleFileClick(t)},columns:e.columns})})," "]),t)," "]),n};
},{"./TableRow":96,"yo-yoify/lib/appendChild":83}],95:[function(require,module,exports){
"use strict";var _appendChild=require("yo-yoify/lib/appendChild");module.exports=function(e){var r;return r=document.createElement("td"),r.setAttribute("class","BrowserTable-rowColumn BrowserTable-column"),_appendChild(r,[" ",e.getItemIcon()," ",e.value," "]),r};
},{"yo-yoify/lib/appendChild":83}],96:[function(require,module,exports){
"use strict";var _appendChild=require("yo-yoify/lib/appendChild"),Column=require("./TableColumn");module.exports=function(e){var t,r=e.active?"BrowserTable-row is-active":"BrowserTable-row";return t=document.createElement("tr"),t.onclick=e.handleClick,t.setAttribute("class",""+String(r)),_appendChild(t,[" ",Column({getItemIcon:e.getItemIcon,value:e.title})," "]),t};
},{"./TableColumn":95,"yo-yoify/lib/appendChild":83}],97:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},AuthView=require("./AuthView"),Browser=require("./Browser"),LoaderView=require("./Loader"),Utils=require("../core/Utils");module.exports=function(){function t(e,i){_classCallCheck(this,t),this.plugin=e,this.Provider=e[e.id];var n={viewType:"list"};this.opts=_extends({},n,i),this.addFile=this.addFile.bind(this),this.filterItems=this.filterItems.bind(this),this.filterQuery=this.filterQuery.bind(this),this.toggleSearch=this.toggleSearch.bind(this),this.getFolder=this.getFolder.bind(this),this.getNextFolder=this.getNextFolder.bind(this),this.logout=this.logout.bind(this),this.checkAuth=this.checkAuth.bind(this),this.handleAuth=this.handleAuth.bind(this),this.handleDemoAuth=this.handleDemoAuth.bind(this),this.sortByTitle=this.sortByTitle.bind(this),this.sortByDate=this.sortByDate.bind(this),this.isActiveRow=this.isActiveRow.bind(this),this.handleError=this.handleError.bind(this),this.handleScroll=this.handleScroll.bind(this),this.render=this.render.bind(this)}return t.prototype.updateState=function(t){var e,i=this.plugin.stateId,n=this.plugin.core.state;this.plugin.core.setState((e={},e[i]=_extends({},n[i],t),e))},t.prototype._updateFilesAndFolders=function(t,e,i){var n=this;this.plugin.getItemSubList(t).forEach(function(t){n.plugin.isFolder(t)?i.push(t):e.push(t)}),this.updateState({folders:i,files:e})},t.prototype.checkAuth=function(){var t=this;this.updateState({checkAuthInProgress:!0}),this.Provider.checkAuth().then(function(e){t.updateState({checkAuthInProgress:!1}),t.plugin.onAuth(e)}).catch(function(e){t.updateState({checkAuthInProgress:!1}),t.handleError(e)})},t.prototype.getFolder=function(t,e){var i=this;return this._loaderWrapper(this.Provider.list(t),function(n){var r=[],s=[],o=void 0,l=i.plugin.core.getState()[i.plugin.stateId],h=l.directories.findIndex(function(e){return t===e.id});o=-1!==h?l.directories.slice(0,h+1):l.directories.concat([{id:t,title:e||i.plugin.getItemName(n)}]),i._updateFilesAndFolders(n,s,r),i.updateState({directories:o})},this.handleError)},t.prototype.getNextFolder=function(t){var e=this.plugin.getItemRequestPath(t);this.getFolder(e,this.plugin.getItemName(t))},t.prototype.addFile=function(t){var e=this,i={source:this.plugin.id,data:this.plugin.getItemData(t),name:this.plugin.getItemName(t)||this.plugin.getItemId(t),type:this.plugin.getMimeType(t),isRemote:!0,body:{fileId:this.plugin.getItemId(t)},remote:{host:this.plugin.opts.host,url:""+this.Provider.fileUrl(this.plugin.getItemRequestPath(t)),body:{fileId:this.plugin.getItemId(t)}}};Utils.getFileType(i).then(function(n){Utils.isPreviewSupported(n[1])&&(i.preview=e.plugin.getItemThumbnailUrl(t)),e.plugin.core.log("Adding remote file"),e.plugin.core.addFile(i)})},t.prototype.logout=function(){var t=this;this.Provider.logout(location.href).then(function(t){return t.json()}).then(function(e){if(e.ok){var i={authenticated:!1,files:[],folders:[],directories:[]};t.updateState(i)}}).catch(this.handleError)},t.prototype.filterQuery=function(t){var e=this.plugin.core.getState()[this.plugin.stateId];this.updateState(_extends({},e,{filterInput:t.target.value}))},t.prototype.toggleSearch=function(){var t=this.plugin.core.getState()[this.plugin.stateId],e=document.querySelector(".Browser-searchInput");this.updateState(_extends({},t,{isSearchVisible:!t.isSearchVisible,filterInput:""})),e.value="",t.isSearchVisible||e.focus()},t.prototype.filterItems=function(t){var e=this,i=this.plugin.core.getState()[this.plugin.stateId];return t.filter(function(t){return-1!==e.plugin.getItemName(t).toLowerCase().indexOf(i.filterInput.toLowerCase())})},t.prototype.sortByTitle=function(){var t=this,e=_extends({},this.plugin.core.getState()[this.plugin.stateId]),i=e.files,n=e.folders,r=e.sorting,s=i.sort(function(e,i){return"titleDescending"===r?t.plugin.getItemName(i).localeCompare(t.plugin.getItemName(e)):t.plugin.getItemName(e).localeCompare(t.plugin.getItemName(i))}),o=n.sort(function(e,i){return"titleDescending"===r?t.plugin.getItemName(i).localeCompare(t.plugin.getItemName(e)):t.plugin.getItemName(e).localeCompare(t.plugin.getItemName(i))});this.updateState(_extends({},e,{files:s,folders:o,sorting:"titleDescending"===r?"titleAscending":"titleDescending"}))},t.prototype.sortByDate=function(){var t=this,e=_extends({},this.plugin.core.getState()[this.plugin.stateId]),i=e.files,n=e.folders,r=e.sorting,s=i.sort(function(e,i){var n=new Date(t.plugin.getItemModifiedDate(e)),s=new Date(t.plugin.getItemModifiedDate(i));return"dateDescending"===r?n>s?-1:n<s?1:0:n>s?1:n<s?-1:0}),o=n.sort(function(e,i){var n=new Date(t.plugin.getItemModifiedDate(e)),s=new Date(t.plugin.getItemModifiedDate(i));return"dateDescending"===r?n>s?-1:n<s?1:0:n>s?1:n<s?-1:0});this.updateState(_extends({},e,{files:s,folders:o,sorting:"dateDescending"===r?"dateAscending":"dateDescending"}))},t.prototype.sortBySize=function(){var t=this,e=_extends({},this.plugin.core.getState()[this.plugin.stateId]),i=e.files,n=e.sorting;if(i.length&&this.plugin.getItemData(i[0]).size){var r=i.sort(function(e,i){var r=t.plugin.getItemData(e).size,s=t.plugin.getItemData(i).size;return"sizeDescending"===n?r>s?-1:r<s?1:0:r>s?1:r<s?-1:0});this.updateState(_extends({},e,{files:r,sorting:"sizeDescending"===n?"sizeAscending":"sizeDescending"}))}},t.prototype.isActiveRow=function(t){return this.plugin.core.getState()[this.plugin.stateId].activeRow===this.plugin.getItemId(t)},t.prototype.handleDemoAuth=function(){var t=this.plugin.core.getState()[this.plugin.stateId];this.updateState({},t,{authenticated:!0})},t.prototype.handleAuth=function(){var t=this,e=Math.floor(999999*Math.random())+1,i=location.href+(location.search?"&":"?")+"id="+e,n=btoa(JSON.stringify({redirect:i})),r=this.Provider.authUrl()+"?state="+n,s=window.open(r,"_blank");!function e(){var n=void 0;try{n=s.location.href}catch(t){if(t instanceof DOMException||t instanceof TypeError)return setTimeout(e,100);throw t}n&&n.split("#")[0]===i?(s.close(),t._loaderWrapper(t.Provider.checkAuth(),t.plugin.onAuth,t.handleError)):setTimeout(e,100)}()},t.prototype.handleError=function(t){var e=this.plugin.core,i=e.i18n("uppyServerError");e.log(t.toString()),e.info({message:i,details:t.toString()},"error",5e3)},t.prototype.handleScroll=function(t){var e=this,i=t.target.scrollHeight-(t.target.scrollTop+t.target.offsetHeight),n=this.plugin.getNextPagePath?this.plugin.getNextPagePath():null;i<50&&n&&!this._isHandlingScroll&&(this.Provider.list(n).then(function(t){var i=e.plugin.core.getState()[e.plugin.stateId],n=i.files,r=i.folders;e._updateFilesAndFolders(t,n,r)}).catch(this.handleError).then(function(){e._isHandlingScroll=!1}),this._isHandlingScroll=!0)},t.prototype._loaderWrapper=function(t,e,i){var n=this;t.then(e).catch(i).then(function(){return n.updateState({loading:!1})}),this.updateState({loading:!0})},t.prototype.render=function(t){var e=t[this.plugin.stateId],i=e.authenticated,n=e.checkAuthInProgress;if(e.loading)return LoaderView();if(!i)return AuthView({pluginName:this.plugin.title,demo:this.plugin.opts.demo,checkAuth:this.checkAuth,handleAuth:this.handleAuth,handleDemoAuth:this.handleDemoAuth,checkAuthInProgress:n});var r=_extends({},t[this.plugin.stateId],{getNextFolder:this.getNextFolder,getFolder:this.getFolder,addFile:this.addFile,filterItems:this.filterItems,filterQuery:this.filterQuery,toggleSearch:this.toggleSearch,sortByTitle:this.sortByTitle,sortByDate:this.sortByDate,logout:this.logout,demo:this.plugin.opts.demo,isActiveRow:this.isActiveRow,getItemName:this.plugin.getItemName,getItemIcon:this.plugin.getItemIcon,handleScroll:this.handleScroll,title:this.plugin.title,viewType:this.opts.viewType});return Browser(r)},t}();
},{"../core/Utils":87,"./AuthView":89,"./Browser":92,"./Loader":93}],98:[function(require,module,exports){
"use strict";var Core=require("./core/index.js"),Plugin=require("./plugins/Plugin"),Dashboard=require("./plugins/Dashboard/index.js"),Dummy=require("./plugins/Dummy"),DragDrop=require("./plugins/DragDrop/index.js"),FileInput=require("./plugins/FileInput.js"),GoogleDrive=require("./plugins/GoogleDrive/index.js"),Dropbox=require("./plugins/Dropbox/index.js"),Instagram=require("./plugins/Instagram/index.js"),Webcam=require("./plugins/Webcam/index.js"),StatusBar=require("./plugins/StatusBar"),ProgressBar=require("./plugins/ProgressBar.js"),Informer=require("./plugins/Informer.js"),MetaData=require("./plugins/MetaData.js"),Tus10=require("./plugins/Tus10"),XHRUpload=require("./plugins/XHRUpload"),Transloadit=require("./plugins/Transloadit"),AwsS3=require("./plugins/AwsS3"),RestoreFiles=require("./plugins/RestoreFiles");module.exports={Core:Core,Plugin:Plugin,Dummy:Dummy,StatusBar:StatusBar,ProgressBar:ProgressBar,Informer:Informer,DragDrop:DragDrop,GoogleDrive:GoogleDrive,Dropbox:Dropbox,Instagram:Instagram,FileInput:FileInput,Tus10:Tus10,XHRUpload:XHRUpload,Transloadit:Transloadit,AwsS3:AwsS3,Dashboard:Dashboard,MetaData:MetaData,Webcam:Webcam,RestoreFiles:RestoreFiles};
},{"./core/index.js":88,"./plugins/AwsS3":99,"./plugins/Dashboard/index.js":110,"./plugins/DragDrop/index.js":111,"./plugins/Dropbox/index.js":113,"./plugins/Dummy":114,"./plugins/FileInput.js":115,"./plugins/GoogleDrive/index.js":116,"./plugins/Informer.js":117,"./plugins/Instagram/index.js":118,"./plugins/MetaData.js":119,"./plugins/Plugin":120,"./plugins/ProgressBar.js":121,"./plugins/RestoreFiles":124,"./plugins/StatusBar":126,"./plugins/Transloadit":129,"./plugins/Tus10":130,"./plugins/Webcam/index.js":139,"./plugins/XHRUpload":140}],99:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Plugin=require("../Plugin");module.exports=function(e){function t(r,o){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,e.call(this,r,o));n.type="uploader",n.id="AwsS3",n.title="AWS S3";var s={strings:{preparingUpload:"Preparing upload..."}},a={getUploadParameters:n.getUploadParameters.bind(n),locale:s};return n.opts=_extends({},a,o),n.locale=_extends({},s,n.opts.locale),n.locale.strings=_extends({},s.strings,n.opts.locale.strings),n.prepareUpload=n.prepareUpload.bind(n),n}return _inherits(t,e),t.prototype.getUploadParameters=function(e){if(!this.opts.host)throw new Error("Expected a `host` option containing an uppy-server address.");var t=encodeURIComponent(e.name),r=encodeURIComponent(e.type.general+"/"+e.type.specific);return fetch(this.opts.host+"/s3/params?filename="+t+"&type="+r,{method:"get",headers:{accept:"application/json"}}).then(function(e){return e.json()})},t.prototype.prepareUpload=function(e){var t=this;return e.forEach(function(e){t.core.emit("core:preprocess-progress",e,{mode:"determinate",message:t.locale.strings.preparingUpload,value:0})}),this.core.setState({xhrUpload:_extends({},this.core.state.xhrUpload,{responseUrlFieldName:"location",getResponseData:function(e){function t(t){var r=e.responseXML.querySelector(t);return r?r.textContent:""}return e.responseXML?{location:t("Location"),bucket:t("Bucket"),key:t("Key"),etag:t("ETag")}:{location:e.responseURL}},getResponseError:function(e){if(e.responseXML){var t=e.responseXML.querySelector("Error > Message");return new Error(t.textContent)}}})}),Promise.all(e.map(function(e){var r=t.core.getFile(e);return t.opts.getUploadParameters(r).then(function(e){return t.core.emit("core:preprocess-progress",r.id,{mode:"determinate",message:t.locale.strings.preparingUpload,value:1}),e})})).then(function(r){var o={};e.forEach(function(e,n){var s=t.core.getFile(e),a=r[n],i=a.method,p=void 0===i?"post":i,c=a.url,l=a.fields,u=_extends({},s,{meta:_extends({},s.meta,l),xhrUpload:{method:p,formData:"post"===p.toLowerCase(),endpoint:c,fieldName:"file",metaFields:Object.keys(l)}});o[e]=u}),t.core.setState({files:_extends({},t.core.getState().files,o)}),e.forEach(function(e){t.core.emit("core:preprocess-complete",e)})})},t.prototype.install=function(){this.core.addPreProcessor(this.prepareUpload)},t.prototype.uninstall=function(){this.core.removePreProcessor(this.prepareUpload)},t}(Plugin);
},{"../Plugin":120}],100:[function(require,module,exports){
"use strict";var _appendChild=require("yo-yoify/lib/appendChild");module.exports=function(t){var e,n,i,r=(e=document.createElement("input"),e.setAttribute("type","file"),e.setAttribute("name","files[]"),e.setAttribute("multiple","multiple"),e.onchange=t.handleInputChange,e.setAttribute("class","UppyDashboard-input"),e);return i=document.createElement("span"),_appendChild(i,[" ",0===t.acquirers.length?t.i18n("dropPaste"):t.i18n("dropPasteImport")," ",(n=document.createElement("button"),n.setAttribute("type","button"),n.onclick=function(t){r.click()},n.setAttribute("class","UppyDashboard-browse"),_appendChild(n,[t.i18n("browse")]),n)," ",r," "]),i};
},{"yo-yoify/lib/appendChild":83}],101:[function(require,module,exports){
"use strict";var _appendChild=require("yo-yoify/lib/appendChild"),_onload=require("on-load"),FileList=require("./FileList"),Tabs=require("./Tabs"),FileCard=require("./FileCard"),UploadBtn=require("./UploadBtn"),_require=require("../../core/Utils"),isTouchDevice=_require.isTouchDevice,toArray=_require.toArray,_require2=require("./icons"),closeIcon=_require2.closeIcon;module.exports=function(e){function t(t){t.preventDefault(),toArray(t.target.files).forEach(function(t){e.addFile({source:e.id,name:t.name,type:t.type,data:t})})}function a(t){t.preventDefault(),toArray(t.clipboardData.items).forEach(function(t){if("file"===t.kind){var a=t.getAsFile();e.log("File pasted"),e.addFile({source:e.id,name:t.name,type:t.type,data:a})}})}var i,n,r,l,s,o,d,p,u,c,h,b;return b=document.createElement("div"),_onload(b,function(){return e.updateDashboardElWidth()},null,5),b.setAttribute("aria-hidden",""+String(e.inline?"false":e.modal.isHidden)),b.setAttribute("aria-label",""+String(e.inline?e.i18n("dashboardTitle"):e.i18n("dashboardWindowTitle"))),b.setAttribute("role","dialog"),b.onpaste=a,b.setAttribute("class","Uppy UppyTheme--default UppyDashboard\n                          "+String(isTouchDevice()?"Uppy--isTouchDevice":"")+"\n                          "+String(e.semiTransparent?"UppyDashboard--semiTransparent":"")+"\n                          "+String(e.inline?"":"UppyDashboard--modal")+"\n                          "+String(e.isWide?"UppyDashboard--wide":"")),_appendChild(b,[" ",(i=document.createElement("div"),i.onclick=e.handleClickOutside,i.setAttribute("class","UppyDashboard-overlay"),i)," ",(h=document.createElement("div"),h.setAttribute("tabindex","0"),h.setAttribute("style","\n          "+String(e.inline&&e.maxWidth?"max-width: "+e.maxWidth+"px;":"")+"\n          "+String(e.inline&&e.maxHeight?"max-height: "+e.maxHeight+"px;":"")+"\n         "),h.setAttribute("class","UppyDashboard-inner"),_appendChild(h,[" ",(n=document.createElement("button"),n.setAttribute("type","button"),n.setAttribute("aria-label",""+String(e.i18n("closeModal"))),n.setAttribute("title",""+String(e.i18n("closeModal"))),n.onclick=e.hideModal,n.setAttribute("class","UppyDashboard-close"),_appendChild(n,[closeIcon()]),n)," ",(c=document.createElement("div"),c.setAttribute("class","UppyDashboard-innerWrap"),_appendChild(c,[" ",Tabs({files:e.files,handleInputChange:t,acquirers:e.acquirers,panelSelectorPrefix:e.panelSelectorPrefix,showPanel:e.showPanel,i18n:e.i18n})," ",FileCard({files:e.files,fileCardFor:e.fileCardFor,done:e.fileCardDone,metaFields:e.metaFields,log:e.log,i18n:e.i18n})," ",(l=document.createElement("div"),l.setAttribute("class","UppyDashboard-filesContainer"),_appendChild(l,[" ",FileList({acquirers:e.acquirers,files:e.files,handleInputChange:t,showFileCard:e.showFileCard,showProgressDetails:e.showProgressDetails,totalProgress:e.totalProgress,totalFileCount:e.totalFileCount,info:e.info,note:e.note,i18n:e.i18n,log:e.log,removeFile:e.removeFile,pauseAll:e.pauseAll,resumeAll:e.resumeAll,pauseUpload:e.pauseUpload,startUpload:e.startUpload,cancelUpload:e.cancelUpload,resumableUploads:e.resumableUploads,isWide:e.isWide})," ",(r=document.createElement("div"),r.setAttribute("class","UppyDashboard-actions"),_appendChild(r,[" ",!e.hideUploadButton&&!e.autoProceed&&e.newFiles.length>0?UploadBtn({i18n:e.i18n,startUpload:e.startUpload,newFileCount:e.newFiles.length}):null," "]),r)," "]),l)," ",(p=document.createElement("div"),p.setAttribute("role","tabpanel"),p.setAttribute("aria-hidden",""+String(e.activePanel?"false":"true")),p.setAttribute("class","UppyDashboardContent-panel"),_appendChild(p,[" ",(d=document.createElement("div"),d.setAttribute("class","UppyDashboardContent-bar"),_appendChild(d,[" ",(s=document.createElement("h2"),s.setAttribute("class","UppyDashboardContent-title"),_appendChild(s,[" ",e.i18n("importFrom")," ",e.activePanel?e.activePanel.name:null," "]),s)," ",(o=document.createElement("button"),o.setAttribute("type","button"),o.onclick=e.hideAllPanels,o.setAttribute("class","UppyDashboardContent-back"),_appendChild(o,[e.i18n("done")]),o)," "]),d)," ",e.activePanel?e.activePanel.render(e.state):""," "]),p)," ",(u=document.createElement("div"),u.setAttribute("class","UppyDashboard-progressindicators"),_appendChild(u,[" ",e.progressindicators.map(function(t){return t.render(e.state)})," "]),u)," "]),c)," "]),h)," "]),b};
},{"../../core/Utils":87,"./FileCard":102,"./FileList":105,"./Tabs":106,"./UploadBtn":107,"./icons":109,"on-load":48,"yo-yoify/lib/appendChild":83}],102:[function(require,module,exports){
"use strict";var _appendChild=require("yo-yoify/lib/appendChild"),_svgNamespace="http://www.w3.org/2000/svg",getFileTypeIcon=require("./getFileTypeIcon"),_require=require("./icons"),checkIcon=_require.checkIcon;module.exports=function(e){var t,a,i,r,n,s,d,l,p,c,o,u,b,m,h,A,y,C,g,v,E=!!e.fileCardFor&&e.files[e.fileCardFor],F={},f=function(t){13===t.keyCode&&e.done(F,E.id);var a=t.target.value,i=t.target.dataset.name;F[i]=a};return d=document.createElement("div"),d.setAttribute("aria-hidden",""+String(!e.fileCardFor)),d.setAttribute("class","UppyDashboardFileCard"),_appendChild(d,[" ",(r=document.createElement("div"),r.setAttribute("class","UppyDashboardContent-bar"),_appendChild(r,[" ",(a=document.createElement("h2"),a.setAttribute("class","UppyDashboardContent-title"),_appendChild(a,["Editing ",(t=document.createElement("span"),t.setAttribute("class","UppyDashboardContent-titleFile"),_appendChild(t,[E.meta?E.meta.name:E.name]),t)]),a)," ",(i=document.createElement("button"),i.setAttribute("type","button"),i.setAttribute("title","Finish editing file"),i.onclick=function(){return e.done(F,E.id)},i.setAttribute("class","UppyDashboardContent-back"),i.textContent="Done",i)," "]),r)," ",e.fileCardFor?(b=document.createElement("div"),b.setAttribute("class","UppyDashboardFileCard-inner"),_appendChild(b,[" ",(l=document.createElement("div"),l.setAttribute("style","background-color: "+String(getFileTypeIcon(E.type.general,E.type.specific).color)),l.setAttribute("class","UppyDashboardFileCard-preview"),_appendChild(l,[" ",E.preview?(m=document.createElement("img"),m.setAttribute("alt",""+String(E.name)),m.setAttribute("src",""+String(E.preview)),m):(v=document.createElement("div"),v.setAttribute("class","UppyDashboardItem-previewIconWrap"),_appendChild(v,[" ",(h=document.createElement("span"),h.setAttribute("style","color: "+String(getFileTypeIcon(E.type.general,E.type.specific).color)),h.setAttribute("class","UppyDashboardItem-previewIcon"),_appendChild(h,[getFileTypeIcon(E.type.general,E.type.specific).icon]),h)," ",(g=document.createElementNS(_svgNamespace,"svg"),g.setAttribute("width","72"),g.setAttribute("height","93"),g.setAttribute("viewBox","0 0 72 93"),g.setAttribute("class","UppyDashboardItem-previewIconBg"),_appendChild(g,[(C=document.createElementNS(_svgNamespace,"g"),_appendChild(C,[(A=document.createElementNS(_svgNamespace,"path"),A.setAttribute("d","M24.08 5h38.922A2.997 2.997 0 0 1 66 8.003v74.994A2.997 2.997 0 0 1 63.004 86H8.996A2.998 2.998 0 0 1 6 83.01V22.234L24.08 5z"),A.setAttribute("fill","#FFF"),A),(y=document.createElementNS(_svgNamespace,"path"),y.setAttribute("d","M24 5L6 22.248h15.007A2.995 2.995 0 0 0 24 19.244V5z"),y.setAttribute("fill","#E4E4E4"),y)]),C)]),g)," "]),v)," "]),l)," ",(u=document.createElement("div"),u.setAttribute("class","UppyDashboardFileCard-info"),_appendChild(u,[" ",(o=document.createElement("fieldset"),o.setAttribute("class","UppyDashboardFileCard-fieldset"),_appendChild(o,[" ",(p=document.createElement("label"),p.setAttribute("class","UppyDashboardFileCard-label"),p.textContent="Name",p)," ",(c=document.createElement("input"),c.setAttribute("data-name","name"),c.setAttribute("type","text"),c.setAttribute("value",""+String(E.meta.name)),c.onkeyup=f,c.setAttribute("class","UppyDashboardFileCard-input"),c)," "]),o)," ",function(t){return(e.metaFields||[]).map(function(e){var a,i,r;return r=document.createElement("fieldset"),r.setAttribute("class","UppyDashboardFileCard-fieldset"),_appendChild(r,[" ",(a=document.createElement("label"),a.setAttribute("class","UppyDashboardFileCard-label"),_appendChild(a,[e.name]),a)," ",(i=document.createElement("input"),i.setAttribute("type","text"),i.setAttribute("data-name",""+String(e.id)),i.setAttribute("value",""+String(t.meta[e.id])),i.setAttribute("placeholder",""+String(e.placeholder||"")),i.onkeyup=f,i.setAttribute("class","UppyDashboardFileCard-input"),i)]),r})}(E)," "]),u)," "]),b):null," ",(s=document.createElement("div"),s.setAttribute("class","UppyDashboard-actions"),_appendChild(s,[" ",(n=document.createElement("button"),n.setAttribute("type","button"),n.setAttribute("title","Finish editing file"),n.onclick=function(){return e.done(F,E.id)},n.setAttribute("class","UppyButton--circular UppyButton--blue UppyDashboardFileCard-done"),_appendChild(n,[checkIcon()]),n)," "]),s)," "]),d};
},{"./getFileTypeIcon":108,"./icons":109,"yo-yoify/lib/appendChild":83}],103:[function(require,module,exports){
"use strict";var _appendChild=require("yo-yoify/lib/appendChild"),_svgNamespace="http://www.w3.org/2000/svg",_require=require("../../core/Utils"),getETA=_require.getETA,getSpeed=_require.getSpeed,prettyETA=_require.prettyETA,getFileNameAndExtension=_require.getFileNameAndExtension,truncateString=_require.truncateString,copyToClipboard=_require.copyToClipboard,prettyBytes=require("prettier-bytes"),FileItemProgress=require("./FileItemProgress"),getFileTypeIcon=require("./getFileTypeIcon"),_require2=require("./icons"),iconEdit=_require2.iconEdit,iconCopy=_require2.iconCopy;module.exports=function(e){var t,i,r,s,a,n,p,l,o,d,u,c,m,b,g,A,y,h,E,_,v,C,I,S,U,f,F,D=e.file,N=e.acquirers,q=D.progress.uploadComplete,w=D.progress.uploadStarted,T=D.progress.uploadStarted&&!D.progress.uploadComplete,k=D.isPaused||!1,L=getFileNameAndExtension(D.meta.name)[0],x=e.isWide?truncateString(L,15):L;return d=document.createElement("li"),d.setAttribute("id","uppy_"+String(D.id)),d.setAttribute("title",""+String(D.meta.name)),d.setAttribute("class","UppyDashboardItem\n                        "+String(T?"is-inprogress":"")+"\n                        "+String(q?"is-complete":"")+"\n                        "+String(k?"is-paused":"")+"\n                        "+String(e.resumableUploads?"is-resumable":"")),_appendChild(d,[" ",(s=document.createElement("div"),s.setAttribute("class","UppyDashboardItem-preview"),_appendChild(s,[" ",(t=document.createElement("div"),t.setAttribute("style","background-color: "+String(getFileTypeIcon(D.type.general,D.type.specific).color)),t.setAttribute("class","UppyDashboardItem-previewInnerWrap"),_appendChild(t,[" ",D.preview?(u=document.createElement("img"),u.setAttribute("alt",""+String(D.name)),u.setAttribute("src",""+String(D.preview)),u):(y=document.createElement("div"),y.setAttribute("class","UppyDashboardItem-previewIconWrap"),_appendChild(y,[" ",(c=document.createElement("span"),c.setAttribute("style","color: "+String(getFileTypeIcon(D.type.general,D.type.specific).color)),c.setAttribute("class","UppyDashboardItem-previewIcon"),_appendChild(c,[getFileTypeIcon(D.type.general,D.type.specific).icon]),c)," ",(A=document.createElementNS(_svgNamespace,"svg"),A.setAttribute("width","72"),A.setAttribute("height","93"),A.setAttribute("viewBox","0 0 72 93"),A.setAttribute("class","UppyDashboardItem-previewIconBg"),_appendChild(A,[(g=document.createElementNS(_svgNamespace,"g"),_appendChild(g,[(m=document.createElementNS(_svgNamespace,"path"),m.setAttribute("d","M24.08 5h38.922A2.997 2.997 0 0 1 66 8.003v74.994A2.997 2.997 0 0 1 63.004 86H8.996A2.998 2.998 0 0 1 6 83.01V22.234L24.08 5z"),m.setAttribute("fill","#FFF"),m),(b=document.createElementNS(_svgNamespace,"path"),b.setAttribute("d","M24 5L6 22.248h15.007A2.995 2.995 0 0 0 24 19.244V5z"),b.setAttribute("fill","#E4E4E4"),b)]),g)]),A)," "]),y)," "]),t)," ",(r=document.createElement("div"),r.setAttribute("class","UppyDashboardItem-progress"),_appendChild(r,[" ",(i=document.createElement("button"),i.setAttribute("type","button"),i.setAttribute("title",""+String(q?"upload complete":e.resumableUploads?D.isPaused?"resume upload":"pause upload":"cancel upload")),i.onclick=function(t){q||(e.resumableUploads?e.pauseUpload(D.id):e.cancelUpload(D.id))},i.setAttribute("class","UppyDashboardItem-progressBtn"),_appendChild(i,[" ",FileItemProgress({progress:D.progress.percentage,fileID:D.id})," "]),i)," ",e.showProgressDetails?(h=document.createElement("div"),h.setAttribute("title",""+String(e.i18n("fileProgress"))),h.setAttribute("aria-label",""+String(e.i18n("fileProgress"))),h.setAttribute("class","UppyDashboardItem-progressInfo"),_appendChild(h,[" ",D.isPaused||q?null:(E=document.createElement("span"),_appendChild(E,[prettyETA(getETA(D.progress))," ・ ↑ ",prettyBytes(getSpeed(D.progress)),"/s"]),E)," "]),h):null," "]),r)," "]),s)," ",(l=document.createElement("div"),l.setAttribute("class","UppyDashboardItem-info"),_appendChild(l,[" ",(a=document.createElement("h4"),a.setAttribute("title",""+String(L)),a.setAttribute("class","UppyDashboardItem-name"),_appendChild(a,[" ",D.uploadURL?(_=document.createElement("a"),_.setAttribute("href",""+String(D.uploadURL)),_.setAttribute("target","_blank"),_appendChild(_,[" ",D.extension?x+"."+D.extension:x," "]),_):D.extension?x+"."+D.extension:x," "]),a)," ",(p=document.createElement("div"),p.setAttribute("class","UppyDashboardItem-status"),_appendChild(p,[" ",(n=document.createElement("div"),n.setAttribute("class","UppyDashboardItem-statusSize"),_appendChild(n,[D.data.size?prettyBytes(D.data.size):""]),n)," ",D.source?(v=document.createElement("div"),v.setAttribute("class","UppyDashboardItem-sourceIcon"),_appendChild(v,[" ",N.map(function(e){var t;if(e.id===D.source)return t=document.createElement("span"),t.setAttribute("title",""+String(e.name)),_appendChild(t,[e.icon()]),t})," "]),v):""," "]),p)," ",w?null:(C=document.createElement("button"),C.setAttribute("type","button"),C.setAttribute("aria-label","Edit file"),C.setAttribute("title","Edit file"),C.onclick=function(t){return e.showFileCard(D.id)},C.setAttribute("class","UppyDashboardItem-edit"),_appendChild(C,[" ",iconEdit()]),C)," ",D.uploadURL?(I=document.createElement("button"),I.setAttribute("type","button"),I.setAttribute("aria-label","Copy link"),I.setAttribute("title","Copy link"),I.onclick=function(){copyToClipboard(D.uploadURL,e.i18n("copyLinkToClipboardFallback")).then(function(){e.log("Link copied to clipboard."),e.info(e.i18n("copyLinkToClipboardSuccess"),"info",3e3)}).catch(e.log)},I.setAttribute("class","UppyDashboardItem-copyLink"),_appendChild(I,[iconCopy()]),I):null," "]),l)," ",(o=document.createElement("div"),o.setAttribute("class","UppyDashboardItem-action"),_appendChild(o,[" ",q?null:(F=document.createElement("button"),F.setAttribute("type","button"),F.setAttribute("aria-label","Remove file"),F.setAttribute("title","Remove file"),F.onclick=function(){return e.removeFile(D.id)},F.setAttribute("class","UppyDashboardItem-remove"),_appendChild(F,[" ",(f=document.createElementNS(_svgNamespace,"svg"),f.setAttribute("width","22"),f.setAttribute("height","21"),f.setAttribute("viewBox","0 0 18 17"),f.setAttribute("class","UppyIcon"),_appendChild(f,[" ",(S=document.createElementNS(_svgNamespace,"ellipse"),S.setAttribute("cx","8.62"),S.setAttribute("cy","8.383"),S.setAttribute("rx","8.62"),S.setAttribute("ry","8.383"),S)," ",(U=document.createElementNS(_svgNamespace,"path"),U.setAttribute("stroke","#FFF"),U.setAttribute("fill","#FFF"),U.setAttribute("d","M11 6.147L10.85 6 8.5 8.284 6.15 6 6 6.147 8.35 8.43 6 10.717l.15.146L8.5 8.578l2.35 2.284.15-.146L8.65 8.43z"),U)," "]),f)," "]),F)," "]),o)," "]),d};
},{"../../core/Utils":87,"./FileItemProgress":104,"./getFileTypeIcon":108,"./icons":109,"prettier-bytes":52,"yo-yoify/lib/appendChild":83}],104:[function(require,module,exports){
"use strict";var _svgNamespace="http://www.w3.org/2000/svg",_appendChild=require("yo-yoify/lib/appendChild"),circleLength=2*Math.PI*15;module.exports=function(t){var e,s,r,i,a,c,u,n,o,l;return l=document.createElementNS(_svgNamespace,"svg"),l.setAttribute("width","70"),l.setAttribute("height","70"),l.setAttribute("viewBox","0 0 36 36"),l.setAttribute("class","UppyIcon UppyIcon-progressCircle"),_appendChild(l,[" ",(r=document.createElementNS(_svgNamespace,"g"),r.setAttribute("class","progress-group"),_appendChild(r,[" ",(e=document.createElementNS(_svgNamespace,"circle"),e.setAttribute("r","15"),e.setAttribute("cx","18"),e.setAttribute("cy","18"),e.setAttribute("stroke-width","2"),e.setAttribute("fill","none"),e.setAttribute("class","bg"),e)," ",(s=document.createElementNS(_svgNamespace,"circle"),s.setAttribute("r","15"),s.setAttribute("cx","18"),s.setAttribute("cy","18"),s.setAttribute("transform","rotate(-90, 18, 18)"),s.setAttribute("stroke-width","2"),s.setAttribute("fill","none"),s.setAttribute("stroke-dasharray",""+String(circleLength)),s.setAttribute("stroke-dashoffset",""+String(circleLength-circleLength/100*t.progress)),s.setAttribute("class","progress"),s)," "]),r)," ",(i=document.createElementNS(_svgNamespace,"polygon"),i.setAttribute("transform","translate(3, 3)"),i.setAttribute("points","12 20 12 10 20 15"),i.setAttribute("class","play"),i)," ",(u=document.createElementNS(_svgNamespace,"g"),u.setAttribute("transform","translate(14.5, 13)"),u.setAttribute("class","pause"),_appendChild(u,[" ",(a=document.createElementNS(_svgNamespace,"rect"),a.setAttribute("x","0"),a.setAttribute("y","0"),a.setAttribute("width","2"),a.setAttribute("height","10"),a.setAttribute("rx","0"),a)," ",(c=document.createElementNS(_svgNamespace,"rect"),c.setAttribute("x","5"),c.setAttribute("y","0"),c.setAttribute("width","2"),c.setAttribute("height","10"),c.setAttribute("rx","0"),c)," "]),u)," ",(n=document.createElementNS(_svgNamespace,"polygon"),n.setAttribute("transform","translate(2, 3)"),n.setAttribute("points","14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"),n.setAttribute("class","check"),n)," ",(o=document.createElementNS(_svgNamespace,"polygon"),o.setAttribute("transform","translate(2, 2)"),o.setAttribute("points","19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"),o.setAttribute("class","cancel"),o)]),l};
},{"yo-yoify/lib/appendChild":83}],105:[function(require,module,exports){
"use strict";var _appendChild=require("yo-yoify/lib/appendChild"),FileItem=require("./FileItem"),ActionBrowseTagline=require("./ActionBrowseTagline"),_require=require("./icons"),dashboardBgIcon=_require.dashboardBgIcon;module.exports=function(e){var t,i,a,l,r;return t=document.createElement("ul"),t.setAttribute("class","UppyDashboard-files\n                         "+String(0===e.totalFileCount?"UppyDashboard-files--noFiles":"")),_appendChild(t,[" ",0===e.totalFileCount?(l=document.createElement("div"),l.setAttribute("class","UppyDashboard-bgIcon"),_appendChild(l,[" ",dashboardBgIcon()," ",(i=document.createElement("h3"),i.setAttribute("class","UppyDashboard-dropFilesTitle"),_appendChild(i,[" ",ActionBrowseTagline({acquirers:e.acquirers,handleInputChange:e.handleInputChange,i18n:e.i18n})," "]),i)," ",e.note?(r=document.createElement("p"),r.setAttribute("class","UppyDashboard-note"),_appendChild(r,[e.note]),r):""," ",(a=document.createElement("input"),a.setAttribute("type","file"),a.setAttribute("name","files[]"),a.setAttribute("multiple","multiple"),a.onchange=e.handleInputChange,a.setAttribute("class","UppyDashboard-input"),a)," "]),l):null," ",Object.keys(e.files).map(function(t){return FileItem({acquirers:e.acquirers,file:e.files[t],showFileCard:e.showFileCard,showProgressDetails:e.showProgressDetails,info:e.info,log:e.log,i18n:e.i18n,removeFile:e.removeFile,pauseUpload:e.pauseUpload,cancelUpload:e.cancelUpload,resumableUploads:e.resumableUploads,isWide:e.isWide})})," "]),t};
},{"./ActionBrowseTagline":100,"./FileItem":103,"./icons":109,"yo-yoify/lib/appendChild":83}],106:[function(require,module,exports){
"use strict";var _appendChild=require("yo-yoify/lib/appendChild"),ActionBrowseTagline=require("./ActionBrowseTagline"),_require=require("./icons"),localIcon=_require.localIcon;module.exports=function(e){var t,a,n,i,r,s,l,u=0===Object.keys(e.files).length;if(0===e.acquirers.length){var c,d;return d=document.createElement("div"),d.setAttribute("aria-hidden",""+String(u)),d.setAttribute("class","UppyDashboardTabs"),_appendChild(d,[" ",(c=document.createElement("h3"),c.setAttribute("class","UppyDashboardTabs-title"),_appendChild(c,[" ",ActionBrowseTagline({acquirers:e.acquirers,handleInputChange:e.handleInputChange,i18n:e.i18n})," "]),c)," "]),d}var p=(t=document.createElement("input"),t.setAttribute("type","file"),t.setAttribute("name","files[]"),t.setAttribute("multiple","multiple"),t.onchange=e.handleInputChange,t.setAttribute("class","UppyDashboard-input"),t);return l=document.createElement("div"),l.setAttribute("class","UppyDashboardTabs"),_appendChild(l,[" ",(s=document.createElement("nav"),_appendChild(s,[" ",(r=document.createElement("ul"),r.setAttribute("role","tablist"),r.setAttribute("class","UppyDashboardTabs-list"),_appendChild(r,[" ",(i=document.createElement("li"),i.setAttribute("class","UppyDashboardTab"),_appendChild(i,[" ",(n=document.createElement("button"),n.setAttribute("type","button"),n.setAttribute("role","tab"),n.setAttribute("tabindex","0"),n.onclick=function(e){p.click()},n.setAttribute("class","UppyDashboardTab-btn UppyDashboard-focus"),_appendChild(n,[" ",localIcon()," ",(a=document.createElement("h5"),a.setAttribute("class","UppyDashboardTab-name"),_appendChild(a,[e.i18n("myDevice")]),a)," "]),n)," ",p," "]),i)," ",e.acquirers.map(function(t){var a,n,i;return i=document.createElement("li"),i.setAttribute("class","UppyDashboardTab"),_appendChild(i,[" ",(n=document.createElement("button"),n.setAttribute("type","button"),n.setAttribute("role","tab"),n.setAttribute("tabindex","0"),n.setAttribute("aria-controls","UppyDashboardContent-panel--"+String(t.id)),n.setAttribute("aria-selected",""+String(t.isHidden?"false":"true")),n.onclick=function(){return e.showPanel(t.id)},n.setAttribute("class","UppyDashboardTab-btn"),_appendChild(n,[" ",t.icon()," ",(a=document.createElement("h5"),a.setAttribute("class","UppyDashboardTab-name"),_appendChild(a,[t.name]),a)," "]),n)," "]),i})," "]),r)," "]),s)," "]),l};
},{"./ActionBrowseTagline":100,"./icons":109,"yo-yoify/lib/appendChild":83}],107:[function(require,module,exports){
"use strict";var _appendChild=require("yo-yoify/lib/appendChild"),_require=require("./icons"),uploadIcon=_require.uploadIcon;module.exports=function(e){var t,i;return e=e||{},i=document.createElement("button"),i.setAttribute("type","button"),i.setAttribute("title",""+String(e.i18n("uploadAllNewFiles"))),i.setAttribute("aria-label",""+String(e.i18n("uploadAllNewFiles"))),i.onclick=e.startUpload,i.setAttribute("class","UppyButton--circular\n                   UppyButton--blue\n                   UppyDashboard-upload"),_appendChild(i,[" ",uploadIcon()," ",(t=document.createElement("sup"),t.setAttribute("title",""+String(e.i18n("numberOfSelectedFiles"))),t.setAttribute("aria-label",""+String(e.i18n("numberOfSelectedFiles"))),t.setAttribute("class","UppyDashboard-uploadCount"),_appendChild(t,[" ",e.newFileCount]),t)," "]),i};
},{"./icons":109,"yo-yoify/lib/appendChild":83}],108:[function(require,module,exports){
"use strict";var _require=require("./icons"),iconText=_require.iconText,iconAudio=_require.iconAudio,iconVideo=_require.iconVideo,iconPDF=_require.iconPDF;module.exports=function(o,i){return"text"===o?{color:"#000",icon:iconText()}:"audio"===o?{color:"#1abc9c",icon:iconAudio()}:"video"===o?{color:"#2980b9",icon:iconVideo()}:"application"===o&&"pdf"===i?{color:"#e74c3c",icon:iconPDF()}:"image"===o?{color:"#f2f2f2",icon:""}:{color:"#cbcbcb",icon:""}};
},{"./icons":109}],109:[function(require,module,exports){
"use strict";function defaultTabIcon(){var t,e;return e=document.createElementNS(_svgNamespace,"svg"),e.setAttribute("width","30"),e.setAttribute("height","30"),e.setAttribute("viewBox","0 0 30 30"),e.setAttribute("class","UppyIcon"),_appendChild(e,[" ",(t=document.createElementNS(_svgNamespace,"path"),t.setAttribute("d","M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"),t)," "]),e}function iconCopy(){var t,e,c;return c=document.createElementNS(_svgNamespace,"svg"),c.setAttribute("width","51"),c.setAttribute("height","51"),c.setAttribute("viewBox","0 0 51 51"),c.setAttribute("class","UppyIcon"),_appendChild(c,[" ",(t=document.createElementNS(_svgNamespace,"path"),t.setAttribute("d","M17.21 45.765a5.394 5.394 0 0 1-7.62 0l-4.12-4.122a5.393 5.393 0 0 1 0-7.618l6.774-6.775-2.404-2.404-6.775 6.776c-3.424 3.427-3.424 9 0 12.426l4.12 4.123a8.766 8.766 0 0 0 6.216 2.57c2.25 0 4.5-.858 6.214-2.57l13.55-13.552a8.72 8.72 0 0 0 2.575-6.213 8.73 8.73 0 0 0-2.575-6.213l-4.123-4.12-2.404 2.404 4.123 4.12a5.352 5.352 0 0 1 1.58 3.81c0 1.438-.562 2.79-1.58 3.808l-13.55 13.55z"),t)," ",(e=document.createElementNS(_svgNamespace,"path"),e.setAttribute("d","M44.256 2.858A8.728 8.728 0 0 0 38.043.283h-.002a8.73 8.73 0 0 0-6.212 2.574l-13.55 13.55a8.725 8.725 0 0 0-2.575 6.214 8.73 8.73 0 0 0 2.574 6.216l4.12 4.12 2.405-2.403-4.12-4.12a5.357 5.357 0 0 1-1.58-3.812c0-1.437.562-2.79 1.58-3.808l13.55-13.55a5.348 5.348 0 0 1 3.81-1.58c1.44 0 2.792.562 3.81 1.58l4.12 4.12c2.1 2.1 2.1 5.518 0 7.617L39.2 23.775l2.404 2.404 6.775-6.777c3.426-3.427 3.426-9 0-12.426l-4.12-4.12z"),e)," "]),c}function iconResume(){var t,e;return e=document.createElementNS(_svgNamespace,"svg"),e.setAttribute("width","25"),e.setAttribute("height","25"),e.setAttribute("viewBox","0 0 44 44"),e.setAttribute("class","UppyIcon"),_appendChild(e,[" ",(t=document.createElementNS(_svgNamespace,"polygon"),t.setAttribute("transform","translate(6, 5.5)"),t.setAttribute("points","13 21.6666667 13 11 21 16.3333333"),t.setAttribute("class","play"),t)," "]),e}function iconPause(){var t,e,c,a;return a=document.createElementNS(_svgNamespace,"svg"),a.setAttribute("width","25px"),a.setAttribute("height","25px"),a.setAttribute("viewBox","0 0 44 44"),a.setAttribute("class","UppyIcon"),_appendChild(a,[" ",(c=document.createElementNS(_svgNamespace,"g"),c.setAttribute("transform","translate(18, 17)"),c.setAttribute("class","pause"),_appendChild(c,[" ",(t=document.createElementNS(_svgNamespace,"rect"),t.setAttribute("x","0"),t.setAttribute("y","0"),t.setAttribute("width","2"),t.setAttribute("height","10"),t.setAttribute("rx","0"),t)," ",(e=document.createElementNS(_svgNamespace,"rect"),e.setAttribute("x","6"),e.setAttribute("y","0"),e.setAttribute("width","2"),e.setAttribute("height","10"),e.setAttribute("rx","0"),e)," "]),c)," "]),a}function iconEdit(){var t,e;return e=document.createElementNS(_svgNamespace,"svg"),e.setAttribute("width","28"),e.setAttribute("height","28"),e.setAttribute("viewBox","0 0 28 28"),e.setAttribute("class","UppyIcon"),_appendChild(e,[" ",(t=document.createElementNS(_svgNamespace,"path"),t.setAttribute("d","M25.436 2.566a7.98 7.98 0 0 0-2.078-1.51C22.638.703 21.906.5 21.198.5a3 3 0 0 0-1.023.17 2.436 2.436 0 0 0-.893.562L2.292 18.217.5 27.5l9.28-1.796 16.99-16.99c.255-.254.444-.56.562-.888a3 3 0 0 0 .17-1.023c0-.708-.205-1.44-.555-2.16a8 8 0 0 0-1.51-2.077zM9.01 24.252l-4.313.834c0-.03.008-.06.012-.09.007-.944-.74-1.715-1.67-1.723-.04 0-.078.007-.118.01l.83-4.29L17.72 5.024l5.264 5.264L9.01 24.252zm16.84-16.96a.818.818 0 0 1-.194.31l-1.57 1.57-5.26-5.26 1.57-1.57a.82.82 0 0 1 .31-.194 1.45 1.45 0 0 1 .492-.074c.397 0 .917.126 1.468.397.55.27 1.13.678 1.656 1.21.53.53.94 1.11 1.208 1.655.272.55.397 1.07.393 1.468.004.193-.027.358-.074.488z"),t)," "]),e}function localIcon(){var t,e,c;return c=document.createElementNS(_svgNamespace,"svg"),c.setAttribute("width","27"),c.setAttribute("height","25"),c.setAttribute("viewBox","0 0 27 25"),c.setAttribute("class","UppyIcon"),_appendChild(c,[" ",(t=document.createElementNS(_svgNamespace,"path"),t.setAttribute("d","M5.586 9.288a.313.313 0 0 0 .282.176h4.84v3.922c0 1.514 1.25 2.24 2.792 2.24 1.54 0 2.79-.726 2.79-2.24V9.464h4.84c.122 0 .23-.068.284-.176a.304.304 0 0 0-.046-.324L13.735.106a.316.316 0 0 0-.472 0l-7.63 8.857a.302.302 0 0 0-.047.325z"),t)," ",(e=document.createElementNS(_svgNamespace,"path"),e.setAttribute("d","M24.3 5.093c-.218-.76-.54-1.187-1.208-1.187h-4.856l1.018 1.18h3.948l2.043 11.038h-7.193v2.728H9.114v-2.725h-7.36l2.66-11.04h3.33l1.018-1.18H3.907c-.668 0-1.06.46-1.21 1.186L0 16.456v7.062C0 24.338.676 25 1.51 25h23.98c.833 0 1.51-.663 1.51-1.482v-7.062L24.3 5.093z"),e)," "]),c}function closeIcon(){var t,e;return e=document.createElementNS(_svgNamespace,"svg"),e.setAttribute("width","14px"),e.setAttribute("height","14px"),e.setAttribute("viewBox","0 0 19 19"),e.setAttribute("class","UppyIcon"),_appendChild(e,[" ",(t=document.createElementNS(_svgNamespace,"path"),t.setAttribute("d","M17.318 17.232L9.94 9.854 9.586 9.5l-.354.354-7.378 7.378h.707l-.62-.62v.706L9.318 9.94l.354-.354-.354-.354L1.94 1.854v.707l.62-.62h-.706l7.378 7.378.354.354.354-.354 7.378-7.378h-.707l.622.62v-.706L9.854 9.232l-.354.354.354.354 7.378 7.378.708-.707-7.38-7.378v.708l7.38-7.38.353-.353-.353-.353-.622-.622-.353-.353-.354.352-7.378 7.38h.708L2.56 1.23 2.208.88l-.353.353-.622.62-.353.355.352.353 7.38 7.38v-.708l-7.38 7.38-.353.353.352.353.622.622.353.353.354-.353 7.38-7.38h-.708l7.38 7.38z"),t)," "]),e}function pluginIcon(){var t,e,c;return c=document.createElementNS(_svgNamespace,"svg"),c.setAttribute("width","16px"),c.setAttribute("height","16px"),c.setAttribute("viewBox","0 0 32 30"),c.setAttribute("class","UppyIcon"),_appendChild(c,[" ",(t=document.createElementNS(_svgNamespace,"path"),t.setAttribute("d","M6.6209894,11.1451162 C6.6823051,11.2751669 6.81374248,11.3572188 6.95463813,11.3572188 L12.6925482,11.3572188 L12.6925482,16.0630427 C12.6925482,17.880509 14.1726048,18.75 16.0000083,18.75 C17.8261072,18.75 19.3074684,17.8801847 19.3074684,16.0630427 L19.3074684,11.3572188 L25.0437478,11.3572188 C25.1875787,11.3572188 25.3164069,11.2751669 25.3790272,11.1451162 C25.4370814,11.0173358 25.4171865,10.8642587 25.3252129,10.7562615 L16.278212,0.127131837 C16.2093949,0.0463771751 16.1069846,0 15.9996822,0 C15.8910751,0 15.7886648,0.0463771751 15.718217,0.127131837 L6.6761083,10.7559371 C6.58250402,10.8642587 6.56293518,11.0173358 6.6209894,11.1451162 L6.6209894,11.1451162 Z"),t)," ",(e=document.createElementNS(_svgNamespace,"path"),e.setAttribute("d","M28.8008722,6.11142645 C28.5417891,5.19831555 28.1583331,4.6875 27.3684848,4.6875 L21.6124454,4.6875 L22.8190234,6.10307874 L27.4986725,6.10307874 L29.9195817,19.3486449 L21.3943891,19.3502502 L21.3943891,22.622552 L10.8023461,22.622552 L10.8023461,19.3524977 L2.07815702,19.3534609 L5.22979699,6.10307874 L9.17871529,6.10307874 L10.3840011,4.6875 L4.6308691,4.6875 C3.83940559,4.6875 3.37421888,5.2390909 3.19815864,6.11142645 L0,19.7470874 L0,28.2212959 C0,29.2043992 0.801477937,30 1.78870751,30 L30.2096773,30 C31.198199,30 32,29.2043992 32,28.2212959 L32,19.7470874 L28.8008722,6.11142645 L28.8008722,6.11142645 Z"),e)," "]),c}function checkIcon(){var t,e;return e=document.createElementNS(_svgNamespace,"svg"),e.setAttribute("width","13px"),e.setAttribute("height","9px"),e.setAttribute("viewBox","0 0 13 9"),e.setAttribute("class","UppyIcon UppyIcon-check"),_appendChild(e,[" ",(t=document.createElementNS(_svgNamespace,"polygon"),t.setAttribute("points","5 7.293 1.354 3.647 0.646 4.354 5 8.707 12.354 1.354 11.646 0.647"),t)]),e}function iconAudio(){var t,e;return e=document.createElementNS(_svgNamespace,"svg"),e.setAttribute("viewBox","0 0 55 55"),e.setAttribute("class","UppyIcon"),_appendChild(e,[" ",(t=document.createElementNS(_svgNamespace,"path"),t.setAttribute("d","M52.66.25c-.216-.19-.5-.276-.79-.242l-31 4.01a1 1 0 0 0-.87.992V40.622C18.174 38.428 15.273 37 12 37c-5.514 0-10 4.037-10 9s4.486 9 10 9 10-4.037 10-9c0-.232-.02-.46-.04-.687.014-.065.04-.124.04-.192V16.12l29-3.753v18.257C49.174 28.428 46.273 27 43 27c-5.514 0-10 4.037-10 9s4.486 9 10 9c5.464 0 9.913-3.966 9.993-8.867 0-.013.007-.024.007-.037V1a.998.998 0 0 0-.34-.75zM12 53c-4.41 0-8-3.14-8-7s3.59-7 8-7 8 3.14 8 7-3.59 7-8 7zm31-10c-4.41 0-8-3.14-8-7s3.59-7 8-7 8 3.14 8 7-3.59 7-8 7zM22 14.1V5.89l29-3.753v8.21l-29 3.754z"),t)," "]),e}function iconVideo(){var t,e,c;return c=document.createElementNS(_svgNamespace,"svg"),c.setAttribute("viewBox","0 0 58 58"),c.setAttribute("class","UppyIcon"),_appendChild(c,[" ",(t=document.createElementNS(_svgNamespace,"path"),t.setAttribute("d","M36.537 28.156l-11-7a1.005 1.005 0 0 0-1.02-.033C24.2 21.3 24 21.635 24 22v14a1 1 0 0 0 1.537.844l11-7a1.002 1.002 0 0 0 0-1.688zM26 34.18V23.82L34.137 29 26 34.18z"),t),(e=document.createElementNS(_svgNamespace,"path"),e.setAttribute("d","M57 6H1a1 1 0 0 0-1 1v44a1 1 0 0 0 1 1h56a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1zM10 28H2v-9h8v9zm-8 2h8v9H2v-9zm10 10V8h34v42H12V40zm44-12h-8v-9h8v9zm-8 2h8v9h-8v-9zm8-22v9h-8V8h8zM2 8h8v9H2V8zm0 42v-9h8v9H2zm54 0h-8v-9h8v9z"),e)," "]),c}function iconPDF(){var t,e;return e=document.createElementNS(_svgNamespace,"svg"),e.setAttribute("viewBox","0 0 342 335"),e.setAttribute("class","UppyIcon"),_appendChild(e,[" ",(t=document.createElementNS(_svgNamespace,"path"),t.setAttribute("d","M329.337 227.84c-2.1 1.3-8.1 2.1-11.9 2.1-12.4 0-27.6-5.7-49.1-14.9 8.3-.6 15.8-.9 22.6-.9 12.4 0 16 0 28.2 3.1 12.1 3 12.2 9.3 10.2 10.6zm-215.1 1.9c4.8-8.4 9.7-17.3 14.7-26.8 12.2-23.1 20-41.3 25.7-56.2 11.5 20.9 25.8 38.6 42.5 52.8 2.1 1.8 4.3 3.5 6.7 5.3-34.1 6.8-63.6 15-89.6 24.9zm39.8-218.9c6.8 0 10.7 17.06 11 33.16.3 16-3.4 27.2-8.1 35.6-3.9-12.4-5.7-31.8-5.7-44.5 0 0-.3-24.26 2.8-24.26zm-133.4 307.2c3.9-10.5 19.1-31.3 41.6-49.8 1.4-1.1 4.9-4.4 8.1-7.4-23.5 37.6-39.3 52.5-49.7 57.2zm315.2-112.3c-6.8-6.7-22-10.2-45-10.5-15.6-.2-34.3 1.2-54.1 3.9-8.8-5.1-17.9-10.6-25.1-17.3-19.2-18-35.2-42.9-45.2-70.3.6-2.6 1.2-4.8 1.7-7.1 0 0 10.8-61.5 7.9-82.3-.4-2.9-.6-3.7-1.4-5.9l-.9-2.5c-2.9-6.76-8.7-13.96-17.8-13.57l-5.3-.17h-.1c-10.1 0-18.4 5.17-20.5 12.84-6.6 24.3.2 60.5 12.5 107.4l-3.2 7.7c-8.8 21.4-19.8 43-29.5 62l-1.3 2.5c-10.2 20-19.5 37-27.9 51.4l-8.7 4.6c-.6.4-15.5 8.2-19 10.3-29.6 17.7-49.28 37.8-52.54 53.8-1.04 5-.26 11.5 5.01 14.6l8.4 4.2c3.63 1.8 7.53 2.7 11.43 2.7 21.1 0 45.6-26.2 79.3-85.1 39-12.7 83.4-23.3 122.3-29.1 29.6 16.7 66 28.3 89 28.3 4.1 0 7.6-.4 10.5-1.2 4.4-1.1 8.1-3.6 10.4-7.1 4.4-6.7 5.4-15.9 4.1-25.4-.3-2.8-2.6-6.3-5-8.7z"),t)," "]),e}function iconFile(){var t,e;return e=document.createElementNS(_svgNamespace,"svg"),e.setAttribute("width","44"),e.setAttribute("height","58"),e.setAttribute("viewBox","0 0 44 58"),e.setAttribute("class","UppyIcon"),_appendChild(e,[" ",(t=document.createElementNS(_svgNamespace,"path"),t.setAttribute("d","M27.437.517a1 1 0 0 0-.094.03H4.25C2.037.548.217 2.368.217 4.58v48.405c0 2.212 1.82 4.03 4.03 4.03H39.03c2.21 0 4.03-1.818 4.03-4.03V15.61a1 1 0 0 0-.03-.28 1 1 0 0 0 0-.093 1 1 0 0 0-.03-.032 1 1 0 0 0 0-.03 1 1 0 0 0-.032-.063 1 1 0 0 0-.03-.063 1 1 0 0 0-.032 0 1 1 0 0 0-.03-.063 1 1 0 0 0-.032-.03 1 1 0 0 0-.03-.063 1 1 0 0 0-.063-.062l-14.593-14a1 1 0 0 0-.062-.062A1 1 0 0 0 28 .708a1 1 0 0 0-.374-.157 1 1 0 0 0-.156 0 1 1 0 0 0-.03-.03l-.003-.003zM4.25 2.547h22.218v9.97c0 2.21 1.82 4.03 4.03 4.03h10.564v36.438a2.02 2.02 0 0 1-2.032 2.032H4.25c-1.13 0-2.032-.9-2.032-2.032V4.58c0-1.13.902-2.032 2.03-2.032zm24.218 1.345l10.375 9.937.75.718H30.5c-1.13 0-2.032-.9-2.032-2.03V3.89z"),t)," "]),e}function iconText(){var t,e,c;return c=document.createElementNS(_svgNamespace,"svg"),c.setAttribute("viewBox","0 0 64 64"),c.setAttribute("class","UppyIcon"),_appendChild(c,[" ",(t=document.createElementNS(_svgNamespace,"path"),t.setAttribute("d","M8 64h48V0H22.586L8 14.586V64zm46-2H10V16h14V2h30v60zM11.414 14L22 3.414V14H11.414z"),t)," ",(e=document.createElementNS(_svgNamespace,"path"),e.setAttribute("d","M32 13h14v2H32zM18 23h28v2H18zM18 33h28v2H18zM18 43h28v2H18zM18 53h28v2H18z"),e)," "]),c}function uploadIcon(){var t,e,c;return c=document.createElementNS(_svgNamespace,"svg"),c.setAttribute("width","37"),c.setAttribute("height","33"),c.setAttribute("viewBox","0 0 37 33"),c.setAttribute("class","UppyIcon"),_appendChild(c,[" ",(t=document.createElementNS(_svgNamespace,"path"),t.setAttribute("d","M29.107 24.5c4.07 0 7.393-3.355 7.393-7.442 0-3.994-3.105-7.307-7.012-7.502l.468.415C29.02 4.52 24.34.5 18.886.5c-4.348 0-8.27 2.522-10.138 6.506l.446-.288C4.394 6.782.5 10.758.5 15.608c0 4.924 3.906 8.892 8.76 8.892h4.872c.635 0 1.095-.467 1.095-1.104 0-.636-.46-1.103-1.095-1.103H9.26c-3.644 0-6.63-3.035-6.63-6.744 0-3.71 2.926-6.685 6.57-6.685h.964l.14-.28.177-.362c1.477-3.4 4.744-5.576 8.347-5.576 4.58 0 8.45 3.452 9.01 8.072l.06.536.05.446h1.101c2.87 0 5.204 2.37 5.204 5.295s-2.333 5.296-5.204 5.296h-6.062c-.634 0-1.094.467-1.094 1.103 0 .637.46 1.104 1.094 1.104h6.12z"),t)," ",(e=document.createElementNS(_svgNamespace,"path"),e.setAttribute("d","M23.196 18.92l-4.828-5.258-.366-.4-.368.398-4.828 5.196a1.13 1.13 0 0 0 0 1.546c.428.46 1.11.46 1.537 0l3.45-3.71-.868-.34v15.03c0 .64.445 1.118 1.075 1.118.63 0 1.075-.48 1.075-1.12V16.35l-.867.34 3.45 3.712a1 1 0 0 0 .767.345 1 1 0 0 0 .77-.345c.416-.33.416-1.036 0-1.485v.003z"),e)," "]),c}function dashboardBgIcon(){var t,e;return e=document.createElementNS(_svgNamespace,"svg"),e.setAttribute("width","48"),e.setAttribute("height","69"),e.setAttribute("viewBox","0 0 48 69"),e.setAttribute("class","UppyIcon"),_appendChild(e,[" ",(t=document.createElementNS(_svgNamespace,"path"),t.setAttribute("d","M.5 1.5h5zM10.5 1.5h5zM20.5 1.5h5zM30.504 1.5h5zM45.5 11.5v5zM45.5 21.5v5zM45.5 31.5v5zM45.5 41.502v5zM45.5 51.502v5zM45.5 61.5v5zM45.5 66.502h-4.998zM35.503 66.502h-5zM25.5 66.502h-5zM15.5 66.502h-5zM5.5 66.502h-5zM.5 66.502v-5zM.5 56.502v-5zM.5 46.503V41.5zM.5 36.5v-5zM.5 26.5v-5zM.5 16.5v-5zM.5 6.5V1.498zM44.807 11H36V2.195z"),t)," "]),e}var _svgNamespace="http://www.w3.org/2000/svg",_appendChild=require("yo-yoify/lib/appendChild");module.exports={defaultTabIcon:defaultTabIcon,iconCopy:iconCopy,iconResume:iconResume,iconPause:iconPause,iconEdit:iconEdit,localIcon:localIcon,closeIcon:closeIcon,pluginIcon:pluginIcon,checkIcon:checkIcon,iconAudio:iconAudio,iconVideo:iconVideo,iconPDF:iconPDF,iconFile:iconFile,iconText:iconText,uploadIcon:uploadIcon,dashboardBgIcon:dashboardBgIcon};
},{"yo-yoify/lib/appendChild":83}],110:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},Plugin=require("../Plugin"),Translator=require("../../core/Translator"),dragDrop=require("drag-drop"),Dashboard=require("./Dashboard"),StatusBar=require("../StatusBar"),Informer=require("../Informer"),_require=require("../../core/Utils"),findDOMElement=_require.findDOMElement,prettyBytes=require("prettier-bytes"),_require2=require("./icons"),defaultTabIcon=_require2.defaultTabIcon;module.exports=function(e){function t(o,r){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,e.call(this,o,r));i.id="DashboardUI",i.title="Dashboard UI",i.type="orchestrator";var s={strings:{selectToUpload:"Select files to upload",closeModal:"Close Modal",upload:"Upload",importFrom:"Import files from",dashboardWindowTitle:"Uppy Dashboard Window (Press escape to close)",dashboardTitle:"Uppy Dashboard",copyLinkToClipboardSuccess:"Link copied to clipboard.",copyLinkToClipboardFallback:"Copy the URL below",done:"Done",localDisk:"Local Disk",myDevice:"My Device",dropPasteImport:"Drop files here, paste, import from one of the locations above or",dropPaste:"Drop files here, paste or",browse:"browse",fileProgress:"File progress: upload speed and ETA",numberOfSelectedFiles:"Number of selected files",uploadAllNewFiles:"Upload all new files"}},a={target:"body",getMetaFromForm:!0,trigger:"#uppy-select-files",inline:!1,width:750,height:550,semiTransparent:!1,defaultTabIcon:defaultTabIcon(),showProgressDetails:!1,hideUploadButton:!1,note:!1,closeModalOnClickOutside:!1,locale:s};return i.opts=_extends({},a,r),i.locale=_extends({},s,i.opts.locale),i.locale.strings=_extends({},s.strings,i.opts.locale.strings),i.translator=new Translator({locale:i.locale}),i.containerWidth=i.translator.translate.bind(i.translator),i.hideModal=i.hideModal.bind(i),i.showModal=i.showModal.bind(i),i.addTarget=i.addTarget.bind(i),i.actions=i.actions.bind(i),i.hideAllPanels=i.hideAllPanels.bind(i),i.showPanel=i.showPanel.bind(i),i.initEvents=i.initEvents.bind(i),i.handleEscapeKeyPress=i.handleEscapeKeyPress.bind(i),i.handleClickOutside=i.handleClickOutside.bind(i),i.handleFileCard=i.handleFileCard.bind(i),i.handleDrop=i.handleDrop.bind(i),i.pauseAll=i.pauseAll.bind(i),i.resumeAll=i.resumeAll.bind(i),i.cancelAll=i.cancelAll.bind(i),i.updateDashboardElWidth=i.updateDashboardElWidth.bind(i),i.render=i.render.bind(i),i.install=i.install.bind(i),i}return _inherits(t,e),t.prototype.addTarget=function(e){var t=e.id||e.constructor.name,o=e.title||t,r=e.icon||this.opts.defaultTabIcon,i=e.type;if("acquirer"!==i&&"progressindicator"!==i&&"presenter"!==i){return void this.core.log("Dashboard: Modal can only be used by plugins of types: acquirer, progressindicator, presenter")}var s={id:t,name:o,icon:r,type:i,focus:e.focus,render:e.render,isHidden:!0},a=this.core.getState().modal,n=a.targets.slice();return n.push(s),this.core.setState({modal:_extends({},a,{targets:n})}),this.target},t.prototype.hideAllPanels=function(){var e=this.core.getState().modal;this.core.setState({modal:_extends({},e,{activePanel:!1})})},t.prototype.showPanel=function(e){var t=this.core.getState().modal,o=t.targets.filter(function(t){return"acquirer"===t.type&&t.id===e})[0];this.core.setState({modal:_extends({},t,{activePanel:o})})},t.prototype.hideModal=function(){var e=this.core.getState().modal;this.core.setState({modal:_extends({},e,{isHidden:!0})}),document.body.classList.remove("is-UppyDashboard-open"),window.scrollTo(0,this.savedDocumentScrollPosition)},t.prototype.showModal=function(){var e=this.core.getState().modal;this.core.setState({modal:_extends({},e,{isHidden:!1})}),this.savedDocumentScrollPosition=window.scrollY,document.body.classList.add("is-UppyDashboard-open"),document.body.style.top="-"+this.savedDocumentScrollPosition+"px",this.target.querySelector(".UppyDashboard-inner").focus(),setTimeout(this.updateDashboardElWidth,500)},t.prototype.handleEscapeKeyPress=function(e){27===e.keyCode&&this.hideModal()},t.prototype.handleClickOutside=function(){this.opts.closeModalOnClickOutside&&this.hideModal()},t.prototype.initEvents=function(){var e=this,t=findDOMElement(this.opts.trigger);!this.opts.inline&&t&&t.addEventListener("click",this.showModal),this.opts.inline||t||this.core.log("Dashboard modal trigger not found, you won’t be able to select files. Make sure `trigger` is set correctly in Dashboard options","error"),document.body.addEventListener("keyup",this.handleEscapeKeyPress),this.removeDragDropListener=dragDrop(this.el,function(t){e.handleDrop(t)})},t.prototype.removeEvents=function(){var e=findDOMElement(this.opts.trigger);!this.opts.inline&&e&&e.removeEventListener("click",this.showModal),this.removeDragDropListener(),document.body.removeEventListener("keyup",this.handleEscapeKeyPress)},t.prototype.actions=function(){this.core.on("core:file-added",this.hideAllPanels),this.core.on("dashboard:file-card",this.handleFileCard),window.addEventListener("resize",this.updateDashboardElWidth)},t.prototype.removeActions=function(){window.removeEventListener("resize",this.updateDashboardElWidth),this.core.off("core:file-added",this.hideAllPanels),this.core.off("dashboard:file-card",this.handleFileCard)},t.prototype.updateDashboardElWidth=function(){var e=this.target.querySelector(".UppyDashboard-inner");this.core.log("Dashboard width: "+e.offsetWidth);var t=this.core.getState().modal;this.core.setState({modal:_extends({},t,{containerWidth:e.offsetWidth})})},t.prototype.handleFileCard=function(e){var t=this.core.state.modal;this.core.setState({modal:_extends({},t,{fileCardFor:e||!1})})},t.prototype.handleDrop=function(e){var t=this;this.core.log("All right, someone dropped something..."),e.forEach(function(e){t.core.addFile({source:t.id,name:e.name,type:e.type,data:e})})},t.prototype.cancelAll=function(){this.core.emit("core:cancel-all")},t.prototype.pauseAll=function(){this.core.emit("core:pause-all")},t.prototype.resumeAll=function(){this.core.emit("core:resume-all")},t.prototype.render=function(e){var t=this,o=e.files,r=Object.keys(o).filter(function(e){return!o[e].progress.uploadStarted}),i=Object.keys(o).filter(function(e){return!o[e].progress.uploadComplete&&o[e].progress.uploadStarted&&!o[e].isPaused}),s=[];i.forEach(function(e){s.push(o[e])});var a=0,n=0;s.forEach(function(e){a+=e.progress.bytesTotal||0,n+=e.progress.bytesUploaded||0}),a=prettyBytes(a),n=prettyBytes(n);var l=e.modal.targets.filter(function(e){return"acquirer"===e.type}),d=e.modal.targets.filter(function(e){return"progressindicator"===e.type}),c=function(e){t.core.upload().catch(function(e){t.core.log(e.stack||e.message||e)})},h=function(e){t.core.emit.emit("core:upload-pause",e)},p=function(e){t.core.emit("core:upload-cancel",e),t.core.emit("core:file-remove",e)},u=function(e){t.core.emit("dashboard:file-card",e)},f=function(e,o){t.core.emit("core:update-meta",e,o),t.core.emit("dashboard:file-card")},m=function(e,o,r){t.core.info(e,o,r)},b=this.core.state.capabilities.resumableUploads||!1;return Dashboard({state:e,modal:e.modal,newFiles:r,files:o,totalFileCount:Object.keys(o).length,totalProgress:e.totalProgress,acquirers:l,activePanel:e.modal.activePanel,progressindicators:d,autoProceed:this.core.opts.autoProceed,hideUploadButton:this.opts.hideUploadButton,id:this.id,hideModal:this.hideModal,handleClickOutside:this.handleClickOutside,showProgressDetails:this.opts.showProgressDetails,inline:this.opts.inline,semiTransparent:this.opts.semiTransparent,showPanel:this.showPanel,hideAllPanels:this.hideAllPanels,log:this.core.log,i18n:this.containerWidth,pauseAll:this.pauseAll,resumeAll:this.resumeAll,addFile:this.core.addFile,removeFile:this.core.removeFile,info:m,note:this.opts.note,metaFields:e.metaFields,resumableUploads:b,startUpload:c,pauseUpload:h,cancelUpload:p,fileCardFor:e.modal.fileCardFor,showFileCard:u,fileCardDone:f,updateDashboardElWidth:this.updateDashboardElWidth,maxWidth:this.opts.maxWidth,maxHeight:this.opts.maxHeight,currentWidth:e.modal.containerWidth,isWide:e.modal.containerWidth>400})},t.prototype.install=function(){this.core.setState({modal:{isHidden:!0,showFileCard:!1,activePanel:!1,targets:[]}});var e=this.opts.target,o=this;this.target=this.mount(e,o),this.opts.disableStatusBar||this.core.use(StatusBar,{target:t}),this.opts.disableInformer||this.core.use(Informer,{target:t}),this.initEvents(),this.actions()},t.prototype.uninstall=function(){this.unmount(),this.removeActions(),this.removeEvents()},t}(Plugin);
},{"../../core/Translator":85,"../../core/Utils":87,"../Informer":117,"../Plugin":120,"../StatusBar":126,"./Dashboard":101,"./icons":109,"drag-drop":16,"prettier-bytes":52}],111:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_svgNamespace="http://www.w3.org/2000/svg",_appendChild=require("yo-yoify/lib/appendChild"),Plugin=require("./../Plugin"),Translator=require("../../core/Translator"),_require=require("../../core/Utils"),toArray=_require.toArray,dragDrop=require("drag-drop");module.exports=function(e){function t(r,n){var o,a,i,s;_classCallCheck(this,t);var p=_possibleConstructorReturn(this,e.call(this,r,n));p.type="acquirer",p.id="DragDrop",p.title="Drag & Drop",p.icon=(s=document.createElementNS(_svgNamespace,"svg"),s.setAttribute("width","28"),s.setAttribute("height","28"),s.setAttribute("viewBox","0 0 16 16"),s.setAttribute("class","UppyIcon"),_appendChild(s,[" ",(o=document.createElementNS(_svgNamespace,"path"),o.setAttribute("d","M15.982 2.97c0-.02 0-.02-.018-.037 0-.017-.017-.035-.035-.053 0 0 0-.018-.02-.018-.017-.018-.034-.053-.052-.07L13.19.123c-.017-.017-.034-.035-.07-.053h-.018c-.018-.017-.035-.017-.053-.034h-.02c-.017 0-.034-.018-.052-.018h-6.31a.415.415 0 0 0-.446.426V11.11c0 .25.196.446.445.446h8.89A.44.44 0 0 0 16 11.11V3.023c-.018-.018-.018-.035-.018-.053zm-2.65-1.46l1.157 1.157h-1.157V1.51zm1.78 9.157h-8V.89h5.332v2.22c0 .25.196.446.445.446h2.22v7.11z"),o)," ",(a=document.createElementNS(_svgNamespace,"path"),a.setAttribute("d","M9.778 12.89H4V2.666a.44.44 0 0 0-.444-.445.44.44 0 0 0-.445.445v10.666c0 .25.197.445.446.445h6.222a.44.44 0 0 0 .444-.445.44.44 0 0 0-.444-.444z"),a)," ",(i=document.createElementNS(_svgNamespace,"path"),i.setAttribute("d","M.444 16h6.223a.44.44 0 0 0 .444-.444.44.44 0 0 0-.443-.445H.89V4.89a.44.44 0 0 0-.446-.446A.44.44 0 0 0 0 4.89v10.666c0 .248.196.444.444.444z"),i)," "]),s);var l={strings:{chooseFile:"Choose a file",orDragDrop:"or drop it here",upload:"Upload",selectedFiles:{0:"%{smart_count} file selected",1:"%{smart_count} files selected"}}},c={target:".UppyDragDrop",getMetaFromForm:!0,locale:l};return p.opts=_extends({},c,n),p.isDragDropSupported=p.checkDragDropSupport(),p.locale=_extends({},l,p.opts.locale),p.locale.strings=_extends({},l.strings,p.opts.locale.strings),p.translator=new Translator({locale:p.locale}),p.i18n=p.translator.translate.bind(p.translator),p.handleDrop=p.handleDrop.bind(p),p.checkDragDropSupport=p.checkDragDropSupport.bind(p),p.handleInputChange=p.handleInputChange.bind(p),p.render=p.render.bind(p),p}return _inherits(t,e),t.prototype.checkDragDropSupport=function(){var e=document.createElement("div");return"draggable"in e&&"ondragstart"in e&&"ondrop"in e&&("FormData"in window&&"FileReader"in window)},t.prototype.handleDrop=function(e){var t=this;this.core.log("All right, someone dropped something..."),e.forEach(function(e){t.core.addFile({source:t.id,name:e.name,type:e.type,data:e})})},t.prototype.handleInputChange=function(e){var t=this;this.core.log("All right, something selected through input..."),toArray(e.target.files).forEach(function(e){t.core.addFile({source:t.id,name:e.name,type:e.type,data:e})})},t.prototype.render=function(e){var t,r,n,o,a,i,s,p=this,l=function(e){p.target.querySelector(".UppyDragDrop-input").click()},c=Object.keys(e.files).length;return i=document.createElement("div"),i.setAttribute("class","Uppy UppyTheme--default UppyDragDrop-container "+String(this.isDragDropSupported?"is-dragdrop-supported":"")),_appendChild(i,[" ",(a=document.createElement("form"),a.onsubmit=function(e){return e.preventDefault()},a.setAttribute("class","UppyDragDrop-inner"),_appendChild(a,[" ",(t=document.createElement("input"),t.setAttribute("type","file"),t.setAttribute("name","files[]"),t.setAttribute("multiple","multiple"),t.setAttribute("value",""),t.onchange=this.handleInputChange.bind(this),t.setAttribute("class","UppyDragDrop-input UppyDragDrop-focus"),t)," ",(o=document.createElement("label"),o.onclick=l,o.setAttribute("class","UppyDragDrop-label"),_appendChild(o,[" ",(r=document.createElement("strong"),_appendChild(r,[this.i18n("chooseFile")]),r)," ",(n=document.createElement("span"),n.setAttribute("class","UppyDragDrop-dragText"),_appendChild(n,[this.i18n("orDragDrop")]),n)," "]),o)," ",c>0?(s=document.createElement("div"),s.setAttribute("class","UppyDragDrop-selectedCount"),_appendChild(s,[" ",this.i18n("selectedFiles",{smart_count:c})," "]),s):""," "]),a)," "]),i},t.prototype.install=function(){var e=this,t=this.opts.target,r=this;this.target=this.mount(t,r);var n=this.target.querySelector(".UppyDragDrop-container");this.removeDragDropListener=dragDrop(n,function(t){e.handleDrop(t),e.core.log(t)})},t.prototype.uninstall=function(){this.removeDragDropListener(),this.unmount()},t}(Plugin);
},{"../../core/Translator":85,"../../core/Utils":87,"./../Plugin":120,"drag-drop":16,"yo-yoify/lib/appendChild":83}],112:[function(require,module,exports){
"use strict";var _svgNamespace="http://www.w3.org/2000/svg",_appendChild=require("yo-yoify/lib/appendChild");module.exports={folder:function(){var e,t;return t=document.createElementNS(_svgNamespace,"svg"),t.setAttribute("style","width:16px;margin-right:3px"),t.setAttribute("viewBox","0 0 276.157 276.157"),t.setAttribute("class","UppyIcon"),_appendChild(t,[" ",(e=document.createElementNS(_svgNamespace,"path"),e.setAttribute("d","M273.08 101.378c-3.3-4.65-8.86-7.32-15.254-7.32h-24.34V67.59c0-10.2-8.3-18.5-18.5-18.5h-85.322c-3.63 0-9.295-2.875-11.436-5.805l-6.386-8.735c-4.982-6.814-15.104-11.954-23.546-11.954H58.73c-9.292 0-18.638 6.608-21.737 15.372l-2.033 5.752c-.958 2.71-4.72 5.37-7.596 5.37H18.5C8.3 49.09 0 57.39 0 67.59v167.07c0 .886.16 1.73.443 2.52.152 3.306 1.18 6.424 3.053 9.064 3.3 4.652 8.86 7.32 15.255 7.32h188.487c11.395 0 23.27-8.425 27.035-19.18l40.677-116.188c2.11-6.035 1.43-12.164-1.87-16.816zM18.5 64.088h8.864c9.295 0 18.64-6.607 21.738-15.37l2.032-5.75c.96-2.712 4.722-5.373 7.597-5.373h29.565c3.63 0 9.295 2.876 11.437 5.806l6.386 8.735c4.982 6.815 15.104 11.954 23.546 11.954h85.322c1.898 0 3.5 1.602 3.5 3.5v26.47H69.34c-11.395 0-23.27 8.423-27.035 19.178L15 191.23V67.59c0-1.898 1.603-3.5 3.5-3.5zm242.29 49.15l-40.676 116.188c-1.674 4.78-7.812 9.135-12.877 9.135H18.75c-1.447 0-2.576-.372-3.02-.997-.442-.625-.422-1.814.057-3.18l40.677-116.19c1.674-4.78 7.812-9.134 12.877-9.134h188.487c1.448 0 2.577.372 3.02.997.443.625.423 1.814-.056 3.18z"),e)," "]),t},music:function(){var e,t,c,n,a,s;return s=document.createElementNS(_svgNamespace,"svg"),s.setAttribute("width","16.000000pt"),s.setAttribute("height","16.000000pt"),s.setAttribute("viewBox","0 0 48.000000 48.000000"),s.setAttribute("preserveAspectRatio","xMidYMid meet"),s.setAttribute("class","UppyIcon"),_appendChild(s,[" ",(a=document.createElementNS(_svgNamespace,"g"),a.setAttribute("transform","translate(0.000000,48.000000) scale(0.100000,-0.100000)"),a.setAttribute("fill","#525050"),a.setAttribute("stroke","none"),_appendChild(a,[" ",(e=document.createElementNS(_svgNamespace,"path"),e.setAttribute("d","M209 473 c0 -5 0 -52 1 -106 1 -54 -2 -118 -6 -143 l-7 -46 -44 5\n    c-73 8 -133 -46 -133 -120 0 -17 -5 -35 -10 -38 -18 -11 0 -25 33 -24 30 1 30\n    1 7 8 -15 4 -20 10 -13 14 6 4 9 16 6 27 -9 34 7 70 40 90 17 11 39 20 47 20\n    8 0 -3 -9 -26 -19 -42 -19 -54 -36 -54 -75 0 -36 30 -56 84 -56 41 0 53 5 82\n    34 19 19 34 31 34 27 0 -4 -5 -12 -12 -19 -9 -9 -1 -12 39 -12 106 0 183 -21\n    121 -33 -17 -3 -14 -5 10 -6 25 -1 32 3 32 17 0 26 -20 42 -51 42 -39 0 -43\n    13 -10 38 56 41 76 124 45 185 -25 48 -72 105 -103 123 -15 9 -36 29 -47 45\n    -17 26 -63 41 -65 22z m56 -48 c16 -24 31 -42 34 -39 9 9 79 -69 74 -83 -3 -7\n    -2 -13 3 -12 18 3 25 -1 19 -12 -5 -7 -16 -2 -33 13 l-26 23 16 -25 c17 -27\n    29 -92 16 -84 -4 3 -8 -8 -8 -25 0 -16 4 -33 10 -36 5 -3 7 0 4 9 -3 9 3 20\n    15 28 13 8 21 24 22 43 1 18 3 23 6 12 3 -10 2 -29 -1 -43 -7 -26 -62 -94 -77\n    -94 -13 0 -11 17 4 32 21 19 4 88 -28 115 -14 13 -22 23 -16 23 5 0 21 -14 35\n    -31 14 -17 26 -25 26 -19 0 21 -60 72 -79 67 -16 -4 -17 -1 -8 34 6 24 14 36\n    21 32 6 -3 1 5 -11 18 -12 13 -22 29 -23 34 -1 6 -6 17 -12 25 -6 10 -7 -39\n    -4 -142 l6 -158 -26 10 c-33 13 -44 12 -21 -1 17 -10 24 -44 10 -52 -5 -3 -39\n    -8 -76 -12 -68 -7 -69 -7 -65 17 4 28 64 60 117 62 l36 1 0 157 c0 87 2 158 5\n    158 3 0 18 -20 35 -45z m15 -159 c0 -2 -7 -7 -16 -10 -8 -3 -12 -2 -9 4 6 10\n    25 14 25 6z m50 -92 c0 -13 -4 -26 -10 -29 -14 -9 -13 -48 2 -63 9 -9 6 -12\n    -15 -12 -22 0 -27 5 -27 24 0 14 -4 28 -10 31 -15 9 -13 102 3 108 18 7 57\n    -33 57 -59z m-139 -135 c-32 -26 -121 -25 -121 2 0 6 8 5 19 -1 26 -14 64 -13\n    55 1 -4 8 1 9 16 4 13 -4 20 -3 17 2 -3 5 4 10 16 10 22 2 22 2 -2 -18z"),e)," ",(t=document.createElementNS(_svgNamespace,"path"),t.setAttribute("d","M330 345 c19 -19 36 -35 39 -35 3 0 -10 16 -29 35 -19 19 -36 35 -39\n    35 -3 0 10 -16 29 -35z"),t)," ",(c=document.createElementNS(_svgNamespace,"path"),c.setAttribute("d","M349 123 c-13 -16 -12 -17 4 -4 16 13 21 21 13 21 -2 0 -10 -8 -17\n    -17z"),c)," ",(n=document.createElementNS(_svgNamespace,"path"),n.setAttribute("d","M243 13 c15 -2 39 -2 55 0 15 2 2 4 -28 4 -30 0 -43 -2 -27 -4z"),n)," "]),a)," "]),s},page_white_picture:function(){var e,t,c,n,a,s,r,m,p,u,i;return i=document.createElementNS(_svgNamespace,"svg"),i.setAttribute("width","16.000000pt"),i.setAttribute("height","16.000000pt"),i.setAttribute("viewBox","0 0 48.000000 36.000000"),i.setAttribute("preserveAspectRatio","xMidYMid meet"),i.setAttribute("class","UppyIcon"),_appendChild(i,[" ",(u=document.createElementNS(_svgNamespace,"g"),u.setAttribute("transform","translate(0.000000,36.000000) scale(0.100000,-0.100000)"),u.setAttribute("fill","#565555"),u.setAttribute("stroke","none"),_appendChild(u,[" ",(e=document.createElementNS(_svgNamespace,"path"),e.setAttribute("d","M0 180 l0 -180 240 0 240 0 0 180 0 180 -240 0 -240 0 0 -180z m470\n    0 l0 -170 -230 0 -230 0 0 170 0 170 230 0 230 0 0 -170z"),e)," ",(t=document.createElementNS(_svgNamespace,"path"),t.setAttribute("d","M40 185 l0 -135 200 0 200 0 0 135 0 135 -200 0 -200 0 0 -135z m390\n    59 l0 -65 -29 20 c-37 27 -45 26 -65 -4 -9 -14 -22 -25 -28 -25 -7 0 -24 -12\n    -39 -26 -26 -25 -28 -25 -53 -9 -17 11 -26 13 -26 6 0 -7 -4 -9 -10 -6 -5 3\n    -22 -2 -37 -12 l-28 -18 20 27 c11 15 26 25 33 23 6 -2 12 -1 12 4 0 10 -37\n    21 -65 20 -14 -1 -12 -3 7 -8 l28 -6 -50 -55 -49 -55 0 126 1 126 189 1 189 2\n    0 -66z m-16 -73 c11 -12 14 -21 8 -21 -6 0 -13 4 -17 10 -3 5 -12 7 -19 4 -8\n    -3 -16 2 -19 13 -3 11 -4 7 -4 -9 1 -19 6 -25 18 -23 19 4 46 -21 35 -32 -4\n    -4 -11 -1 -16 7 -6 8 -10 10 -10 4 0 -6 7 -17 15 -24 24 -20 11 -24 -76 -27\n    -69 -1 -83 1 -97 18 -9 10 -20 19 -25 19 -5 0 -4 -6 2 -14 14 -17 -5 -26 -55\n    -26 -36 0 -46 16 -17 27 10 4 22 13 27 22 8 13 10 12 17 -4 7 -17 8 -18 8 -2\n    1 23 11 22 55 -8 33 -22 35 -23 26 -5 -9 16 -8 20 5 20 8 0 15 5 15 11 0 5 -4\n    7 -10 4 -5 -3 -10 -4 -10 -1 0 4 59 36 67 36 2 0 1 -10 -2 -21 -5 -15 -4 -19\n    5 -14 6 4 9 17 6 28 -12 49 27 53 68 8z"),t)," ",(c=document.createElementNS(_svgNamespace,"path"),c.setAttribute("d","M100 296 c0 -2 7 -7 16 -10 8 -3 12 -2 9 4 -6 10 -25 14 -25 6z"),c)," ",(n=document.createElementNS(_svgNamespace,"path"),n.setAttribute("d","M243 293 c9 -2 23 -2 30 0 6 3 -1 5 -18 5 -16 0 -22 -2 -12 -5z"),n)," ",(a=document.createElementNS(_svgNamespace,"path"),a.setAttribute("d","M65 280 c-3 -5 -2 -10 4 -10 5 0 13 5 16 10 3 6 2 10 -4 10 -5 0 -13\n    -4 -16 -10z"),a)," ",(s=document.createElementNS(_svgNamespace,"path"),s.setAttribute("d","M155 270 c-3 -6 1 -7 9 -4 18 7 21 14 7 14 -6 0 -13 -4 -16 -10z"),s)," ",(r=document.createElementNS(_svgNamespace,"path"),r.setAttribute("d","M233 252 c-13 -2 -23 -8 -23 -13 0 -7 -12 -8 -30 -4 -22 5 -30 3 -30\n    -7 0 -10 -2 -10 -9 1 -5 8 -19 12 -35 9 -14 -3 -27 -1 -30 4 -2 5 -4 4 -3 -3\n    2 -6 6 -10 10 -10 3 0 20 -4 37 -9 18 -5 32 -5 36 1 3 6 13 8 21 5 13 -5 113\n    21 113 30 0 3 -19 2 -57 -4z"),r)," ",(m=document.createElementNS(_svgNamespace,"path"),m.setAttribute("d","M275 220 c-13 -6 -15 -9 -5 -9 8 0 22 4 30 9 18 12 2 12 -25 0z"),m)," ",(p=document.createElementNS(_svgNamespace,"path"),p.setAttribute("d","M132 23 c59 -2 158 -2 220 0 62 1 14 3 -107 3 -121 0 -172 -2 -113\n    -3z"),p)," "]),u)," "]),i},word:function(){var e,t,c,n,a,s,r,m,p;return p=document.createElementNS(_svgNamespace,"svg"),p.setAttribute("width","16.000000pt"),p.setAttribute("height","16.000000pt"),p.setAttribute("viewBox","0 0 48.000000 48.000000"),p.setAttribute("preserveAspectRatio","xMidYMid meet"),p.setAttribute("class","UppyIcon"),_appendChild(p,[" ",(m=document.createElementNS(_svgNamespace,"g"),m.setAttribute("transform","translate(0.000000,48.000000) scale(0.100000,-0.100000)"),m.setAttribute("fill","#423d3d"),m.setAttribute("stroke","none"),_appendChild(m,[" ",(e=document.createElementNS(_svgNamespace,"path"),e.setAttribute("d","M0 466 c0 -15 87 -26 213 -26 l77 0 0 -140 0 -140 -77 0 c-105 0\n    -213 -11 -213 -21 0 -5 15 -9 34 -9 25 0 33 -4 33 -17 0 -74 4 -113 13 -113 6\n    0 10 32 10 75 l0 75 105 0 105 0 0 150 0 150 -105 0 c-87 0 -105 3 -105 15 0\n    11 -12 15 -45 15 -31 0 -45 -4 -45 -14z"),e)," ",(t=document.createElementNS(_svgNamespace,"path"),t.setAttribute("d","M123 468 c-2 -5 50 -8 116 -8 l121 0 0 -50 c0 -46 -2 -50 -23 -50\n    -14 0 -24 -6 -24 -15 0 -8 4 -15 9 -15 4 0 8 -20 8 -45 0 -25 -4 -45 -8 -45\n    -5 0 -9 -7 -9 -15 0 -9 10 -15 24 -15 22 0 23 3 23 75 l0 75 50 0 50 0 0 -170\n    0 -170 -175 0 -175 0 -2 63 c-2 59 -2 60 -5 13 -3 -27 -2 -60 2 -73 l5 -23\n    183 2 182 3 2 216 c3 275 19 254 -194 254 -85 0 -157 -3 -160 -7z m337 -85 c0\n    -2 -18 -3 -39 -3 -39 0 -39 0 -43 45 l-3 44 42 -41 c24 -23 43 -43 43 -45z\n    m-19 50 c19 -22 23 -29 9 -18 -36 30 -50 43 -50 49 0 11 6 6 41 -31z"),t)," ",(c=document.createElementNS(_svgNamespace,"path"),c.setAttribute("d","M4 300 c0 -74 1 -105 3 -67 2 37 2 97 0 135 -2 37 -3 6 -3 -68z"),c)," ",(n=document.createElementNS(_svgNamespace,"path"),n.setAttribute("d","M20 300 l0 -131 128 3 127 3 3 128 3 127 -131 0 -130 0 0 -130z m250\n    100 c0 -16 -7 -20 -33 -20 -31 0 -34 -2 -34 -31 0 -28 2 -30 13 -14 8 10 11\n    22 8 26 -3 5 1 9 9 9 11 0 9 -12 -12 -50 -14 -27 -32 -50 -39 -50 -15 0 -31\n    38 -26 63 2 10 -1 15 -8 11 -6 -4 -9 -1 -6 6 2 8 10 16 16 18 8 2 12 -10 12\n    -38 0 -38 2 -41 16 -29 9 7 12 15 7 16 -5 2 -7 17 -5 33 4 26 1 30 -20 30 -17\n    0 -29 -9 -39 -27 -20 -41 -22 -50 -6 -30 14 17 15 16 20 -5 4 -13 2 -40 -2\n    -60 -9 -37 -8 -38 20 -38 26 0 33 8 64 70 19 39 37 70 40 70 3 0 5 -40 5 -90\n    l0 -90 -120 0 -120 0 0 120 0 120 120 0 c113 0 120 -1 120 -20z"),n)," ",(a=document.createElementNS(_svgNamespace,"path"),a.setAttribute("d","M40 371 c0 -6 5 -13 10 -16 6 -3 10 -35 10 -71 0 -57 2 -64 20 -64\n    13 0 27 14 40 40 25 49 25 63 0 30 -19 -25 -39 -23 -24 2 5 7 7 23 6 35 -2 11\n    2 24 7 28 23 13 9 25 -29 25 -22 0 -40 -4 -40 -9z m53 -9 c-6 -4 -13 -28 -15\n    -52 l-3 -45 -5 53 c-5 47 -3 52 15 52 13 0 16 -3 8 -8z"),a)," ",(s=document.createElementNS(_svgNamespace,"path"),s.setAttribute("d","M313 165 c0 -9 10 -15 24 -15 14 0 23 6 23 15 0 9 -9 15 -23 15 -14\n    0 -24 -6 -24 -15z"),s)," ",(r=document.createElementNS(_svgNamespace,"path"),r.setAttribute("d","M180 105 c0 -12 17 -15 90 -15 73 0 90 3 90 15 0 12 -17 15 -90 15\n    -73 0 -90 -3 -90 -15z"),r)," "]),m)," "]),p},powerpoint:function(){var e,t,c,n,a,s,r,m,p,u,i,l,d,N,o,A,b,h,v,g;return g=document.createElementNS(_svgNamespace,"svg"),g.setAttribute("width","16.000000pt"),g.setAttribute("height","16.000000pt"),g.setAttribute("viewBox","0 0 16.000000 16.000000"),g.setAttribute("preserveAspectRatio","xMidYMid meet"),g.setAttribute("class","UppyIcon"),_appendChild(g,[" ",(v=document.createElementNS(_svgNamespace,"g"),v.setAttribute("transform","translate(0.000000,144.000000) scale(0.100000,-0.100000)"),v.setAttribute("fill","#494747"),v.setAttribute("stroke","none"),_appendChild(v,[" ",(e=document.createElementNS(_svgNamespace,"path"),e.setAttribute("d","M0 1390 l0 -50 93 0 c50 0 109 -3 130 -6 l37 -7 0 57 0 56 -130 0\n    -130 0 0 -50z"),e)," ",(t=document.createElementNS(_svgNamespace,"path"),t.setAttribute("d","M870 1425 c0 -8 -12 -18 -27 -22 l-28 -6 30 -9 c17 -5 75 -10 130\n    -12 86 -2 100 -5 99 -19 0 -10 -1 -80 -2 -157 l-2 -140 -65 0 c-60 0 -80 -9\n    -55 -25 8 -5 7 -11 -1 -21 -17 -20 2 -25 112 -27 l94 -2 0 40 0 40 100 5 c55\n    3 104 3 108 -1 8 -6 11 -1008 4 -1016 -2 -2 -236 -4 -520 -6 -283 -1 -519 -5\n    -523 -9 -4 -4 -1 -14 6 -23 11 -13 82 -15 561 -15 l549 0 0 570 c0 543 -1 570\n    -18 570 -10 0 -56 39 -103 86 -46 47 -93 90 -104 95 -11 6 22 -31 73 -82 50\n    -50 92 -95 92 -99 0 -14 -23 -16 -136 -12 l-111 4 -6 124 c-6 119 -7 126 -32\n    145 -14 12 -23 25 -20 30 4 5 -38 9 -99 9 -87 0 -106 -3 -106 -15z"),t)," ",(c=document.createElementNS(_svgNamespace,"path"),c.setAttribute("d","M1190 1429 c0 -14 225 -239 239 -239 7 0 11 30 11 85 0 77 -2 85 -19\n    85 -21 0 -61 44 -61 66 0 11 -20 14 -85 14 -55 0 -85 -4 -85 -11z"),c)," ",(n=document.createElementNS(_svgNamespace,"path"),n.setAttribute("d","M281 1331 c-24 -16 7 -23 127 -31 100 -6 107 -7 47 -9 -38 -1 -142\n    -8 -229 -14 l-160 -12 -7 -28 c-10 -37 -16 -683 -6 -693 4 -4 10 -4 15 0 4 4\n    8 166 9 359 l2 352 358 -3 358 -2 5 -353 c3 -193 2 -356 -2 -361 -3 -4 -136\n    -8 -295 -7 -290 2 -423 -4 -423 -20 0 -5 33 -9 73 -9 39 0 90 -3 111 -7 l39\n    -6 -45 -18 c-26 -10 -90 -20 -151 -25 l-107 -7 0 -38 c0 -35 3 -39 24 -39 36\n    0 126 -48 128 -68 1 -9 2 -40 3 -69 2 -29 6 -91 10 -138 l7 -85 44 0 44 0 0\n    219 0 220 311 1 c172 0 314 2 318 4 5 4 6 301 2 759 l-1 137 -297 0 c-164 0\n    -304 -4 -312 -9z"),n)," ",(a=document.createElementNS(_svgNamespace,"path"),a.setAttribute("d","M2 880 c-1 -276 2 -378 10 -360 12 30 11 657 -2 710 -5 21 -8 -121\n    -8 -350z"),a)," ",(s=document.createElementNS(_svgNamespace,"path"),s.setAttribute("d","M145 1178 c-3 -8 -4 -141 -3 -298 l3 -285 295 0 295 0 0 295 0 295\n    -293 3 c-230 2 -294 0 -297 -10z m553 -27 c11 -6 13 -60 11 -260 -1 -139 -6\n    -254 -9 -256 -4 -3 -124 -6 -266 -7 l-259 -3 -3 255 c-1 140 0 260 3 267 3 10\n    62 13 257 13 139 0 259 -4 266 -9z"),s)," ",(r=document.createElementNS(_svgNamespace,"path"),r.setAttribute("d","M445 1090 l-210 -5 -3 -37 -3 -38 225 0 226 0 0 34 c0 18 -6 37 -12\n    42 -7 5 -107 7 -223 4z"),r)," ",(m=document.createElementNS(_svgNamespace,"path"),m.setAttribute("d","M295 940 c-3 -6 1 -12 9 -15 9 -3 23 -7 31 -10 10 -3 15 -18 15 -49\n    0 -25 3 -47 8 -49 15 -9 47 11 52 33 9 38 28 34 41 -8 10 -35 9 -43 -7 -66\n    -23 -31 -51 -34 -56 -4 -4 31 -26 34 -38 4 -5 -14 -12 -26 -16 -26 -4 0 -22\n    16 -41 36 -33 35 -34 40 -28 86 7 48 6 50 -16 46 -18 -2 -23 -9 -21 -23 2 -11\n    3 -49 3 -85 0 -72 6 -83 60 -111 57 -29 95 -25 144 15 37 31 46 34 83 29 40\n    -5 42 -5 42 21 0 24 -3 27 -27 24 -24 -3 -28 1 -31 25 -3 24 0 28 20 25 13 -2\n    23 2 23 7 0 6 -9 9 -20 8 -13 -2 -28 9 -44 32 -13 19 -31 35 -41 35 -10 0 -23\n    7 -30 15 -14 17 -105 21 -115 5z"),m)," ",(p=document.createElementNS(_svgNamespace,"path"),p.setAttribute("d","M522 919 c-28 -11 -20 -29 14 -29 14 0 24 6 24 14 0 21 -11 25 -38\n    15z"),p)," ",(u=document.createElementNS(_svgNamespace,"path"),u.setAttribute("d","M623 922 c-53 -5 -43 -32 12 -32 32 0 45 4 45 14 0 17 -16 22 -57 18z"),u)," ",(i=document.createElementNS(_svgNamespace,"path"),i.setAttribute("d","M597 854 c-13 -14 6 -24 44 -24 28 0 39 4 39 15 0 11 -11 15 -38 15\n    -21 0 -42 -3 -45 -6z"),i)," ",(l=document.createElementNS(_svgNamespace,"path"),l.setAttribute("d","M597 794 c-4 -4 -7 -18 -7 -31 0 -21 4 -23 46 -23 44 0 45 1 42 28\n    -3 23 -8 27 -38 30 -20 2 -39 0 -43 -4z"),l)," ",(d=document.createElementNS(_svgNamespace,"path"),d.setAttribute("d","M989 883 c-34 -4 -37 -6 -37 -37 0 -32 2 -34 45 -40 25 -3 72 -6 104\n    -6 l59 0 0 45 0 45 -67 -2 c-38 -1 -84 -3 -104 -5z"),d)," ",(N=document.createElementNS(_svgNamespace,"path"),N.setAttribute("d","M993 703 c-42 -4 -54 -15 -33 -28 8 -5 8 -11 0 -20 -16 -20 -3 -24\n    104 -31 l96 -7 0 47 0 46 -62 -2 c-35 -1 -82 -3 -105 -5z"),N)," ",(o=document.createElementNS(_svgNamespace,"path"),o.setAttribute("d","M1005 523 c-50 -6 -59 -12 -46 -26 8 -10 7 -17 -1 -25 -6 -6 -9 -14\n    -6 -17 3 -3 51 -8 107 -12 l101 -6 0 46 0 47 -62 -1 c-35 -1 -76 -4 -93 -6z"),o)," ",(A=document.createElementNS(_svgNamespace,"path"),A.setAttribute("d","M537 344 c-4 -4 -7 -25 -7 -46 l0 -38 46 0 45 0 -3 43 c-3 40 -4 42\n    -38 45 -20 2 -39 0 -43 -4z"),A)," ",(b=document.createElementNS(_svgNamespace,"path"),b.setAttribute("d","M714 341 c-2 -2 -4 -22 -4 -43 l0 -38 225 0 225 0 0 45 0 46 -221 -3\n    c-121 -2 -222 -5 -225 -7z"),b)," ",(h=document.createElementNS(_svgNamespace,"path"),h.setAttribute("d","M304 205 c0 -66 1 -92 3 -57 2 34 2 88 0 120 -2 31 -3 3 -3 -63z"),h)," "]),v)," "]),g},page_white:function(){var e,t,c,n,a,s,r;return r=document.createElementNS(_svgNamespace,"svg"),r.setAttribute("width","16.000000pt"),r.setAttribute("height","16.000000pt"),r.setAttribute("viewBox","0 0 48.000000 48.000000"),r.setAttribute("preserveAspectRatio","xMidYMid meet"),r.setAttribute("class","UppyIcon"),_appendChild(r,[" ",(s=document.createElementNS(_svgNamespace,"g"),s.setAttribute("transform","translate(0.000000,48.000000) scale(0.100000,-0.100000)"),s.setAttribute("fill","#000000"),s.setAttribute("stroke","none"),_appendChild(s,[" ",(e=document.createElementNS(_svgNamespace,"path"),e.setAttribute("d","M20 240 c1 -202 3 -240 16 -240 12 0 14 38 14 240 0 208 -2 240 -15\n    240 -13 0 -15 -31 -15 -240z"),e)," ",(t=document.createElementNS(_svgNamespace,"path"),t.setAttribute("d","M75 471 c-4 -8 32 -11 119 -11 l126 0 0 -50 0 -50 50 0 c28 0 50 5\n    50 10 0 6 -18 10 -40 10 l-40 0 0 42 0 42 43 -39 42 -40 -43 45 -42 45 -129 3\n    c-85 2 -131 0 -136 -7z"),t)," ",(c=document.createElementNS(_svgNamespace,"path"),c.setAttribute("d","M398 437 l42 -43 0 -197 c0 -168 2 -197 15 -197 13 0 15 29 15 198\n    l0 198 -36 42 c-21 25 -44 42 -57 42 -18 0 -16 -6 21 -43z"),c)," ",(n=document.createElementNS(_svgNamespace,"path"),n.setAttribute("d","M92 353 l2 -88 3 78 4 77 89 0 89 0 8 -42 c8 -43 9 -43 55 -46 44 -3\n    47 -5 51 -35 4 -31 4 -31 5 6 l2 37 -50 0 -50 0 0 50 0 50 -105 0 -105 0 2\n    -87z"),n)," ",(a=document.createElementNS(_svgNamespace,"path"),a.setAttribute("d","M75 10 c8 -13 332 -13 340 0 4 7 -55 10 -170 10 -115 0 -174 -3 -170\n    -10z"),a)," "]),s)," "]),r}};
},{"yo-yoify/lib/appendChild":83}],113:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},_svgNamespace="http://www.w3.org/2000/svg",_appendChild=require("yo-yoify/lib/appendChild"),Plugin=require("../Plugin"),Provider=require("../../uppy-base/src/plugins/Provider"),View=require("../../generic-provider-views/index"),icons=require("./icons");module.exports=function(t){function e(r,o){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,t.call(this,r,o));n.type="acquirer",n.id="Dropbox",n.title="Dropbox",n.stateId="dropbox",n.icon=function(){var t,e,r,o;return o=document.createElementNS(_svgNamespace,"svg"),o.setAttribute("width","128"),o.setAttribute("height","118"),o.setAttribute("viewBox","0 0 128 118"),o.setAttribute("class","UppyIcon"),_appendChild(o,[" ",(t=document.createElementNS(_svgNamespace,"path"),t.setAttribute("d","M38.145.777L1.108 24.96l25.608 20.507 37.344-23.06z"),t)," ",(e=document.createElementNS(_svgNamespace,"path"),e.setAttribute("d","M1.108 65.975l37.037 24.183L64.06 68.525l-37.343-23.06zM64.06 68.525l25.917 21.633 37.036-24.183-25.61-20.51z"),e)," ",(r=document.createElementNS(_svgNamespace,"path"),r.setAttribute("d","M127.014 24.96L89.977.776 64.06 22.407l37.345 23.06zM64.136 73.18l-25.99 21.567-11.122-7.262v8.142l37.112 22.256 37.114-22.256v-8.142l-11.12 7.262z"),r)," "]),o},n.Dropbox=new Provider(r,{host:n.opts.host,provider:"dropbox"}),n.files=[],n.onAuth=n.onAuth.bind(n),n.render=n.render.bind(n);var i={};return n.opts=_extends({},i,o),n}return _inherits(e,t),e.prototype.install=function(){this.view=new View(this),this.core.setState({dropbox:{authenticated:!1,files:[],folders:[],directories:[],activeRow:-1,filterInput:"",isSearchVisible:!1}});var t=this.opts.target,e=this;this.target=this.mount(t,e)},e.prototype.uninstall=function(){this.unmount()},e.prototype.onAuth=function(t){this.view.updateState({authenticated:t}),t&&this.view.getFolder()},e.prototype.isFolder=function(t){return t.is_dir},e.prototype.getItemData=function(t){return _extends({},t,{size:t.bytes})},e.prototype.getItemIcon=function(t){var e=icons[t.icon];return e||(e=t.icon.startsWith("folder")?icons.folder:icons.page_white),e()},e.prototype.getItemSubList=function(t){return t.contents},e.prototype.getItemName=function(t){return t.path.length>1?t.path.substring(1):t.path},e.prototype.getMimeType=function(t){return t.mime_type},e.prototype.getItemId=function(t){return t.rev},e.prototype.getItemRequestPath=function(t){return encodeURIComponent(this.getItemName(t))},e.prototype.getItemModifiedDate=function(t){return t.modified},e.prototype.getItemThumbnailUrl=function(t){return this.opts.host+"/"+this.Dropbox.id+"/thumbnail/"+this.getItemRequestPath(t)},e.prototype.render=function(t){return this.view.render(t)},e}(Plugin);
},{"../../generic-provider-views/index":97,"../../uppy-base/src/plugins/Provider":141,"../Plugin":120,"./icons":112,"yo-yoify/lib/appendChild":83}],114:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _onload=require("on-load"),_appendChild=require("yo-yoify/lib/appendChild"),_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Plugin=require("./Plugin");module.exports=function(t){function e(n,r){var i;_classCallCheck(this,e);var o=_possibleConstructorReturn(this,t.call(this,n,r));o.type="acquirer",o.id="Dummy",o.title="Mr. Plugin";var s={};return o.opts=_extends({},s,r),o.strange=(i=document.createElement("h1"),i.textContent="this is strange 1",i),o.render=o.render.bind(o),o.install=o.install.bind(o),o}return _inherits(e,t),e.prototype.addFakeFileJustToTest=function(){var t=new Blob(["data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTIwIDEyMCI+CiAgPGNpcmNsZSBjeD0iNjAiIGN5PSI2MCIgcj0iNTAiLz4KPC9zdmc+Cg=="],{type:"image/svg+xml"}),e={source:"acceptance-test",name:"test-file",type:"image/svg+xml",data:t};this.props.log("Adding fake file blob"),this.props.addFile(e)},e.prototype.render=function(t){var e,n,r,i=(e=document.createElement("h2"),e.textContent="this is strange 2",e);return r=document.createElement("div"),r.setAttribute("class","wow-this-works"),_appendChild(r,[" ",(n=document.createElement("input"),_onload(n,function(t){t.focus()},null,2),n.setAttribute("type","text"),n.setAttribute("value","hello"),n.setAttribute("class","UppyDummy-firstInput"),n)," ",this.strange," ",i," ",t.dummy.text," "]),r},e.prototype.install=function(){var t=this;this.core.setState({dummy:{text:"123"}});var e=this.opts.target,n=this;this.target=this.mount(e,n),setTimeout(function(){t.core.setState({dummy:{text:"!!!"}})},2e3)},e}(Plugin);
},{"./Plugin":120,"on-load":48,"yo-yoify/lib/appendChild":83}],115:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _appendChild=require("yo-yoify/lib/appendChild"),_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Plugin=require("./Plugin"),_require=require("../core/Utils"),toArray=_require.toArray,Translator=require("../core/Translator");module.exports=function(t){function e(r,n){_classCallCheck(this,e);var i=_possibleConstructorReturn(this,t.call(this,r,n));i.id="FileInput",i.title="File Input",i.type="acquirer";var o={strings:{selectToUpload:"Select to upload"}},l={target:".UppyForm",getMetaFromForm:!0,replaceTargetContent:!0,multipleFiles:!0,pretty:!0,locale:o,inputName:"files[]"};return i.opts=_extends({},l,n),i.locale=_extends({},o,i.opts.locale),i.locale.strings=_extends({},o.strings,i.opts.locale.strings),i.translator=new Translator({locale:i.locale}),i.i18n=i.translator.translate.bind(i.translator),i.render=i.render.bind(i),i}return _inherits(e,t),e.prototype.handleInputChange=function(t){var e=this;this.core.log("All right, something selected through input..."),toArray(t.target.files).forEach(function(t){e.core.addFile({source:e.id,name:t.name,type:t.type,data:t})})},e.prototype.render=function(t){var e,r,n,i=(e=document.createElement("input"),e.setAttribute("style",""+String(this.opts.pretty?"width: 0.1px; height: 0.1px; opacity: 0; overflow: hidden; position: absolute; z-index: -1;":"")),e.setAttribute("type","file"),e.setAttribute("name",""+String(this.opts.inputName)),e.onchange=this.handleInputChange.bind(this),(this.opts.multipleFiles?"true":"false")&&e.setAttribute("multiple","multiple"),e.setAttribute("value",""),e.setAttribute("class","uppy-FileInput-input"),e);return r=document.createElement("form"),r.setAttribute("class","Uppy uppy-FileInput-form"),_appendChild(r,[" ",i," ",this.opts.pretty?(n=document.createElement("button"),n.setAttribute("type","button"),n.onclick=function(){return i.click()},n.setAttribute("class","uppy-FileInput-btn"),_appendChild(n,[" ",this.i18n("selectToUpload")," "]),n):null," "]),r},e.prototype.install=function(){var t=this.opts.target,e=this;this.target=this.mount(t,e)},e.prototype.uninstall=function(){this.unmount()},e}(Plugin);
},{"../core/Translator":85,"../core/Utils":87,"./Plugin":120,"yo-yoify/lib/appendChild":83}],116:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},_svgNamespace="http://www.w3.org/2000/svg",_appendChild=require("yo-yoify/lib/appendChild"),Plugin=require("../Plugin"),Provider=require("../../uppy-base/src/plugins/Provider"),View=require("../../generic-provider-views/index");module.exports=function(t){function e(r,i){_classCallCheck(this,e);var o=_possibleConstructorReturn(this,t.call(this,r,i));o.type="acquirer",o.id="GoogleDrive",o.title="Google Drive",o.stateId="googleDrive",o.icon=function(){var t,e;return e=document.createElementNS(_svgNamespace,"svg"),e.setAttribute("width","28"),e.setAttribute("height","28"),e.setAttribute("viewBox","0 0 16 16"),e.setAttribute("class","UppyIcon UppyModalTab-icon"),_appendChild(e,[" ",(t=document.createElementNS(_svgNamespace,"path"),t.setAttribute("d","M2.955 14.93l2.667-4.62H16l-2.667 4.62H2.955zm2.378-4.62l-2.666 4.62L0 10.31l5.19-8.99 2.666 4.62-2.523 4.37zm10.523-.25h-5.333l-5.19-8.99h5.334l5.19 8.99z"),t)," "]),e},o.GoogleDrive=new Provider(r,{host:o.opts.host,provider:"drive",authProvider:"google"}),o.files=[],o.onAuth=o.onAuth.bind(o),o.render=o.render.bind(o);var n={};return o.opts=_extends({},n,i),o}return _inherits(e,t),e.prototype.install=function(){this.view=new View(this),this.core.setState({googleDrive:{authenticated:!1,files:[],folders:[],directories:[],activeRow:-1,filterInput:"",isSearchVisible:!1}});var t=this.opts.target,e=this;this.target=this.mount(t,e)},e.prototype.uninstall=function(){this.unmount()},e.prototype.onAuth=function(t){this.view.updateState({authenticated:t}),t&&this.view.getFolder("root")},e.prototype.isFolder=function(t){return"application/vnd.google-apps.folder"===t.mimeType},e.prototype.getItemData=function(t){return _extends({},t,{size:parseFloat(t.fileSize)})},e.prototype.getItemIcon=function(t){var e;return e=document.createElement("img"),e.setAttribute("src",""+String(t.iconLink)),e},e.prototype.getItemSubList=function(t){var e=this;return t.items.filter(function(t){return e.isFolder(t)||!t.mimeType.startsWith("application/vnd.google")})},e.prototype.getItemName=function(t){return t.title?t.title:"/"},e.prototype.getMimeType=function(t){return t.mimeType},e.prototype.getItemId=function(t){return t.id},e.prototype.getItemRequestPath=function(t){return this.getItemId(t)},e.prototype.getItemModifiedDate=function(t){return t.modifiedByMeDate},e.prototype.getItemThumbnailUrl=function(t){return this.opts.host+"/"+this.GoogleDrive.id+"/thumbnail/"+this.getItemRequestPath(t)},e.prototype.render=function(t){return this.view.render(t)},e}(Plugin);
},{"../../generic-provider-views/index":97,"../../uppy-base/src/plugins/Provider":141,"../Plugin":120,"yo-yoify/lib/appendChild":83}],117:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _appendChild=require("yo-yoify/lib/appendChild"),_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Plugin=require("./Plugin");module.exports=function(t){function e(r,n){_classCallCheck(this,e);var o=_possibleConstructorReturn(this,t.call(this,r,n));o.type="progressindicator",o.id="Informer",o.title="Informer";var i={typeColors:{info:{text:"#fff",bg:"#000"},warning:{text:"#fff",bg:"#F6A623"},error:{text:"#fff",bg:"#e74c3c"},success:{text:"#fff",bg:"#7ac824"}}};return o.opts=_extends({},i,n),o.render=o.render.bind(o),o}return _inherits(e,t),e.prototype.render=function(t){var e,r,n,o=t.info,i=o.isHidden,s=o.type,a=o.message,l=o.details,p="background-color: "+this.opts.typeColors[s].bg+"; color: "+this.opts.typeColors[s].text+";";return r=document.createElement("div"),r.setAttribute("style",""+String(p)),r.setAttribute("aria-hidden",""+String(i)),r.setAttribute("class","Uppy UppyTheme--default UppyInformer"),_appendChild(r,[" ",(e=document.createElement("p"),_appendChild(e,[" ",a," ",l?(n=document.createElement("span"),n.setAttribute("style","color: "+String(this.opts.typeColors[s].bg)),n.setAttribute("data-balloon",""+String(l)),n.setAttribute("data-balloon-pos","up"),n.setAttribute("data-balloon-length","large"),n.textContent="?",n):null," "]),e)," "]),r},e.prototype.install=function(){var t=this.opts.target,e=this;this.target=this.mount(t,e)},e}(Plugin);
},{"./Plugin":120,"yo-yoify/lib/appendChild":83}],118:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},_svgNamespace="http://www.w3.org/2000/svg",_appendChild=require("yo-yoify/lib/appendChild"),Plugin=require("../Plugin"),Provider=require("../../uppy-base/src/plugins/Provider"),View=require("../../generic-provider-views/index");module.exports=function(t){function e(r,i){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,t.call(this,r,i));n.type="acquirer",n.id="Instagram",n.title="Instagram",n.stateId="instagram",n.icon=function(){var t,e,r,i;return i=document.createElementNS(_svgNamespace,"svg"),i.setAttribute("width","28"),i.setAttribute("height","28"),i.setAttribute("viewBox","0 0 512 512"),i.setAttribute("class","UppyIcon UppyModalTab-icon"),_appendChild(i,[" ",(t=document.createElementNS(_svgNamespace,"path"),t.setAttribute("d","M256,49.471c67.266,0,75.233.257,101.8,1.469,24.562,1.121,37.9,5.224,46.778,8.674a78.052,78.052,0,0,1,28.966,18.845,78.052,78.052,0,0,1,18.845,28.966c3.45,8.877,7.554,22.216,8.674,46.778,1.212,26.565,1.469,34.532,1.469,101.8s-0.257,75.233-1.469,101.8c-1.121,24.562-5.225,37.9-8.674,46.778a83.427,83.427,0,0,1-47.811,47.811c-8.877,3.45-22.216,7.554-46.778,8.674-26.56,1.212-34.527,1.469-101.8,1.469s-75.237-.257-101.8-1.469c-24.562-1.121-37.9-5.225-46.778-8.674a78.051,78.051,0,0,1-28.966-18.845,78.053,78.053,0,0,1-18.845-28.966c-3.45-8.877-7.554-22.216-8.674-46.778-1.212-26.564-1.469-34.532-1.469-101.8s0.257-75.233,1.469-101.8c1.121-24.562,5.224-37.9,8.674-46.778A78.052,78.052,0,0,1,78.458,78.458a78.053,78.053,0,0,1,28.966-18.845c8.877-3.45,22.216-7.554,46.778-8.674,26.565-1.212,34.532-1.469,101.8-1.469m0-45.391c-68.418,0-77,.29-103.866,1.516-26.815,1.224-45.127,5.482-61.151,11.71a123.488,123.488,0,0,0-44.62,29.057A123.488,123.488,0,0,0,17.3,90.982C11.077,107.007,6.819,125.319,5.6,152.134,4.369,179,4.079,187.582,4.079,256S4.369,333,5.6,359.866c1.224,26.815,5.482,45.127,11.71,61.151a123.489,123.489,0,0,0,29.057,44.62,123.486,123.486,0,0,0,44.62,29.057c16.025,6.228,34.337,10.486,61.151,11.71,26.87,1.226,35.449,1.516,103.866,1.516s77-.29,103.866-1.516c26.815-1.224,45.127-5.482,61.151-11.71a128.817,128.817,0,0,0,73.677-73.677c6.228-16.025,10.486-34.337,11.71-61.151,1.226-26.87,1.516-35.449,1.516-103.866s-0.29-77-1.516-103.866c-1.224-26.815-5.482-45.127-11.71-61.151a123.486,123.486,0,0,0-29.057-44.62A123.487,123.487,0,0,0,421.018,17.3C404.993,11.077,386.681,6.819,359.866,5.6,333,4.369,324.418,4.079,256,4.079h0Z"),t)," ",(e=document.createElementNS(_svgNamespace,"path"),e.setAttribute("d","M256,126.635A129.365,129.365,0,1,0,385.365,256,129.365,129.365,0,0,0,256,126.635Zm0,213.338A83.973,83.973,0,1,1,339.974,256,83.974,83.974,0,0,1,256,339.973Z"),e)," ",(r=document.createElementNS(_svgNamespace,"circle"),r.setAttribute("cx","390.476"),r.setAttribute("cy","121.524"),r.setAttribute("r","30.23"),r)," "]),i},n.Instagram=new Provider(r,{host:n.opts.host,provider:"instagram",authProvider:"instagram"}),n.files=[],n.onAuth=n.onAuth.bind(n),n.render=n.render.bind(n);var o={};return n.opts=_extends({},o,i),n}return _inherits(e,t),e.prototype.install=function(){this.view=new View(this,{viewType:"grid"}),this.core.setState({instagram:{authenticated:!1,files:[],folders:[],directories:[],activeRow:-1,filterInput:"",isSearchVisible:!1}});var t=this.opts.target,e=this;this.target=this.mount(t,e)},e.prototype.uninstall=function(){this.unmount()},e.prototype.onAuth=function(t){this.view.updateState({authenticated:t}),t&&this.view.getFolder("recent")},e.prototype.isFolder=function(t){return!1},e.prototype.getItemData=function(t){return t},e.prototype.getItemIcon=function(t){var e;return e=document.createElement("img"),e.setAttribute("width","100px"),e.setAttribute("src",""+String(t.images.thumbnail.url)),e},e.prototype.getItemSubList=function(t){var e=[];return t.data.forEach(function(t){t.carousel_media?t.carousel_media.forEach(function(r,i){var n=t.id,o=t.created_time,a=_extends({},r,{id:n,created_time:o});a.carousel_id=i,e.push(a)}):e.push(t)}),e},e.prototype.getItemName=function(t){return""},e.prototype.getMimeType=function(t){return"video"===t.type?"video/mp4":"image/jpeg"},e.prototype.getItemId=function(t){return""+t.id+(t.carousel_id||"")},e.prototype.getItemRequestPath=function(t){var e=isNaN(t.carousel_id)?"":"?carousel_id="+t.carousel_id;return""+t.id+e},e.prototype.getItemModifiedDate=function(t){return t.created_time},e.prototype.getItemThumbnailUrl=function(t){return t.images.thumbnail.url},e.prototype.getNextPagePath=function(){var t=this.core.getState()[this.stateId].files;return"recent?max_id="+this.getItemId(t[t.length-1])},e.prototype.render=function(t){return this.view.render(t)},e}(Plugin);
},{"../../generic-provider-views/index":97,"../../uppy-base/src/plugins/Provider":141,"../Plugin":120,"yo-yoify/lib/appendChild":83}],119:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Plugin=require("./Plugin");module.exports=function(e){function t(n,o){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,e.call(this,n,o));i.type="modifier",i.id="MetaData",i.title="Meta Data";var r={};return i.opts=_extends({},r,o),i.handleFileAdded=i.handleFileAdded.bind(i),i}return _inherits(t,e),t.prototype.handleFileAdded=function(e){var t=this;this.opts.fields.forEach(function(n){var o={};o[n.id]=n.value,t.core.updateMeta(o,e.id)})},t.prototype.addInitialMeta=function(){var e=this.opts.fields;this.core.setState({metaFields:e}),this.core.on("core:file-added",this.handleFileAdded)},t.prototype.install=function(){this.addInitialMeta()},t.prototype.uninstall=function(){this.core.off("core:file-added",this.handleFileAdded)},t}(Plugin);
},{"./Plugin":120}],120:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var yo=require("yo-yo"),nanoraf=require("nanoraf"),_require=require("../core/Utils"),findDOMElement=_require.findDOMElement,getFormData=require("get-form-data");module.exports=function(){function t(e,n){_classCallCheck(this,t),this.core=e,this.opts=n||{},this.opts.replaceTargetContent,this.opts.replaceTargetContent,this.update=this.update.bind(this),this.mount=this.mount.bind(this),this.install=this.install.bind(this),this.uninstall=this.uninstall.bind(this)}return t.prototype.update=function(t){void 0!==this.el&&this.updateUI&&this.updateUI(t)},t.prototype.mount=function(t,e){var n=this,i=e.id,o=findDOMElement(t);if(this.updateUI=nanoraf(function(t){n.el=yo.update(n.el,n.render(t))}),o){if(this.core.log("Installing "+i+" to a DOM element"),this.opts.getMetaFromForm&&"FORM"===o.nodeName){var r=getFormData(o);this.core.setMeta(r)}return this.opts.replaceTargetContent&&(o.innerHTML=""),this.el=e.render(this.core.state),o.appendChild(this.el),o}var s=t,a=(new s).id;return this.core.log("Installing "+i+" to "+a),this.core.getPlugin(a).addTarget(e)},t.prototype.unmount=function(){this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},t.prototype.install=function(){},t.prototype.uninstall=function(){this.unmount()},t}();
},{"../core/Utils":87,"get-form-data":33,"nanoraf":47,"yo-yo":81}],121:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _appendChild=require("yo-yoify/lib/appendChild"),_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Plugin=require("./Plugin");module.exports=function(t){function e(r,n){_classCallCheck(this,e);var o=_possibleConstructorReturn(this,t.call(this,r,n));o.id="ProgressBar",o.title="Progress Bar",o.type="progressindicator";var i={target:"body",replaceTargetContent:!1,fixed:!1};return o.opts=_extends({},i,n),o.render=o.render.bind(o),o}return _inherits(e,t),e.prototype.render=function(t){var e,r,n,o=t.totalProgress||0;return n=document.createElement("div"),n.setAttribute("style",""+String(this.opts.fixed?"position: fixed":"null")),n.setAttribute("class","UppyProgressBar"),_appendChild(n,[" ",(e=document.createElement("div"),e.setAttribute("style","width: "+String(o)+"%"),e.setAttribute("class","UppyProgressBar-inner"),e)," ",(r=document.createElement("div"),r.setAttribute("class","UppyProgressBar-percentage"),_appendChild(r,[o]),r)," "]),n},e.prototype.install=function(){var t=this.opts.target,e=this;this.target=this.mount(t,e)},e.prototype.uninstall=function(){this.unmount()},e}(Plugin);
},{"./Plugin":120,"yo-yoify/lib/appendChild":83}],122:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function connect(e,t){var n=indexedDB.open(e,DB_VERSION);return new _Promise(function(e,r){n.onupgradeneeded=function(n){var r=n.target.result;r.createObjectStore(t,{keyPath:"id"}).transaction.oncomplete=function(){e(r)}},n.onsuccess=function(t){e(t.target.result)},n.onerror=r})}function waitForRequest(e){return new _Promise(function(t,n){e.onsuccess=function(e){t(e.target.result)},e.onerror=n})}var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_Promise="undefined"==typeof Promise?require("es6-promise").Promise:Promise,indexedDB=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB,isSupported=!!indexedDB,DB_NAME="uppy-blobs",DB_VERSION=1,IndexedDBStore=function(){function e(t,n){_classCallCheck(this,e),this.opts=_extends({dbName:DB_NAME,storeName:"default",maxFileSize:10485760,maxTotalSize:314572800},n),this.name=this.opts.storeName,this.ready=connect(this.opts.dbName,this.opts.storeName)}return e.prototype.list=function(){var e=this;return this.ready.then(function(t){return waitForRequest(t.transaction([e.name],"readonly").objectStore(e.name).getAll())}).then(function(e){var t={};return e.forEach(function(e){t[e.id]=e}),t})},e.prototype.get=function(e){var t=this;return this.ready.then(function(n){return waitForRequest(n.transaction([t.name],"readonly").objectStore(t.name).get(e))}).then(function(e){return e.data})},e.prototype.getSize=function(){var e=this;return this.ready.then(function(t){var n=t.transaction([e.name],"readonly"),r=n.objectStore(e.name).openCursor();return new _Promise(function(e,t){var n=0;r.onsuccess=function(t){var r=t.target.result;r?(n+=r.value.data.size,r.continue()):e(n)},r.onerror=function(){t(new Error("Could not retrieve stored blobs size"))}})})},e.prototype.put=function(e){var t=this;return e.data.size>this.opts.maxFileSize?Promise.reject(new Error("File is too big to store.")):this.getSize().then(function(e){return e>t.opts.maxTotalSize?Promise.reject(new Error("No space left")):t.ready}).then(function(n){return waitForRequest(n.transaction([t.name],"readwrite").objectStore(t.name).add({id:e.id,data:e.data}))})},e.prototype.delete=function(e){var t=this;return this.ready.then(function(n){return waitForRequest(n.transaction([t.name],"readwrite").objectStore(t.name).delete(e))})},e}();IndexedDBStore.isSupported=isSupported,module.exports=IndexedDBStore;
},{"es6-promise":30}],123:[function(require,module,exports){
"use strict";function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var _Promise="undefined"==typeof Promise?require("es6-promise").Promise:Promise,isSupported="serviceWorker"in navigator,ServiceWorkerStore=function(){function e(r){var o=this;_classCallCheck(this,e),this.core=r,this.ready=new _Promise(function(e,r){o.core.on("core:file-sw-ready",function(){e()})})}return e.prototype.list=function(){var e={},r=new _Promise(function(r,o){e.resolve=r,e.reject=o});console.log("Loading stored blobs from Service Worker");var o=function r(o){switch(o.data.type){case"ALL_FILES":e.resolve(o.data.files),navigator.serviceWorker.removeEventListener("message",r)}};return this.ready.then(function(){navigator.serviceWorker.addEventListener("message",o),navigator.serviceWorker.controller.postMessage({type:"GET_FILES"})}),r},e.prototype.put=function(e){return this.ready.then(function(){navigator.serviceWorker.controller.postMessage({type:"ADD_FILE",data:{id:e.id,data:e.data}})})},e.prototype.delete=function(e){return this.ready.then(function(){navigator.serviceWorker.controller.postMessage({type:"REMOVE_FILE",data:e})})},e}();ServiceWorkerStore.isSupported=isSupported,module.exports=ServiceWorkerStore;
},{"es6-promise":30}],124:[function(require,module,exports){
"use strict";function _classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,o){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!=typeof o&&"function"!=typeof o?e:o}function _inherits(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(e,o):e.__proto__=o)}var _extends=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var r=arguments[o];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},Plugin=require("../Plugin"),ServiceWorkerStore=require("./ServiceWorkerStore"),IndexedDBStore=require("./IndexedDBStore");module.exports=function(e){function o(r,t){_classCallCheck(this,o);var s=_possibleConstructorReturn(this,e.call(this,r,t));s.type="debugger",s.id="RestoreFiles",s.title="Restore Files";var i={serviceWorker:!1};return s.opts=_extends({},i,t),s.ServiceWorkerStore=!!s.opts.serviceWorker&&new ServiceWorkerStore(r),s.IndexedDBStore=new IndexedDBStore(r),s.saveFilesStateToLocalStorage=s.saveFilesStateToLocalStorage.bind(s),s.loadFilesStateFromLocalStorage=s.loadFilesStateFromLocalStorage.bind(s),s.loadFileBlobsFromServiceWorker=s.loadFileBlobsFromServiceWorker.bind(s),s.loadFileBlobsFromIndexedDB=s.loadFileBlobsFromIndexedDB.bind(s),s.onBlobsLoaded=s.onBlobsLoaded.bind(s),s}return _inherits(o,e),o.prototype.loadFilesStateFromLocalStorage=function(){var e=localStorage.getItem("uppyState");e&&(this.core.log("Recovered some state from Local Storage"),this.core.setState(JSON.parse(e)))},o.prototype.saveFilesStateToLocalStorage=function(){var e=JSON.stringify({currentUploads:this.core.state.currentUploads,files:this.core.state.files});localStorage.setItem("uppyState",e)},o.prototype.loadFileBlobsFromServiceWorker=function(){var e=this;this.ServiceWorkerStore.list().then(function(o){console.log(o);var r=Object.keys(o).length;r===Object.keys(e.core.state.files).length?(e.core.log("Successfully recovered "+r+" blobs from Service Worker!"),e.core.info("Successfully recovered "+r+" files","success",3e3),e.onBlobsLoaded(o)):(e.core.log("Failed to recover blobs from Service Worker, trying IndexedDB now..."),e.loadFileBlobsFromIndexedDB())})},o.prototype.loadFileBlobsFromIndexedDB=function(){var e=this;this.IndexedDBStore.list().then(function(o){var r=Object.keys(o).length;if(r>0)return e.core.log("Successfully recovered "+r+" blobs from Indexed DB!"),e.core.info("Successfully recovered "+r+" files","success",3e3),e.onBlobsLoaded(o);e.core.log("Couldn’t recover anything from IndexedDB :(")})},o.prototype.onBlobsLoaded=function(e){var o=this,r=_extends({},this.core.state.files);Object.keys(e).forEach(function(t){var s=e[t].data,i={data:s,isRestored:!0},n=_extends({},r[t],_extends({},i));r[t]=n,o.core.generatePreview(n)}),this.core.setState({files:r}),this.core.emit("core:restored")},o.prototype.install=function(){var e=this;this.loadFilesStateFromLocalStorage(),Object.keys(this.core.state.files).length>0&&(this.ServiceWorkerStore?(this.core.log("Attempting to load files from Service Worker..."),this.loadFileBlobsFromServiceWorker()):(this.core.log("Attempting to load files from Indexed DB..."),this.loadFileBlobsFromIndexedDB())),this.core.on("core:file-added",function(o){o.isRemote||(e.ServiceWorkerStore&&e.ServiceWorkerStore.put(o).catch(function(o){e.core.log("Could not store file","error"),e.core.log(o)}),e.IndexedDBStore.put(o).catch(function(o){e.core.log("Could not store file","error"),e.core.log(o)}))}),this.core.on("core:file-removed",function(o){e.ServiceWorkerStore&&e.ServiceWorkerStore.delete(o),e.IndexedDBStore.delete(o)}),this.core.on("core:state-update",this.saveFilesStateToLocalStorage),this.core.on("core:restored",function(){var o=e.core.getState(),r=o.currentUploads;r&&Object.keys(r).forEach(function(o){e.core.restore(o,r[o])})})},o}(Plugin);
},{"../Plugin":120,"./IndexedDBStore":122,"./ServiceWorkerStore":123}],125:[function(require,module,exports){
"use strict";function progressDetails(e){var t;return t=document.createElement("span"),_appendChild(t,[e.totalProgress||0,"%・",e.complete," / ",e.inProgress,"・",e.totalUploadedSize," / ",e.totalSize,"・↑ ",e.totalSpeed,"/s・",e.totalETA]),t}function getUploadingState(e,t){if(e.error)return STATE_ERROR;if(e.isAllComplete)return STATE_COMPLETE;for(var r=STATE_WAITING,s=Object.keys(t),a=0;a<s.length;a++){var l=t[s[a]].progress;if(l.uploadStarted&&!l.uploadComplete)return STATE_UPLOADING;l.preprocess&&r!==STATE_UPLOADING&&(r=STATE_PREPROCESSING),l.postprocess&&r!==STATE_UPLOADING&&r!==STATE_PREPROCESSING&&(r=STATE_POSTPROCESSING)}return r}function calculateProcessingProgress(e){function t(e){return"determinate"===e.mode}var r=[];Object.keys(e).forEach(function(t){var s=e[t].progress;s.preprocess&&r.push(s.preprocess),s.postprocess&&r.push(s.postprocess)});var s=r[0];return{mode:s.mode,message:s.message,value:r.filter(t).reduce(function(e,t,r,s){return e+t.value/s.length},0)}}var _appendChild=require("yo-yoify/lib/appendChild"),_svgNamespace="http://www.w3.org/2000/svg",throttle=require("lodash.throttle"),throttledProgressDetails=throttle(progressDetails,1e3,{leading:!0,trailing:!0}),STATE_ERROR="error",STATE_WAITING="waiting",STATE_PREPROCESSING="preprocessing",STATE_UPLOADING="uploading",STATE_POSTPROCESSING="postprocessing",STATE_COMPLETE="complete";module.exports=function(e){var t,r,s;e=e||{};var a=getUploadingState(e,e.files||{}),l=e.totalProgress,n=void 0,i=void 0;if(a===STATE_PREPROCESSING||a===STATE_POSTPROCESSING){var o=calculateProcessingProgress(e.files);n=o.mode,"determinate"===n&&(l=100*o.value),i=ProgressBarProcessing(o)}else a===STATE_COMPLETE?i=ProgressBarComplete(e):a===STATE_UPLOADING?i=ProgressBarUploading(e):a===STATE_ERROR&&(l=void 0,i=ProgressBarError(e));var u="number"==typeof l?l:100;return s=document.createElement("div"),s.setAttribute("aria-hidden",""+String(a===STATE_WAITING)),s.setAttribute("title",""),s.setAttribute("class","UppyStatusBar is-"+String(a)),_appendChild(s,[" ",(t=document.createElement("progress"),t.setAttribute("style","display: none;"),t.setAttribute("min","0"),t.setAttribute("max","100"),t.setAttribute("value",""+String(l)),t)," ",(r=document.createElement("div"),r.setAttribute("style","width: "+String(u)+"%"),r.setAttribute("class","UppyStatusBar-progress "+String(n?"is-"+n:"")),r)," ",i," "]),s};var ProgressBarProcessing=function(e){var t;return t=document.createElement("div"),t.setAttribute("class","UppyStatusBar-content"),_appendChild(t,[" ","determinate"===e.mode?Math.round(100*e.value)+"%・":""," ",e.message," "]),t},ProgressBarUploading=function(e){var t,r,s;return t=document.createElement("div"),t.setAttribute("class","UppyStatusBar-content"),_appendChild(t,[" ",e.isUploadStarted&&!e.isAllComplete?e.isAllPaused?(s=document.createElement("span"),s.setAttribute("title","Paused"),_appendChild(s,[pauseResumeButtons(e)," Paused・",e.totalProgress,"%"]),s):(r=document.createElement("span"),r.setAttribute("title","Uploading"),_appendChild(r,[pauseResumeButtons(e)," Uploading... ",throttledProgressDetails(e)]),r):null," "]),t},ProgressBarComplete=function(e){var t,r,s,a,l=e.totalProgress;return a=document.createElement("div"),a.setAttribute("class","UppyStatusBar-content"),_appendChild(a,[" ",(s=document.createElement("span"),s.setAttribute("title","Complete"),_appendChild(s,[" ",(r=document.createElementNS(_svgNamespace,"svg"),r.setAttribute("width","18"),r.setAttribute("height","17"),r.setAttribute("viewBox","0 0 23 17"),r.setAttribute("class","UppyStatusBar-action UppyIcon"),_appendChild(r,[" ",(t=document.createElementNS(_svgNamespace,"path"),t.setAttribute("d","M8.944 17L0 7.865l2.555-2.61 6.39 6.525L20.41 0 23 2.645z"),t)," "]),r)," Upload complete・",l,"% "]),s)," "]),a},ProgressBarError=function(e){var t,r,s=e.error;return r=document.createElement("div"),r.setAttribute("class","UppyStatusBar-content"),_appendChild(r,[" ",(t=document.createElement("span"),_appendChild(t,[" ",s.message," "]),t)," "]),r},pauseResumeButtons=function(e){var t,r,s,a,l,n,i,o=e.resumableUploads?e.isAllPaused?"resume upload":"pause upload":"cancel upload";return t=document.createElement("button"),t.setAttribute("title",""+String(o)),t.setAttribute("type","button"),t.onclick=function(){return togglePauseResume(e)},t.setAttribute("class","UppyStatusBar-action"),_appendChild(t,[" ",e.resumableUploads?e.isAllPaused?(s=document.createElementNS(_svgNamespace,"svg"),s.setAttribute("width","15"),s.setAttribute("height","17"),s.setAttribute("viewBox","0 0 11 13"),s.setAttribute("class","UppyIcon"),_appendChild(s,[" ",(r=document.createElementNS(_svgNamespace,"path"),r.setAttribute("d","M1.26 12.534a.67.67 0 0 1-.674.012.67.67 0 0 1-.336-.583v-11C.25.724.38.5.586.382a.658.658 0 0 1 .673.012l9.165 5.5a.66.66 0 0 1 .325.57.66.66 0 0 1-.325.573l-9.166 5.5z"),r)," "]),s):(l=document.createElementNS(_svgNamespace,"svg"),l.setAttribute("width","16"),l.setAttribute("height","17"),l.setAttribute("viewBox","0 0 12 13"),l.setAttribute("class","UppyIcon"),_appendChild(l,[" ",(a=document.createElementNS(_svgNamespace,"path"),a.setAttribute("d","M4.888.81v11.38c0 .446-.324.81-.722.81H2.722C2.324 13 2 12.636 2 12.19V.81c0-.446.324-.81.722-.81h1.444c.398 0 .722.364.722.81zM9.888.81v11.38c0 .446-.324.81-.722.81H7.722C7.324 13 7 12.636 7 12.19V.81c0-.446.324-.81.722-.81h1.444c.398 0 .722.364.722.81z"),a)," "]),l):(i=document.createElementNS(_svgNamespace,"svg"),i.setAttribute("width","16px"),i.setAttribute("height","16px"),i.setAttribute("viewBox","0 0 19 19"),i.setAttribute("class","UppyIcon"),_appendChild(i,[" ",(n=document.createElementNS(_svgNamespace,"path"),n.setAttribute("d","M17.318 17.232L9.94 9.854 9.586 9.5l-.354.354-7.378 7.378h.707l-.62-.62v.706L9.318 9.94l.354-.354-.354-.354L1.94 1.854v.707l.62-.62h-.706l7.378 7.378.354.354.354-.354 7.378-7.378h-.707l.622.62v-.706L9.854 9.232l-.354.354.354.354 7.378 7.378.708-.707-7.38-7.378v.708l7.38-7.38.353-.353-.353-.353-.622-.622-.353-.353-.354.352-7.378 7.38h.708L2.56 1.23 2.208.88l-.353.353-.622.62-.353.355.352.353 7.38 7.38v-.708l-7.38 7.38-.353.353.352.353.622.622.353.353.354-.353 7.38-7.38h-.708l7.38 7.38z"),n)," "]),i)," "]),t},togglePauseResume=function(e){if(!e.isAllComplete)return e.resumableUploads?e.isAllPaused?e.resumeAll():e.pauseAll():e.cancelAll()};
},{"lodash.throttle":42,"yo-yoify/lib/appendChild":83}],126:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Plugin=require("../Plugin"),StatusBar=require("./StatusBar"),_require=require("../../core/Utils"),getSpeed=_require.getSpeed,_require2=require("../../core/Utils"),getBytesRemaining=_require2.getBytesRemaining,_require3=require("../../core/Utils"),prettyETA=_require3.prettyETA,prettyBytes=require("prettier-bytes");module.exports=function(e){function t(r,o){_classCallCheck(this,t);var s=_possibleConstructorReturn(this,e.call(this,r,o));s.id="StatusBarUI",s.title="StatusBar UI",s.type="progressindicator";var n={target:"body",showProgressDetails:!1};return s.opts=_extends({},n,o),s.pauseAll=s.pauseAll.bind(s),s.resumeAll=s.resumeAll.bind(s),s.cancelAll=s.cancelAll.bind(s),s.render=s.render.bind(s),s.install=s.install.bind(s),s}return _inherits(t,e),t.prototype.cancelAll=function(){this.core.emit("core:cancel-all")},t.prototype.pauseAll=function(){this.core.emit("core:pause-all")},t.prototype.resumeAll=function(){this.core.emit("core:resume-all")},t.prototype.getTotalSpeed=function(e){var t=0;return e.forEach(function(e){t+=getSpeed(e.progress)}),t},t.prototype.getTotalETA=function(e){var t=this.getTotalSpeed(e);if(0===t)return 0;var r=e.reduce(function(e,t){return e+getBytesRemaining(t.progress)},0);return Math.round(r/t*10)/10},t.prototype.render=function(e){var t=e.files,r=Object.keys(t).filter(function(e){return t[e].progress.uploadStarted}),o=Object.keys(t).filter(function(e){return t[e].progress.uploadComplete}),s=Object.keys(t).filter(function(e){return!t[e].progress.uploadComplete&&t[e].progress.uploadStarted&&!t[e].isPaused}),n=Object.keys(t).filter(function(e){return t[e].progress.preprocess||t[e].progress.postprocess}),l=[];s.forEach(function(e){l.push(t[e])});var i=prettyBytes(this.getTotalSpeed(l)),a=prettyETA(this.getTotalETA(l)),u=0,p=0;l.forEach(function(e){u+=e.progress.bytesTotal||0,p+=e.progress.bytesUploaded||0}),u=prettyBytes(u),p=prettyBytes(p);var c=100===e.totalProgress&&o.length===Object.keys(t).length&&0===n.length,f=0===s.length&&!c&&r.length>0,g=r.length>0,h=this.core.getState().capabilities.resumableUploads||!1;return StatusBar({error:e.error,totalProgress:e.totalProgress,totalSize:u,totalUploadedSize:p,uploadStartedFiles:r,isAllComplete:c,isAllPaused:f,isUploadStarted:g,pauseAll:this.pauseAll,resumeAll:this.resumeAll,cancelAll:this.cancelAll,complete:o.length,inProgress:r.length,totalSpeed:i,totalETA:a,files:e.files,resumableUploads:h})},t.prototype.install=function(){var e=this.opts.target,t=this;this.target=this.mount(e,t)},t.prototype.uninstall=function(){this.unmount()},t}(Plugin);
},{"../../core/Utils":87,"../Plugin":120,"./StatusBar":125,"prettier-bytes":52}],127:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}module.exports=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.apiUrl="https://api2.transloadit.com",this.opts=t}return e.prototype.createAssembly=function(e){var t=(e.templateId,e.params),n=e.fields,o=e.signature,r=e.expectedFiles,s=new FormData;return s.append("params","string"==typeof t?t:JSON.stringify(t)),o&&s.append("signature",o),Object.keys(n).forEach(function(e){s.append(e,n[e])}),s.append("num_expected_upload_files",r),fetch(this.apiUrl+"/assemblies",{method:"post",body:s}).then(function(e){return e.json()}).then(function(e){if(e.error){var t=new Error(e.message);throw t.code=e.error,t.status=e,t}return e})},e.prototype.reserveFile=function(e,t){var n=encodeURIComponent(t.size);return fetch(e.assembly_ssl_url+"/reserve_file?size="+n,{method:"post"}).then(function(e){return e.json()})},e.prototype.addFile=function(e,t){if(!t.uploadURL)return Promise.reject(new Error("File does not have an `uploadURL`."));var n=encodeURIComponent(t.size),o=encodeURIComponent(t.uploadURL),r=encodeURIComponent(t.name),s="size="+n+"&filename="+r+"&fieldname=file&s3Url="+o;return fetch(e.assembly_ssl_url+"/add_file?"+s,{method:"post"}).then(function(e){return e.json()})},e.prototype.getAssemblyStatus=function(e){return fetch(e).then(function(e){return e.json()})},e}();
},{}],128:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},io=require("socket.io-client"),Emitter=require("namespace-emitter"),parseUrl=require("url-parse");module.exports=function(){function t(e,s){_classCallCheck(this,t);var n=Emitter();this.on=n.on.bind(n),this.off=n.off.bind(n),this.emit=n.emit.bind(n);var i=parseUrl(e);this.assembly=s,this.socket=io.connect(i.origin,{path:i.pathname}),this.attachDefaultHandlers()}return t.prototype.attachDefaultHandlers=function(){var t=this;this.socket.on("connect",function(){t.socket.emit("assembly_connect",{id:t.assembly.assembly_id}),t.emit("connect")}),this.socket.on("assembly_finished",function(){t.emit("finished"),t.close()}),this.socket.on("assembly_upload_finished",function(e){t.emit("upload",e)}),this.socket.on("assembly_upload_meta_data_extracted",function(){t.emit("metadata")}),this.socket.on("assembly_result_finished",function(e,s){t.emit("result",e,s)}),this.socket.on("assembly_error",function(e){t.emit("error",_extends(new Error(e.message),e))})},t.prototype.close=function(){this.socket.disconnect()},t}();
},{"namespace-emitter":46,"socket.io-client":57,"url-parse":74}],129:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o])}return e},_createClass=function(){function e(e,t){for(var s=0;s<t.length;s++){var o=t[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,s,o){return s&&e(t.prototype,s),o&&e(t,o),t}}(),_Promise="undefined"==typeof Promise?require("es6-promise").Promise:Promise,Plugin=require("../Plugin"),Client=require("./Client"),StatusSocket=require("./Socket");module.exports=function(e){function t(s,o){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,e.call(this,s,o));r.type="uploader",r.id="Transloadit",r.title="Transloadit";var i={strings:{creatingAssembly:"Preparing upload...",creatingAssemblyFailed:"Transloadit: Could not create assembly",encoding:"Encoding..."}},n={waitForEncoding:!1,waitForMetadata:!1,alwaysRunAssembly:!1,importFromUploadURLs:!1,signature:null,params:null,fields:{},getAssemblyOptions:function(e,t){return{params:t.params,signature:t.signature,fields:t.fields}},locale:i};return r.opts=_extends({},n,o),r.locale=_extends({},i,r.opts.locale),r.locale.strings=_extends({},i.strings,r.opts.locale.strings),r.prepareUpload=r.prepareUpload.bind(r),r.afterUpload=r.afterUpload.bind(r),r.onFileUploadURLAvailable=r.onFileUploadURLAvailable.bind(r),r.opts.params&&r.validateParams(r.opts.params),r.client=new Client,r.sockets={},r}return _inherits(t,e),t.prototype.validateParams=function(e){if(!e)throw new Error("Transloadit: The `params` option is required.");if("string"==typeof e)try{e=JSON.parse(e)}catch(e){throw e.message="Transloadit: The `params` option is a malformed JSON string: "+e.message,e}if(!e.auth||!e.auth.key)throw new Error("Transloadit: The `params.auth.key` option is required. You can find your Transloadit API key at https://transloadit.com/accounts/credentials.")},t.prototype.getAssemblyOptions=function(e){var t=this,s=this.opts;return Promise.all(e.map(function(e){var o=t.core.getFile(e);return Promise.resolve(s.getAssemblyOptions(o,s)).then(function(s){return t.validateParams(s.params),{fileIDs:[e],options:s}})}))},t.prototype.dedupeAssemblyOptions=function(e){var t=Object.create(null);return e.forEach(function(e){var s=e.fileIDs,o=e.options,r=JSON.stringify(o);if(t[r]){var i;(i=t[r].fileIDs).push.apply(i,s)}else t[r]={options:o,fileIDs:[].concat(s)}}),Object.keys(t).map(function(e){return t[e]})},t.prototype.createAssembly=function(e,t,s){var o=this,r=this.opts;return this.core.log("Transloadit: create assembly"),this.client.createAssembly({params:s.params,fields:s.fields,expectedFiles:e.length,signature:s.signature}).then(function(s){function i(e,t){var s={assembly_url:t.assembly_url,filename:e.name,fieldname:"file"},o=_extends({},e.meta,s),i=_extends({},e.tus,{endpoint:t.tus_url,metaFields:Object.keys(s)}),n={assembly:t.assembly_id},a=_extends({},e,{transloadit:n});return r.importFromUploadURLs||_extends(a,{meta:o,tus:i}),a}var n,a,l=o.state.uploadsAssemblies[t],c=_extends({},o.state.uploadsAssemblies,(n={},n[t]=l.concat([s.assembly_id]),n));o.updateState({assemblies:_extends(o.state.assemblies,(a={},a[s.assembly_id]=s,a)),uploadsAssemblies:c});var p=_extends({},o.core.state.files);return e.forEach(function(e){p[e]=i(p[e],s)}),o.core.setState({files:p}),o.core.emit("transloadit:assembly-created",s,e),o.connectSocket(s).then(function(){return s})}).then(function(e){return o.core.log("Transloadit: Created assembly"),e}).catch(function(e){throw o.core.info(r.locale.strings.creatingAssemblyFailed,"error",0),e})},t.prototype.shouldWait=function(){return this.opts.waitForEncoding||this.opts.waitForMetadata},t.prototype.reserveFiles=function(e,t){var s=this;return Promise.all(t.map(function(t){var o=s.core.getFile(t);return s.client.reserveFile(e,o)}))},t.prototype.onFileUploadURLAvailable=function(e){var t=this,s=this.core.getFile(e);if(s&&s.transloadit&&s.transloadit.assembly){var o=this.state.assemblies[s.transloadit.assembly];this.client.addFile(o,s).catch(function(e){t.core.log(e),t.core.emit("transloadit:import-error",o,s.id,e)})}},t.prototype.findFile=function(e){var t=this.core.state.files;for(var s in t)if(t.hasOwnProperty(s)&&t[s].uploadURL===e.tus_upload_url)return t[s]},t.prototype.onFileUploadComplete=function(e,t){var s,o=this.findFile(t);this.updateState({files:_extends({},this.state.files,(s={},s[t.id]={id:o.id,uploadedFile:t},s))}),this.core.emit("transloadit:upload",t,this.getAssembly(e))},t.prototype.onResult=function(e,t,s){var o=this.state.files[s.original_id];s.localId=o?o.id:null,this.updateState({results:this.state.results.concat(s)}),this.core.emit("transloadit:result",t,s,this.getAssembly(e))},t.prototype.onAssemblyFinished=function(e){var t=this;this.client.getAssemblyStatus(e).then(function(e){var s;t.updateState({assemblies:_extends({},t.state.assemblies,(s={},s[e.assembly_id]=e,s))}),t.core.emit("transloadit:complete",e)})},t.prototype.connectSocket=function(e){var t=this,s=new StatusSocket(e.websocket_url,e);return this.sockets[e.assembly_id]=s,s.on("upload",this.onFileUploadComplete.bind(this,e.assembly_id)),s.on("error",function(s){t.core.emit("transloadit:assembly-error",e,s)}),this.opts.waitForEncoding&&s.on("result",this.onResult.bind(this,e.assembly_id)),this.opts.waitForEncoding?s.on("finished",function(){t.onAssemblyFinished(e.assembly_ssl_url)}):this.opts.waitForMetadata&&s.on("metadata",function(){t.onAssemblyFinished(e.assembly_ssl_url),t.core.emit("transloadit:complete",e)}),new _Promise(function(e,t){s.on("connect",e),s.on("error",t)}).then(function(){t.core.log("Transloadit: Socket is ready")})},t.prototype.prepareUpload=function(e,t){var s,o=this;e.forEach(function(e){o.core.emit("core:preprocess-progress",e,{mode:"indeterminate",message:o.opts.locale.strings.creatingAssembly})});var r=function(e){var s=e.fileIDs,r=e.options;return o.createAssembly(s,t,r).then(function(e){if(o.opts.importFromUploadURLs)return o.reserveFiles(e,s)}).then(function(){s.forEach(function(e){o.core.emit("core:preprocess-complete",e)})})},i=_extends({},this.state.uploadsAssemblies,(s={},s[t]=[],s));this.updateState({uploadsAssemblies:i});var n=void 0;if(e.length>0)n=this.getAssemblyOptions(e).then(function(e){return o.dedupeAssemblyOptions(e)});else{if(!this.opts.alwaysRunAssembly)return Promise.resolve();n=Promise.resolve(this.opts.getAssemblyOptions(null,this.opts)).then(function(t){return o.validateParams(t.params),[{fileIDs:e,options:t}]})}return n.then(function(e){return Promise.all(e.map(r))})},t.prototype.afterUpload=function(e,t){var s=this,o=this.state.uploadsAssemblies[t];if(!this.shouldWait())return o.forEach(function(e){s.sockets[e].close()}),Promise.resolve();if(0===o.length)return Promise.resolve();var r=0;return new _Promise(function(t,i){e.forEach(function(e){s.core.emit("core:postprocess-progress",e,{mode:"indeterminate",message:s.opts.locale.strings.encoding})});var n=function(e){if(-1!==o.indexOf(e.assembly_id)){s.getAssemblyFiles(e.assembly_id).forEach(function(e){s.core.emit("core:postprocess-complete",e.id)}),r+=1,r===o.length&&(c(),t())}},a=function(e,t){if(-1!==o.indexOf(e.assembly_id)){s.getAssemblyFiles(e.assembly_id).forEach(function(e){s.core.emit("core:postprocess-complete",e.id)}),c(),i(t)}},l=function(e,t,s){-1!==o.indexOf(e.assembly_id)&&a(e,s)},c=function(){s.core.off("transloadit:complete",n),s.core.off("transloadit:assembly-error",a),s.core.off("transloadit:import-error",l)};s.core.on("transloadit:complete",n),s.core.on("transloadit:assembly-error",a),s.core.on("transloadit:import-error",l)}).then(function(){var e=_extends({},s.state.uploadsAssemblies);delete e[t],s.updateState({uploadsAssemblies:e})})},t.prototype.install=function(){this.core.addPreProcessor(this.prepareUpload),this.core.addPostProcessor(this.afterUpload),this.opts.importFromUploadURLs&&this.core.on("core:upload-success",this.onFileUploadURLAvailable),this.updateState({assemblies:{},uploadsAssemblies:{},files:{},results:[]})},t.prototype.uninstall=function(){this.core.removePreProcessor(this.prepareUpload),this.core.removePostProcessor(this.afterUpload),this.opts.importFromUploadURLs&&this.core.off("core:upload-success",this.onFileUploadURLAvailable)},t.prototype.getAssembly=function(e){return this.state.assemblies[e]},t.prototype.getAssemblyFiles=function(e){var t=this;return Object.keys(this.core.state.files).map(function(e){return t.core.getFile(e)}).filter(function(t){return t&&t.transloadit&&t.transloadit.assembly===e})},t.prototype.updateState=function(e){var t=_extends({},this.state,e);this.core.setState({transloadit:t})},_createClass(t,[{key:"state",get:function(){return this.core.state.transloadit||{}}}]),t}(Plugin);
},{"../Plugin":120,"./Client":127,"./Socket":128,"es6-promise":30}],130:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},_Promise="undefined"==typeof Promise?require("es6-promise").Promise:Promise,Plugin=require("./Plugin"),tus=require("tus-js-client"),UppySocket=require("../core/UppySocket"),Utils=require("../core/Utils");require("whatwg-fetch");var tusDefaultOptions={endpoint:"",resume:!0,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,headers:{},chunkSize:1/0,withCredentials:!1,uploadUrl:null,uploadSize:null,overridePatchMethod:!1,retryDelays:null};module.exports=function(e){function t(o,r){_classCallCheck(this,t);var s=_possibleConstructorReturn(this,e.call(this,o,r));s.type="uploader",s.id="Tus",s.title="Tus";var n={resume:!0,allowPause:!0,autoRetry:!0,retryDelays:[0,1e3,3e3,5e3]};return s.opts=_extends({},n,r),s.handlePauseAll=s.handlePauseAll.bind(s),s.handleResumeAll=s.handleResumeAll.bind(s),s.handleResetProgress=s.handleResetProgress.bind(s),s.handleUpload=s.handleUpload.bind(s),s}return _inherits(t,e),t.prototype.pauseResume=function(e,t){var o=_extends({},this.core.getState().files),r=Object.keys(o).filter(function(e){return!o[e].progress.uploadComplete&&o[e].progress.uploadStarted});switch(e){case"toggle":if(o[t].uploadComplete)return;var s=o[t].isPaused||!1,n=!s,i=void 0;return i=s?_extends({},o[t],{isPaused:!1}):_extends({},o[t],{isPaused:!0}),o[t]=i,this.core.setState({files:o}),n;case"pauseAll":return r.forEach(function(e){var t=_extends({},o[e],{isPaused:!0});o[e]=t}),void this.core.setState({files:o});case"resumeAll":return r.forEach(function(e){var t=_extends({},o[e],{isPaused:!1});o[e]=t}),void this.core.setState({files:o})}},t.prototype.handlePauseAll=function(){this.pauseResume("pauseAll")},t.prototype.handleResumeAll=function(){this.pauseResume("resumeAll")},t.prototype.handleResetProgress=function(){var e=_extends({},this.core.state.files);Object.keys(e).forEach(function(t){if(e[t].tus&&e[t].tus.uploadUrl){var o=_extends({},e[t].tus);delete o.uploadUrl,e[t]=_extends({},e[t],{tus:o})}}),this.core.setState({files:e})},t.prototype.upload=function(e,t,o){var r=this;return this.core.log("uploading "+t+" of "+o),new _Promise(function(t,o){var s=_extends({},tusDefaultOptions,r.opts,e.tus||{});s.onError=function(t){r.core.log(t),r.core.emit("core:upload-error",e.id,t),o("Failed because: "+t)},s.onProgress=function(t,o){r.onReceiveUploadUrl(e,n.url),r.core.emit("core:upload-progress",{uploader:r,id:e.id,bytesUploaded:t,bytesTotal:o})},s.onSuccess=function(){r.core.emit("core:upload-success",e.id,n,n.url),n.url&&r.core.log("Download "+n.file.name+" from "+n.url),t(n)},s.metadata=e.meta;var n=new tus.Upload(e.data,s);r.onFileRemove(e.id,function(e){n.abort(),t("upload "+e+" was removed")}),r.onPause(e.id,function(e){e?n.abort():n.start()}),r.onPauseAll(e.id,function(){n.abort()}),r.onResumeAll(e.id,function(){n.start()}),r.core.on("core:retry-started",function(){var t=r.core.getState().files;t[e.id].progress.uploadComplete||!t[e.id].progress.uploadStarted||t[e.id].isPaused||n.start()}),n.start(),r.core.emit("core:upload-started",e.id,n)})},t.prototype.uploadRemote=function(e,t,o){var r=this;return new _Promise(function(t,o){if(r.core.log(e.remote.url),e.serverToken)r.connectToServerSocket(e);else{var s=r.opts.endpoint;e.tus&&e.tus.endpoint&&(s=e.tus.endpoint),r.core.emitter.emit("core:upload-started",e.id),fetch(e.remote.url,{method:"post",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(_extends({},e.remote.body,{endpoint:s,protocol:"tus",size:e.data.size,metadata:e.meta}))}).then(function(s){if(s.status<200&&s.status>300)return o(s.statusText);s.json().then(function(o){var s=o.token;e=r.getFile(e.id),e.serverToken=s,r.updateFile(e),r.connectToServerSocket(e),t()})})}})},t.prototype.connectToServerSocket=function(e){var t=this,o=e.serverToken,r=Utils.getSocketHost(e.remote.host),s=new UppySocket({target:r+"/api/"+o});this.onFileRemove(e.id,function(){return s.send("pause",{})}),this.onPause(e.id,function(e){e?s.send("pause",{}):s.send("resume",{})}),this.onPauseAll(e.id,function(){return s.send("pause",{})}),this.onResumeAll(e.id,function(){return s.send("resume",{})}),s.on("progress",function(o){return Utils.emitSocketProgress(t,o,e)}),s.on("success",function(o){t.core.emitter.emit("core:upload-success",e.id,o,o.url),s.close()})},t.prototype.getFile=function(e){return this.core.state.files[e]},t.prototype.updateFile=function(e){var t,o=_extends({},this.core.state.files,(t={},t[e.id]=e,t));this.core.setState({files:o})},t.prototype.onReceiveUploadUrl=function(e,t){var o=this.getFile(e.id);if(o&&(!o.tus||o.tus.uploadUrl!==t)){var r=_extends({},o,{tus:_extends({},o.tus,{uploadUrl:t})});this.updateFile(r)}},t.prototype.onFileRemove=function(e,t){this.core.on("core:file-removed",function(o){e===o&&t(o)})},t.prototype.onPause=function(e,t){var o=this;this.core.on("core:upload-pause",function(r){if(e===r){var s=o.pauseResume("toggle",e);t(s)}})},t.prototype.onPauseAll=function(e,t){var o=this;this.core.on("core:pause-all",function(){o.core.getFile(e)&&t()})},t.prototype.onResumeAll=function(e,t){var o=this;this.core.on("core:resume-all",function(){o.core.getFile(e)&&t()})},t.prototype.uploadFiles=function(e){var t=this;e.forEach(function(o,r){var s=parseInt(r,10)+1,n=e.length;o.isRemote?t.uploadRemote(o,s,n):t.upload(o,s,n)})},t.prototype.handleUpload=function(e){var t=this;if(0===e.length)return this.core.log("Tus: no files to upload!"),Promise.resolve();this.core.log("Tus is uploading...");var o=e.map(function(e){return t.core.getFile(e)});return this.uploadFiles(o),new _Promise(function(e){t.core.once("core:upload-complete",e)})},t.prototype.actions=function(){var e=this;this.core.on("core:pause-all",this.handlePauseAll),this.core.on("core:resume-all",this.handleResumeAll),this.core.on("core:reset-progress",this.handleResetProgress),this.opts.autoRetry&&this.core.on("back-online",function(){e.core.emit("core:retry-started")})},t.prototype.addResumableUploadsCapabilityFlag=function(){var e=_extends({},this.core.getState().capabilities);e.resumableUploads=!0,this.core.setState({capabilities:e})},t.prototype.install=function(){this.addResumableUploadsCapabilityFlag(),this.core.addUploader(this.handleUpload),this.actions()},t.prototype.uninstall=function(){this.core.removeUploader(this.handleUpload),this.core.off("core:pause-all",this.handlePauseAll),this.core.off("core:resume-all",this.handleResumeAll)},t}(Plugin);
},{"../core/UppySocket":86,"../core/Utils":87,"./Plugin":120,"es6-promise":30,"tus-js-client":72,"whatwg-fetch":78}],131:[function(require,module,exports){
"use strict";var _svgNamespace="http://www.w3.org/2000/svg",_appendChild=require("yo-yoify/lib/appendChild");module.exports=function(e){var t,s,c;return c=document.createElementNS(_svgNamespace,"svg"),c.setAttribute("width","100"),c.setAttribute("height","77"),c.setAttribute("viewBox","0 0 100 77"),c.setAttribute("class","UppyIcon"),_appendChild(c,[" ",(t=document.createElementNS(_svgNamespace,"path"),t.setAttribute("d","M50 32c-7.168 0-13 5.832-13 13s5.832 13 13 13 13-5.832 13-13-5.832-13-13-13z"),t)," ",(s=document.createElementNS(_svgNamespace,"path"),s.setAttribute("d","M87 13H72c0-7.18-5.82-13-13-13H41c-7.18 0-13 5.82-13 13H13C5.82 13 0 18.82 0 26v38c0 7.18 5.82 13 13 13h74c7.18 0 13-5.82 13-13V26c0-7.18-5.82-13-13-13zM50 68c-12.683 0-23-10.318-23-23s10.317-23 23-23 23 10.318 23 23-10.317 23-23 23z"),s)," "]),c};
},{"yo-yoify/lib/appendChild":83}],132:[function(require,module,exports){
"use strict";function isModeAvailable(e,t){return-1!==e.indexOf(t)}var _appendChild=require("yo-yoify/lib/appendChild"),_onload=require("on-load"),SnapshotButton=require("./SnapshotButton"),RecordButton=require("./RecordButton");module.exports=function(e){var t,o,n,a,i=e.src||"",r=void 0;if(e.useTheFlash)r=e.getSWFHTML();else{var d;d=document.createElement("video"),d.setAttribute("autoplay","autoplay"),d.setAttribute("muted","muted"),d.setAttribute("src",""+String(i)),d.setAttribute("class","UppyWebcam-video"),r=d}var u=e.supportsRecording&&(isModeAvailable(e.modes,"video-only")||isModeAvailable(e.modes,"audio-only")||isModeAvailable(e.modes,"video-audio")),s=isModeAvailable(e.modes,"picture");return a=document.createElement("div"),_onload(a,function(t){e.onFocus();var o=t.querySelector(".UppyWebcam-recordButton");o&&o.focus()},function(t){e.onStop()},6),a.setAttribute("class","UppyWebcam-container"),_appendChild(a,[" ",(t=document.createElement("div"),t.setAttribute("class","UppyWebcam-videoContainer"),_appendChild(t,[" ",r," "]),t)," ",(o=document.createElement("div"),o.setAttribute("class","UppyWebcam-buttonContainer"),_appendChild(o,[" ",u?RecordButton(e):null," ",s?SnapshotButton(e):null," "]),o)," ",(n=document.createElement("canvas"),n.setAttribute("style","display: none;"),n.setAttribute("class","UppyWebcam-canvas"),n)," "]),a};
},{"./RecordButton":134,"./SnapshotButton":137,"on-load":48,"yo-yoify/lib/appendChild":83}],133:[function(require,module,exports){
"use strict";var _appendChild=require("yo-yoify/lib/appendChild");module.exports=function(e){var t,r,a;return a=document.createElement("div"),a.setAttribute("class","uppy-Webcam-permissons"),_appendChild(a,[" ",(t=document.createElement("h1"),t.textContent="Please allow access to your camera",t)," ",(r=document.createElement("p"),_appendChild(r,["You have been prompted to allow camera access from this site.",document.createElement("br")," In order to take pictures with your camera you must approve this request."]),r)," "]),a};
},{"yo-yoify/lib/appendChild":83}],134:[function(require,module,exports){
"use strict";var _appendChild=require("yo-yoify/lib/appendChild"),RecordStartIcon=require("./RecordStartIcon"),RecordStopIcon=require("./RecordStopIcon");module.exports=function(t){var e,r=t.recording,o=t.onStartRecording,n=t.onStopRecording;if(r){var c;return c=document.createElement("button"),c.setAttribute("type","button"),c.setAttribute("title","Stop Recording"),c.setAttribute("aria-label","Stop Recording"),c.onclick=n,c.setAttribute("class","UppyButton--circular UppyButton--red UppyButton--sizeM UppyWebcam-recordButton"),_appendChild(c,[" ",RecordStopIcon()," "]),c}return e=document.createElement("button"),e.setAttribute("type","button"),e.setAttribute("title","Begin Recording"),e.setAttribute("aria-label","Begin Recording"),e.onclick=o,e.setAttribute("class","UppyButton--circular UppyButton--red UppyButton--sizeM UppyWebcam-recordButton"),_appendChild(e,[" ",RecordStartIcon()," "]),e};
},{"./RecordStartIcon":135,"./RecordStopIcon":136,"yo-yoify/lib/appendChild":83}],135:[function(require,module,exports){
"use strict";var _svgNamespace="http://www.w3.org/2000/svg",_appendChild=require("yo-yoify/lib/appendChild");module.exports=function(t){var e,r;return r=document.createElementNS(_svgNamespace,"svg"),r.setAttribute("width","100"),r.setAttribute("height","100"),r.setAttribute("viewBox","0 0 100 100"),r.setAttribute("class","UppyIcon"),_appendChild(r,[" ",(e=document.createElementNS(_svgNamespace,"circle"),e.setAttribute("cx","50"),e.setAttribute("cy","50"),e.setAttribute("r","40"),e)," "]),r};
},{"yo-yoify/lib/appendChild":83}],136:[function(require,module,exports){
"use strict";var _svgNamespace="http://www.w3.org/2000/svg",_appendChild=require("yo-yoify/lib/appendChild");module.exports=function(t){var e,i;return i=document.createElementNS(_svgNamespace,"svg"),i.setAttribute("width","100"),i.setAttribute("height","100"),i.setAttribute("viewBox","0 0 100 100"),i.setAttribute("class","UppyIcon"),_appendChild(i,[" ",(e=document.createElementNS(_svgNamespace,"rect"),e.setAttribute("x","15"),e.setAttribute("y","15"),e.setAttribute("width","70"),e.setAttribute("height","70"),e)," "]),i};
},{"yo-yoify/lib/appendChild":83}],137:[function(require,module,exports){
"use strict";var _appendChild=require("yo-yoify/lib/appendChild"),CameraIcon=require("./CameraIcon");module.exports=function(t){var e,a=t.onSnapshot;return e=document.createElement("button"),e.setAttribute("type","button"),e.setAttribute("title","Take a snapshot"),e.setAttribute("aria-label","Take a snapshot"),e.onclick=a,e.setAttribute("class","UppyButton--circular UppyButton--red UppyButton--sizeM UppyWebcam-recordButton"),_appendChild(e,[" ",CameraIcon()," "]),e};
},{"./CameraIcon":131,"yo-yoify/lib/appendChild":83}],138:[function(require,module,exports){
"use strict";var _svgNamespace="http://www.w3.org/2000/svg",_appendChild=require("yo-yoify/lib/appendChild");module.exports=function(e){var t,s,c;return c=document.createElementNS(_svgNamespace,"svg"),c.setAttribute("width","18"),c.setAttribute("height","21"),c.setAttribute("viewBox","0 0 18 21"),c.setAttribute("class","UppyIcon"),_appendChild(c,[" ",(t=document.createElementNS(_svgNamespace,"path"),t.setAttribute("d","M14.8 16.9c1.9-1.7 3.2-4.1 3.2-6.9 0-5-4-9-9-9s-9 4-9 9c0 2.8 1.2 5.2 3.2 6.9C1.9 17.9.5 19.4 0 21h3c1-1.9 11-1.9 12 0h3c-.5-1.6-1.9-3.1-3.2-4.1zM9 4c3.3 0 6 2.7 6 6s-2.7 6-6 6-6-2.7-6-6 2.7-6 6-6z"),t)," ",(s=document.createElementNS(_svgNamespace,"path"),s.setAttribute("d","M9 14c2.2 0 4-1.8 4-4s-1.8-4-4-4-4 1.8-4 4 1.8 4 4 4zM8 8c.6 0 1 .4 1 1s-.4 1-1 1-1-.4-1-1c0-.5.4-1 1-1z"),s)," "]),c};
},{"yo-yoify/lib/appendChild":83}],139:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_Promise="undefined"==typeof Promise?require("es6-promise").Promise:Promise,Plugin=require("../Plugin"),WebcamProvider=require("../../uppy-base/src/plugins/Webcam"),Translator=require("../../core/Translator"),_require=require("../../core/Utils"),extend=_require.extend,getFileTypeExtension=_require.getFileTypeExtension,supportsMediaRecorder=_require.supportsMediaRecorder,WebcamIcon=require("./WebcamIcon"),CameraScreen=require("./CameraScreen"),PermissionsScreen=require("./PermissionsScreen");module.exports=function(e){function t(r,o){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,e.call(this,r,o));n.userMedia=!0,n.protocol=location.protocol.match(/https/i)?"https":"http",n.type="acquirer",n.id="Webcam",n.title="Webcam",n.icon=WebcamIcon,n.focus=n.focus.bind(n);var s={strings:{smile:"Smile!"}},i={enableFlash:!0,onBeforeSnapshot:function(){return Promise.resolve()},countdown:!1,locale:s,modes:["video-audio","video-only","audio-only","picture"]};return n.params={swfURL:"webcam.swf",width:400,height:300,dest_width:800,dest_height:600,image_format:"jpeg",jpeg_quality:90,enable_flash:!0,force_flash:!1,flip_horiz:!1,fps:30,upload_name:"webcam",constraints:null,flashNotDetectedText:"ERROR: No Adobe Flash Player detected.  Webcam.js relies on Flash for browsers that do not support getUserMedia (like yours).",noInterfaceFoundText:"No supported webcam interface found.",unfreeze_snap:!0},n.opts=_extends({},i,o),n.locale=_extends({},s,n.opts.locale),n.locale.strings=_extends({},s.strings,n.opts.locale.strings),n.translator=new Translator({locale:n.locale}),n.i18n=n.translator.translate.bind(n.translator),n.install=n.install.bind(n),n.updateState=n.updateState.bind(n),n.render=n.render.bind(n),n.start=n.start.bind(n),n.stop=n.stop.bind(n),n.takeSnapshot=n.takeSnapshot.bind(n),n.startRecording=n.startRecording.bind(n),n.stopRecording=n.stopRecording.bind(n),n.oneTwoThreeSmile=n.oneTwoThreeSmile.bind(n),n.webcam=new WebcamProvider(n.opts,n.params),n.webcamActive=!1,n.opts.countdown&&(n.opts.onBeforeSnapshot=n.oneTwoThreeSmile),n}return _inherits(t,e),t.prototype.updateState=function(e){var t=this.core.state,r=_extends({},t.webcam,e);this.core.setState({webcam:r})},t.prototype.start=function(){var e=this;this.webcamActive=!0,this.webcam.start().then(function(t){e.stream=t,e.updateState({cameraReady:!0})}).catch(function(t){e.updateState({cameraError:t})})},t.prototype.startRecording=function(){var e=this;this.recorder=new MediaRecorder(this.stream),this.recordingChunks=[],this.recorder.addEventListener("dataavailable",function(t){e.recordingChunks.push(t.data)}),this.recorder.start(),this.updateState({isRecording:!0})},t.prototype.stopRecording=function(){var e=this;return new _Promise(function(t,r){e.recorder.addEventListener("stop",function(){e.updateState({isRecording:!1});var o=e.recordingChunks[0].type,n=getFileTypeExtension(o);if(!n)return void r(new Error('Could not upload file: Unsupported media type "'+o+'"'));var s={source:e.id,name:"webcam-"+Date.now()+"."+n,type:o,data:new Blob(e.recordingChunks,{type:o})};e.core.addFile(s),e.recordingChunks=null,e.recorder=null,t()}),e.recorder.stop()})},t.prototype.stop=function(){this.stream.getAudioTracks().forEach(function(e){e.stop()}),this.stream.getVideoTracks().forEach(function(e){e.stop()}),this.webcamActive=!1,this.stream=null,this.streamSrc=null},t.prototype.oneTwoThreeSmile=function(){var e=this;return new _Promise(function(t,r){var o=e.opts.countdown,n=setInterval(function(){if(!e.webcamActive)return clearInterval(n),e.captureInProgress=!1,r("Webcam is not active");o>0?(e.core.info(o+"...","warning",800),o--):(clearInterval(n),e.core.info(e.i18n("smile"),"success",1500),setTimeout(function(){return t()},1500))},1e3)})},t.prototype.takeSnapshot=function(){var e=this,t={name:"webcam-"+Date.now()+".jpg",mimeType:"image/jpeg"};this.videoEl=this.target.querySelector(".UppyWebcam-video"),this.captureInProgress||(this.captureInProgress=!0,this.opts.onBeforeSnapshot().catch(function(t){return e.core.info(t,"error",5e3),Promise.reject("onBeforeSnapshot: "+t)}).then(function(){var r=e.target.querySelector(".UppyWebcam-video");if(!r)return e.captureInProgress=!1,Promise.reject("No video element found, likely due to the Webcam tab being closed.");var o=e.webcam.getImage(r,t),n={source:e.id,name:t.name,data:o.data,type:t.mimeType};e.captureInProgress=!1,e.core.addFile(n)}))},t.prototype.focus=function(){var e=this;this.opts.countdown||setTimeout(function(){e.core.info(e.i18n("smile"),"success",1500)},1e3)},t.prototype.render=function(e){return this.webcamActive||this.start(),e.webcam.cameraReady||e.webcam.useTheFlash?(this.streamSrc||(this.streamSrc=this.stream?URL.createObjectURL(this.stream):null),CameraScreen(extend(e.webcam,{onSnapshot:this.takeSnapshot,onStartRecording:this.startRecording,onStopRecording:this.stopRecording,onFocus:this.focus,onStop:this.stop,modes:this.opts.modes,supportsRecording:supportsMediaRecorder(),recording:e.webcam.isRecording,getSWFHTML:this.webcam.getSWFHTML,src:this.streamSrc}))):PermissionsScreen(e.webcam)},t.prototype.install=function(){this.webcam.init(),this.core.setState({webcam:{cameraReady:!1}});var e=this.opts.target,t=this;this.target=this.mount(e,t)},t.prototype.uninstall=function(){this.webcam.reset(),this.unmount()},t}(Plugin);
},{"../../core/Translator":85,"../../core/Utils":87,"../../uppy-base/src/plugins/Webcam":142,"../Plugin":120,"./CameraScreen":132,"./PermissionsScreen":133,"./WebcamIcon":138,"es6-promise":30}],140:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},_Promise="undefined"==typeof Promise?require("es6-promise").Promise:Promise,Plugin=require("./Plugin"),UppySocket=require("../core/UppySocket"),Utils=require("../core/Utils");module.exports=function(e){function t(o,r){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,e.call(this,o,r));n.type="uploader",n.id="XHRUpload",n.title="XHRUpload";var a={formData:!0,fieldName:"files[]",method:"post",metaFields:null,responseUrlFieldName:"url",bundle:!0,headers:{},getResponseData:function(e){return JSON.parse(e.response)},getResponseError:function(e){return new Error("Upload error")}};return n.opts=_extends({},a,r),n.handleUpload=n.handleUpload.bind(n),n}return _inherits(t,e),t.prototype.createFormDataUpload=function(e,t){var o=new FormData;return(Array.isArray(t.metaFields)?t.metaFields:Object.keys(e.meta)).forEach(function(t){o.append(t,e.meta[t])}),o.append(t.fieldName,e.data),o},t.prototype.createBareUpload=function(e,t){return e.data},t.prototype.upload=function(e,t,o){var r=this,n=_extends({},this.opts,this.core.state.xhrUpload||{},e.xhrUpload||{});return this.core.log("uploading "+t+" of "+o),new _Promise(function(t,o){var a=n.formData?r.createFormDataUpload(e,n):r.createBareUpload(e,n),s=new XMLHttpRequest;s.upload.addEventListener("progress",function(t){t.lengthComputable&&r.core.emit("core:upload-progress",{uploader:r,id:e.id,bytesUploaded:t.loaded,bytesTotal:t.total})}),s.addEventListener("load",function(a){if(a.target.status>=200&&a.target.status<300){var i=n.getResponseData(s),l=i[n.responseUrlFieldName];return r.core.emit("core:upload-success",e.id,i,l),l&&r.core.log("Download "+e.name+" from "+e.uploadURL),t(e)}var p=n.getResponseError(s)||new Error("Upload error");return p.request=s,r.core.emit("core:upload-error",e.id,p),o(p)}),s.addEventListener("error",function(t){return r.core.emit("core:upload-error",e.id),o(new Error("Upload error"))}),s.open(n.method.toUpperCase(),n.endpoint,!0),Object.keys(n.headers).forEach(function(e){s.setRequestHeader(e,n.headers[e])}),s.send(a),r.core.on("core:upload-cancel",function(t){t===e.id&&s.abort()}),r.core.on("core:cancel-all",function(){s.abort()}),r.core.emit("core:upload-started",e.id)})},t.prototype.uploadRemote=function(e,t,o){var r=this,n=_extends({},this.opts,e.xhrUpload||{});return new _Promise(function(t,o){r.core.emit("core:upload-started",e.id),fetch(e.remote.url,{method:"post",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(_extends({},e.remote.body,{endpoint:n.endpoint,size:e.data.size,fieldname:n.fieldName}))}).then(function(n){if(n.status<200&&n.status>300)return o(n.statusText);n.json().then(function(o){var n=o.token,a=Utils.getSocketHost(e.remote.host),s=new UppySocket({target:a+"/api/"+n});s.on("progress",function(t){return Utils.emitSocketProgress(r,t,e)}),s.on("success",function(o){return r.core.emit("core:upload-success",e.id,o,o.url),s.close(),t()})})})})},t.prototype.selectForUpload=function(e){var t=this;e.forEach(function(o,r){var n=parseInt(r,10)+1,a=e.length;o.isRemote?t.uploadRemote(o,n,a):t.upload(o,n,a)})},t.prototype.handleUpload=function(e){function t(e){return this.core.state.files[e]}var o=this;if(0===e.length)return this.core.log("XHRUpload: no files to upload!"),Promise.resolve();this.core.log("XHRUpload is uploading...");var r=e.map(t,this);return this.selectForUpload(r),new _Promise(function(e){o.core.once("core:upload-complete",e)})},t.prototype.install=function(){this.core.addUploader(this.handleUpload)},t.prototype.uninstall=function(){this.core.removeUploader(this.handleUpload)},t}(Plugin);
},{"../core/UppySocket":86,"../core/Utils":87,"./Plugin":120,"es6-promise":30}],141:[function(require,module,exports){
"use strict";function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();require("whatwg-fetch");var _getName=function(e){return e.split("-").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join(" ")};module.exports=function(){function e(t,n){_classCallCheck(this,e),this.core=t,this.opts=n,this.provider=n.provider,this.id=this.provider,this.authProvider=n.authProvider||this.provider,this.name=this.opts.name||_getName(this.id),this.onReceiveResponse=this.onReceiveResponse.bind(this)}return _createClass(e,[{key:"onReceiveResponse",value:function(e){var t=this.core.state.uppyServer||{},n=this.opts.host,i=e.headers;return i.has("i-am")&&i.get("i-am")!==t[n]&&this.core.setState({uppyServer:Object.assign({},t,_defineProperty({},n,i.get("i-am")))}),e}},{key:"checkAuth",value:function(){return fetch(this.hostname+"/"+this.id+"/authorized",{method:"get",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(this.onReceiveResponse).then(function(e){return e.json().then(function(e){return e.authenticated})})}},{key:"authUrl",value:function(){return this.hostname+"/"+this.id+"/connect"}},{key:"fileUrl",value:function(e){return this.hostname+"/"+this.id+"/get/"+e}},{key:"list",value:function(e){return fetch(this.hostname+"/"+this.id+"/list/"+(e||""),{method:"get",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(this.onReceiveResponse).then(function(e){return e.json()})}},{key:"logout",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:location.href;return fetch(this.hostname+"/"+this.id+"/logout?redirect="+e,{method:"get",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}})}},{key:"hostname",get:function(){var e=this.core.state.uppyServer||{},t=this.opts.host;return e[t]||t}}]),e}();
},{"whatwg-fetch":78}],142:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),dataURItoFile=require("../utils/dataURItoFile");module.exports=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,e),this._userMedia,this.userMedia=!0,this.protocol=location.protocol.match(/https/i)?"https":"http";var i={enableFlash:!0,modes:[]},s={swfURL:"webcam.swf",width:400,height:300,dest_width:800,dest_height:600,image_format:"jpeg",jpeg_quality:90,enable_flash:!0,force_flash:!1,flip_horiz:!1,fps:30,upload_name:"webcam",constraints:null,flashNotDetectedText:"ERROR: No Adobe Flash Player detected.  Webcam.js relies on Flash for browsers that do not support getUserMedia (like yours).",noInterfaceFoundText:"No supported webcam interface found.",unfreeze_snap:!0};this.params=Object.assign({},s,a),this.opts=Object.assign({},i,t),this.start=this.start.bind(this),this.init=this.init.bind(this),this.stop=this.stop.bind(this),this.takeSnapshot=this.takeSnapshot.bind(this),this.getImage=this.getImage.bind(this),this.getSWFHTML=this.getSWFHTML.bind(this),this.detectFlash=this.detectFlash.bind(this),this.getUserMedia=this.getUserMedia.bind(this),this.getMediaDevices=this.getMediaDevices.bind(this)}return _createClass(e,[{key:"init",value:function(){var e=this;return this.mediaDevices=this.getMediaDevices(),this.userMedia=this.getUserMedia(this.mediaDevices),this.userMedia&&window.addEventListener("beforeunload",function(t){e.reset()}),{mediaDevices:this.mediaDevices,userMedia:this.userMedia}}},{key:"getMediaDevices",value:function(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices:navigator.mozGetUserMedia||navigator.webkitGetUserMedia?{getUserMedia:function(e){return new Promise(function(t,a){(navigator.mozGetUserMedia||navigator.webkitGetUserMedia).call(navigator,e,t,a)})}}:null}},{key:"getUserMedia",value:function(e){return navigator.userAgent.match(/Firefox\D+(\d+)/)&&parseInt(RegExp.$1,10)<21?null:(window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,!!e&&!!window.URL)}},{key:"start",value:function(){var e=this;return this.userMedia=void 0===this._userMedia?this.userMedia:this._userMedia,new Promise(function(t,a){if(e.userMedia){var i=-1!==e.opts.modes.indexOf("video-audio")||-1!==e.opts.modes.indexOf("audio-only"),s=-1!==e.opts.modes.indexOf("video-audio")||-1!==e.opts.modes.indexOf("video-only")||-1!==e.opts.modes.indexOf("picture");e.mediaDevices.getUserMedia({audio:i,video:s}).then(function(e){return t(e)}).catch(function(e){return a(e)})}})}},{key:"detectFlash",value:function(){var e=window,t=navigator,a=!1;if(void 0!==t.plugins&&"object"===_typeof(t.plugins["Shockwave Flash"])){t.plugins["Shockwave Flash"].description&&void 0!==t.mimeTypes&&t.mimeTypes["application/x-shockwave-flash"]&&t.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(a=!0)}else if(void 0!==e.ActiveXObject)try{var i=new e.ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(i){var s=i.GetVariable("$version");s&&(a=!0)}}catch(e){}return a}},{key:"reset",value:function(){if(this.preview_active&&this.unfreeze(),this.userMedia){if(this.stream)if(this.stream.getVideoTracks){var e=this.stream.getVideoTracks();e&&e[0]&&e[0].stop&&e[0].stop()}else this.stream.stop&&this.stream.stop();delete this.stream}!0!==this.userMedia&&this.getMovie()._releaseCamera()}},{key:"getSWFHTML",value:function(){var e=this.params.swfURL;if(location.protocol.match(/file/))return'<h3 style="color:red">ERROR: the Webcam.js Flash fallback does not work from local disk.  Please run it from a web server.</h3>';if(!this.detectFlash())return'<h3 style="color:red">No flash</h3>';if(!e){for(var t="",a=document.getElementsByTagName("script"),i=0,s=a.length;i<s;i++){var o=a[i].getAttribute("src");o&&o.match(/\/webcam(\.min)?\.js/)&&(t=o.replace(/\/webcam(\.min)?\.js.*$/,""),i=s)}e=t?t+"/webcam.swf":"webcam.swf"}var r="";for(var n in this.params)r&&(r+="&"),r+=n+"="+escape(this.params[n]);return'<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" type="application/x-shockwave-flash" codebase="'+this.protocol+'://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+this.params.width+'" height="'+this.params.height+'" id="webcam_movie_obj" align="middle"><param name="wmode" value="opaque" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+e+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+r+'"/><embed id="webcam_movie_embed" src="'+e+'" wmode="opaque" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+this.params.width+'" height="'+this.params.height+'" name="webcam_movie_embed" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+r+'"></embed></object>'}},{key:"getMovie",value:function(){var e=document.getElementById("webcam_movie_obj");return e&&e._snap||(e=document.getElementById("webcam_movie_embed")),e||console.log("getMovie error"),e}},{key:"stop",value:function(){var e=this.videoStream;this.updateState({cameraReady:!1}),e&&(e.stop?e.stop():e.msStop&&e.msStop(),e.onended=null,e=null)}},{key:"flashNotify",value:function(e,t){switch(e){case"flashLoadComplete":break;case"cameraLive":this.live=!0;break;case"error":console.log("There was a flash error",t);break;default:console.log("webcam flash_notify: "+e+": "+t)}}},{key:"configure",value:function(e){e||(e="camera"),this.getMovie()._configure(e)}},{key:"getImage",value:function(e,t){var a=document.createElement("canvas");a.width=e.videoWidth,a.height=e.videoHeight,a.getContext("2d").drawImage(e,0,0);var i=a.toDataURL(t.mimeType);return{dataUrl:i,data:dataURItoFile(i,{name:t.name}),type:t.mimeType}}},{key:"takeSnapshot",value:function(e,t){var a={name:"webcam-"+Date.now()+".jpg",mimeType:"image/jpeg"},i=this.getImage(e,t,a);return{source:this.id,name:a.name,data:i.data,type:a.type}}}]),e}();
},{"../utils/dataURItoFile":143}],143:[function(require,module,exports){
"use strict";function dataURItoBlob(t,e,n){var r=t.split(",")[1],l=e.mimeType||t.split(",")[0].split(":")[1].split(";")[0];null==l&&(l="plain/text");for(var a=atob(r),i=[],o=0;o<a.length;o++)i.push(a.charCodeAt(o));return n?new File([new Uint8Array(i)],e.name||"",{type:l}):new Blob([new Uint8Array(i)],{type:l})}module.exports=function(t,e){return dataURItoBlob(t,e,!0)};
},{}],144:[function(require,module,exports){
"use strict";var _extends=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var t=arguments[i];for(var m in t)Object.prototype.hasOwnProperty.call(t,m)&&(e[m]=t[m])}return e};module.exports=function(e){var i=new Uint8Array(e);if(!(i&&i.length>1))return null;var t=function(e,t){t=_extends({offset:0},t);for(var m=0;m<e.length;m++)if(e[m]!==i[m+t.offset])return!1;return!0};if(t([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(t([137,80,78,71,13,10,26,10]))return{ext:"png",mime:"image/png"};if(t([71,73,70]))return{ext:"gif",mime:"image/gif"};if(t([87,69,66,80],{offset:8}))return{ext:"webp",mime:"image/webp"};if(t([70,76,73,70]))return{ext:"flif",mime:"image/flif"};if((t([73,73,42,0])||t([77,77,0,42]))&&t([67,82],{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(t([73,73,42,0])||t([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(t([66,77]))return{ext:"bmp",mime:"image/bmp"};if(t([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(t([56,66,80,83]))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(t([80,75,3,4])&&t([109,105,109,101,116,121,112,101,97,112,112,108,105,99,97,116,105,111,110,47,101,112,117,98,43,122,105,112],{offset:30}))return{ext:"epub",mime:"application/epub+zip"};if(t([80,75,3,4])&&t([77,69,84,65,45,73,78,70,47,109,111,122,105,108,108,97,46,114,115,97],{offset:30}))return{ext:"xpi",mime:"application/x-xpinstall"};if(t([80,75])&&(3===i[2]||5===i[2]||7===i[2])&&(4===i[3]||6===i[3]||8===i[3]))return{ext:"zip",mime:"application/zip"};if(t([117,115,116,97,114],{offset:257}))return{ext:"tar",mime:"application/x-tar"};if(t([82,97,114,33,26,7])&&(0===i[6]||1===i[6]))return{ext:"rar",mime:"application/x-rar-compressed"};if(t([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(t([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(t([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(t([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(t([0,0,0])&&(24===i[3]||32===i[3])&&t([102,116,121,112],{offset:4})||t([51,103,112,53])||t([0,0,0,28,102,116,121,112,109,112,52,50])&&t([109,112,52,49,109,112,52,50,105,115,111,109],{offset:16})||t([0,0,0,28,102,116,121,112,105,115,111,109])||t([0,0,0,28,102,116,121,112,109,112,52,50,0,0,0,0]))return{ext:"mp4",mime:"video/mp4"};if(t([0,0,0,28,102,116,121,112,77,52,86]))return{ext:"m4v",mime:"video/x-m4v"};if(t([77,84,104,100]))return{ext:"mid",mime:"audio/midi"};if(t([26,69,223,163])){var m=i.subarray(4,4100),o=m.findIndex(function(e,i,t){return 66===t[i]&&130===t[i+1]});if(o>=0){var f=o+3,a=function(e){return Array.from(e).every(function(e,i){return m[f+i]===e.charCodeAt(0)})};if(a("matroska"))return{ext:"mkv",mime:"video/x-matroska"};if(a("webm"))return{ext:"webm",mime:"video/webm"}}}return t([0,0,0,20,102,116,121,112,113,116,32,32])||t([102,114,101,101],{offset:4})||t([102,116,121,112,113,116,32,32],{offset:4})||t([109,100,97,116],{offset:4})||t([119,105,100,101],{offset:4})?{ext:"mov",mime:"video/quicktime"}:t([82,73,70,70])&&t([65,86,73],{offset:8})?{ext:"avi",mime:"video/x-msvideo"}:t([48,38,178,117,142,102,207,17,166,217])?{ext:"wmv",mime:"video/x-ms-wmv"}:t([0,0,1,186])?{ext:"mpg",mime:"video/mpeg"}:t([73,68,51])||t([255,251])?{ext:"mp3",mime:"audio/mpeg"}:t([102,116,121,112,77,52,65],{offset:4})||t([77,52,65,32])?{ext:"m4a",mime:"audio/m4a"}:t([79,112,117,115,72,101,97,100],{offset:28})?{ext:"opus",mime:"audio/opus"}:t([79,103,103,83])?{ext:"ogg",mime:"audio/ogg"}:t([102,76,97,67])?{ext:"flac",mime:"audio/x-flac"}:t([82,73,70,70])&&t([87,65,86,69],{offset:8})?{ext:"wav",mime:"audio/x-wav"}:t([35,33,65,77,82,10])?{ext:"amr",mime:"audio/amr"}:t([37,80,68,70])?{ext:"pdf",mime:"application/pdf"}:t([77,90])?{ext:"exe",mime:"application/x-msdownload"}:67!==i[0]&&70!==i[0]||!t([87,83],{offset:1})?t([123,92,114,116,102])?{ext:"rtf",mime:"application/rtf"}:t([0,97,115,109])?{ext:"wasm",mime:"application/wasm"}:t([119,79,70,70])&&(t([0,1,0,0],{offset:4})||t([79,84,84,79],{offset:4}))?{ext:"woff",mime:"font/woff"}:t([119,79,70,50])&&(t([0,1,0,0],{offset:4})||t([79,84,84,79],{offset:4}))?{ext:"woff2",mime:"font/woff2"}:t([76,80],{offset:34})&&(t([0,0,1],{offset:8})||t([1,0,2],{offset:8})||t([2,0,2],{offset:8}))?{ext:"eot",mime:"application/octet-stream"}:t([0,1,0,0,0])?{ext:"ttf",mime:"font/ttf"}:t([79,84,84,79,0])?{ext:"otf",mime:"font/otf"}:t([0,0,1,0])?{ext:"ico",mime:"image/x-icon"}:t([70,76,86,1])?{ext:"flv",mime:"video/x-flv"}:t([37,33])?{ext:"ps",mime:"application/postscript"}:t([253,55,122,88,90,0])?{ext:"xz",mime:"application/x-xz"}:t([83,81,76,105])?{ext:"sqlite",mime:"application/x-sqlite3"}:t([78,69,83,26])?{ext:"nes",mime:"application/x-nintendo-nes-rom"}:t([67,114,50,52])?{ext:"crx",mime:"application/x-google-chrome-extension"}:t([77,83,67,70])||t([73,83,99,40])?{ext:"cab",mime:"application/vnd.ms-cab-compressed"}:t([33,60,97,114,99,104,62,10,100,101,98,105,97,110,45,98,105,110,97,114,121])?{ext:"deb",mime:"application/x-deb"}:t([33,60,97,114,99,104,62])?{ext:"ar",mime:"application/x-unix-archive"}:t([237,171,238,219])?{ext:"rpm",mime:"application/x-rpm"}:t([31,160])||t([31,157])?{ext:"Z",mime:"application/x-compress"}:t([76,90,73,80])?{ext:"lz",mime:"application/x-lzip"}:t([208,207,17,224,161,177,26,225])?{ext:"msi",mime:"application/x-msi"}:t([6,14,43,52,2,5,1,1,13,1,2,1,1,2])?{ext:"mxf",mime:"application/mxf"}:t([71],{offset:4})&&(t([71],{offset:192})||t([71],{offset:196}))?{ext:"mts",mime:"video/mp2t"}:t([66,76,69,78,68,69,82])?{ext:"blend",mime:"application/x-blender"}:t([66,80,71,251])?{ext:"bpg",mime:"image/bpg"}:null:{ext:"swf",mime:"application/x-shockwave-flash"}};
},{}]},{},[98])(98)
});


//# sourceMappingURL=uppy.min.js.map